From git.zdns.cn:zdns/zddiv3
   f563b52..9a1ef5c  dev-3.14   -> origin/dev-3.14
   670fac9..6539523  task38746-dev-3.14 -> origin/task38746-dev-3.14
 + 92e1f80...89b4dcf task38822-3.13 -> origin/task38822-3.13  (forced update)
   779b413..824dad4  task38871-dev-3.14 -> origin/task38871-dev-3.14
   647a71c..f5aadbd  zddi-3.13  -> origin/zddi-3.13
Updating 670fac9..6539523
Fast-forward
 server/lib/zcoreddi/dns/cloud_named_controller.rb |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
Already on 'task38746-dev-3.14'
  a
  dev-3.14
  master
  task-jinyue
  task36923-master
  task36968-3.12.2.2
  task37042-master
  task37057-3.12.4.4
  task37538-3.12.4.6
  task37730-3.12.4.6
  task38090-3.11
  task38210-3.11.2.16
  task38223-3.11
  task38224-3.11
  task38396-3.11
  task38428-3.11
  task38436-3.11
* task38746-dev-3.14
  task38746-dev-3.14-add-test
  task38746-tcy-test
  zddi-3.11
  zddi-3.11.2.10
  zddi-3.11.2.16
  zddi-3.12.2.0-dongfangyouxian
  zddi-3.12.2.2
  zddi-3.12.4.4
  zddi-3.12.4.6
Already up-to-date.
fatal: Not a git repository (or any of the parent directories): .git
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/def.rb:12: warning: already initialized constant DDI::SYSTEM_PASTATE_FP
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:136: warning: previous definition of SYSTEM_PASTATE_FP was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:311: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:338: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:3: warning: already initialized constant DDI::PATCH_DATA_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:369: warning: previous definition of PATCH_DATA_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:4: warning: already initialized constant DDI::PATCH_BAK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:370: warning: previous definition of PATCH_BAK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:5: warning: already initialized constant DDI::PATCH_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:371: warning: previous definition of PATCH_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:6: warning: already initialized constant DDI::PATCH_M_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:372: warning: previous definition of PATCH_M_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:11: warning: already initialized constant DDI::SystemInfo::POWER_AVAILABLE_FILE
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:8: warning: previous definition of POWER_AVAILABLE_FILE was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:143: warning: duplicated key at line 145 ignored: :y_label_font_size
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:3: warning: class variable access from toplevel
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:15: warning: already initialized constant DDI::SQueryLog::DHCP_TABLE_ROW_NAME
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:14: warning: previous definition of DHCP_TABLE_ROW_NAME was here
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:69: warning: duplicated key at line 69 ignored: "192.168.1.100"
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:97: warning: duplicated key at line 97 ignored: "192.168.1.100"
Loaded suite /usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader
Started
................E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
: RuntimeError: 60002018010703
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/grid_dhcpfailover.rb:48:in `create_dhcpfailover'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:31:in `test_create_dhcpfailover'
     28: 
     29:     def test_create_dhcpfailover
     30:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
  => 31:         @failover_manager.create_dhcpfailover(DATA)
     32:         assert_equal(DATA['name'], @table.first[:name])
     33:     end
     34: 
===============================================================================
E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:133:in `test_create_table'
     130:     end
     131: 
     132:     def test_create_table
  => 133:         @db.run('drop table ' + TABLE_NAME.to_s)
     134:         @failover_manager.send :_create_table
     135:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     136:     end
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:36:in `test_del_dhcpfailover'
     33:     end
     34: 
     35:     def test_del_dhcpfailover
  => 36:         insert_failover_data
     37:         assert_equal(1, @table.count)
     38:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     39:         @failover_manager.del_dhcpfailover(DATA['name'])
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:75:in `test_del_failover_by_ip'
     72:     end
     73: 
     74:     def test_del_failover_by_ip
  => 75:         insert_failover_data
     76:         assert_equal(1, @table.count)
     77:         @failover_manager.del_failover_by_ip(DATA['master_node'])
     78:         assert_equal(0, @table.count)
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:118:in `test_fetch_failover_states_thread'
     115:     end
     116: 
     117:     def test_fetch_failover_states_thread
  => 118:         insert_failover_data
     119:         assert_nothing_raised {@failover_manager.fetch_failover_states_thread}
     120:     end
     121: 
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:21:in `test_get_configers'
     18:             "comment" => "is_a_comment"}
     19: 
     20:     def test_get_configers
  => 21:         insert_failover_data
     22:         assert_equal(DATA['name'], @failover_manager.configers[0].name)
     23:     end
     24: 
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:108:in `test_get_dhcpfailover_master_ip'
     105:     end
     106: 
     107:     def test_get_dhcpfailover_master_ip
  => 108:         insert_failover_data
     109:         assert_equal(DATA['master_ip'], @failover_manager.get_dhcpfailover_master_ip(DATA['name']))
     110:     end
     111: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:103:in `test_get_dhcpfailover_nodes'
     100:     end
     101: 
     102:     def test_get_dhcpfailover_nodes
  => 103:         insert_failover_data
     104:         assert_equal([DATA['master_node'], DATA['slave_node']], @failover_manager.get_dhcpfailover_nodes(DATA['name']))
     105:     end
     106: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:113:in `test_get_dhcpfailovers'
     110:     end
     111: 
     112:     def test_get_dhcpfailovers
  => 113:         insert_failover_data
     114:         assert_equal(DATA['name'], @failover_manager.get_dhcpfailovers[0]['name'])
     115:     end
     116: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:63:in `test_is_using_group?'
     60:     end
     61: 
     62:     def test_is_using_group?
  => 63:         insert_failover_data
     64:         assert_equal('yes', @failover_manager.is_using_group?([DATA['master_node']]))
     65:         assert_equal('no', @failover_manager.is_using_group?(['3.3.3.3']))
     66:     end
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:69:in `test_is_using_member_ip?'
     66:     end
     67: 
     68:     def test_is_using_member_ip?
  => 69:         insert_failover_data
     70:         assert_equal(true, @failover_manager.is_using_member_ip?(DATA['master_node']))
     71:         assert_equal(false, @failover_manager.is_using_member_ip?('3.3.3.3'))
     72:     end
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:123:in `test_set_failover_state'
     120:     end
     121: 
     122:     def test_set_failover_state
  => 123:         insert_failover_data
     124:         assert_nothing_raised do
     125:             @failover_manager.stubs(:_host_accessible).returns(true)
     126:             @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:44:in `test_update_dhcpfailover'
     41:     end
     42: 
     43:     def test_update_dhcpfailover
  => 44:         insert_failover_data
     45:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     46:         new_data = {'split' => '3/1', 'slave_ip' => '8.8.8.8'}
     47: 
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:57:in `test_update_dhcpfailover_comment'
     54:     end
     55: 
     56:     def test_update_dhcpfailover_comment
  => 57:         insert_failover_data
     58:         @failover_manager.update_dhcpfailover_comment(DATA['name'], 'set_new_comment')
     59:         assert_equal('set_new_comment', @table.first[:comment])
     60:     end
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:97:in `test_update_master_node_ip'
      94:     end
      95: 
      96:     def test_update_master_node_ip
  =>  97:         insert_failover_data
      98:         @failover_manager.update_master_node_ip(DATA['master_node'], '8.8.8.8')
      99:         assert_equal('8.8.8.8', @table.first[:master_node])
     100:     end
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `block in test_update_member_ip'
     86:         ip_datas = [{'master_node' => '6.6.6.6', 'master_ip' => '13.13.13.13', 'slave_ip' => '14.14.14.14'},
     87:                     {'master_node' => 'master1', 'master_ip' => '6.6.6.6', 'slave_ip' => '67.67.67.67'},
     88:                     {'master_node' => 'master2', 'master_ip' => '7.7.7.7', 'slave_ip' => '6.6.6.6'}]
  => 89:         ip_datas.each {|data| insert_failover_data(DATA.merge(data))}
     90:         @failover_manager.update_member_ip('6.6.6.6', '8.9.9.9')
     91:         assert_equal('13.13.13.13', @table.where(master_node: '8.9.9.9').first[:master_ip])
     92:         assert_equal('67.67.67.67', @table.where(master_ip: '8.9.9.9').first[:slave_ip])
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `each'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `test_update_member_ip'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"efqfgi.i.pqrtxe", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:141:in `test_del'
     138:     def test_del
     139:         expect_success_res = {"result" => "succeed"}
     140:         hint_zone_id = add_hint_zone() 
  => 141:         ids = add_hint_rrs(10)
     142: 
     143:         del_params_info = [{"name" => "ids", "type" => "string_array",
     144:                             "max_len" => 10, "max_cnt" => nil},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"tdcgfc.voran.kvogv", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:222:in `test_get'
     219:         all_rrs = []
     220:         hint_zone_id = add_hint_zone() 
     221: 
  => 222:         ids = add_hint_rrs(10){|res|
     223:             all_rrs << res["ret"] 
     224:         }
     225: 
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"ekaplbhvy.qys.dcicaigxs", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:124:in `block in test_post'
     121:         tester.test_valid_params(200, nil){|para, res|
     122:             # save the parameters,we'll add a duplicate record later.
     123:             paras = para
  => 124:             ids << res["ret"]["id"]
     125:         }
     126: 
     127:         # add an existing record
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:121:in `test_post'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"amdflqjs.solhfyuk.jcor", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:168:in `test_put'
     165:     
     166:     def test_put
     167:         hint_zone_id = add_hint_zone() 
  => 168:         ids = add_hint_rrs(10)
     169: 
     170:         put_paras_info = [
     171:             {"name" => "ids", "type" => "string_array", "max_cnt" => 1, "assignation" => ids},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:171:in `test_del'
     168:         ids = []
     169:         expect_success_res = {"result" => "succeed"}
     170: 
  => 171:         view_infos = add_views(10)
     172:         ids = add_rrs(view_infos)
     173: 
     174:         del_params_info = [{"name" => "ids", "type" => "string_array",
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:253:in `test_get'
     250:         all_rrs = []
     251:         view_infos = []
     252: 
  => 253:         view_infos = add_views(10)
     254:         ids = add_rrs(view_infos){|res|
     255:             all_rrs << res["ret"] 
     256:         }
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"view"=>"mtoqpy", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : owners
check type  : This is a rand string array
expect code : 421
expect res  : {"error"=>"10002018010736"}
parameters  : {"view"=>"default", "owners"=>["iaeirrfiqn", "kajiyava", "uodpi", "geghay"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"view"=>"default", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
.exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:205:in `test_put'
     202:         ids = []
     203:         view_infos = []
     204: 
  => 205:         view_infos = add_views(10)
     206:         ids = add_rrs(view_infos)
     207: 
     208:         put_paras_info = [
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"107.82.159.87", "is_enable"=>"yes", "name"=>"byrlgc.gbectd.kw", "strategy"=>"", "ttl"=>896308971, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"116.206.219.55", "is_enable"=>"no", "name"=>"jennoiyhhu.dkaop.eywcibrfo", "strategy"=>"", "ttl"=>84383283, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"172.89.247.216", "is_enable"=>"yes", "name"=>"jjnoj.jcl.fdmqctuuo", "strategy"=>"", "ttl"=>516558330, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"199.169.152.130", "is_enable"=>"yes", "name"=>"qcfooceai.n.ltbprhhdf", "strategy"=>"", "ttl"=>1921652716, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"180.79.68.214", "is_enable"=>"no", "name"=>"scpchybj.ghxvd.kqxvuf", "strategy"=>"", "ttl"=>97787686, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"161.40.123.13", "is_enable"=>"no", "name"=>"wd.acasc.jkpqt", "strategy"=>"", "ttl"=>1522581548, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"235.120.24.3", "is_enable"=>"yes", "name"=>"uu.sya.smim", "strategy"=>"", "ttl"=>1890502047, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"56.249.159.108", "is_enable"=>"no", "name"=>"ivviqfgd.nlbd.wc", "strategy"=>"", "ttl"=>1688511019, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"34.17.174.125", "is_enable"=>"yes", "name"=>"hgm.eqmvuiijs.om", "strategy"=>"", "ttl"=>122086497, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"100.42.43.167", "is_enable"=>"no", "name"=>"xxbdkt.youfbgp.hnxosyptem", "strategy"=>"", "ttl"=>2061307578, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:99:in `block in test_del'
      96:         expect_success_res = {"result" => "succeed"}
      97: 
      98:         add_rrs().each{|res|
  =>  99:             ids << res["ret"]["id"]
     100:         }
     101:         del_params_info = [{"name" => "ids", "type" => "string_array",
     102:                             "max_len" => 10, "max_cnt" => nil},
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `test_del'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"25.245.164.107", "is_enable"=>"yes", "name"=>"noyihm.cwkkjjdf.wcgmcwldy", "strategy"=>"", "ttl"=>656025124, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"168.227.117.36", "is_enable"=>"no", "name"=>"rogwojnk.jypdjv.onpyya", "strategy"=>"", "ttl"=>720547218, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"249.215.143.83", "is_enable"=>"yes", "name"=>"gtjcvexmms.luoaq.k", "strategy"=>"", "ttl"=>1064752596, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"246.31.225.47", "is_enable"=>"no", "name"=>"g.b.uorf", "strategy"=>"", "ttl"=>400488524, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"159.155.182.160", "is_enable"=>"no", "name"=>"bxps.fnpsb.tsqq", "strategy"=>"", "ttl"=>296338769, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"224.245.35.109", "is_enable"=>"yes", "name"=>"gxveek.xcpdilc.pgwkco", "strategy"=>"", "ttl"=>37724937, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"156.245.219.217", "is_enable"=>"yes", "name"=>"ajfae.xilk.xvrpuxxo", "strategy"=>"", "ttl"=>1024585267, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"234.213.139.95", "is_enable"=>"no", "name"=>"ecxcwq.ysywnudrg.duwtjqi", "strategy"=>"", "ttl"=>426742974, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"198.220.254.193", "is_enable"=>"no", "name"=>"egtdwhsmy.fbyujfoaw.uoqxks", "strategy"=>"", "ttl"=>1515041027, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"135.66.112.153", "is_enable"=>"no", "name"=>"wty.yrkpqy.uqnmxhbsm", "strategy"=>"", "ttl"=>518717658, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:175:in `block in test_get'
     172:         all_rrs = []
     173: 
     174:         add_rrs().each{|res|
  => 175:             all_rrs << res["ret"]
     176:             ids << res["ret"]["id"]
     177:         }
     178: 
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `test_get'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : type
check type  : The value is out of range
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"ip"=>"186.65.203.50", "is_enable"=>"no", "name"=>"vle.fuvfsjlnvr.dsnj", "strategy"=>"", "ttl"=>1460592100, "type"=>"kbqmnt", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"ip"=>"153.64.226.100", "is_enable"=>"no", "name"=>"xyh.k.gxegu", "strategy"=>"", "ttl"=>303907404, "type"=>"nodata", "view"=>"kkvmylvgo", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"160.227.79.84", "is_enable"=>"yes", "name"=>"ormgcyu.erkdigdi.eqcc", "strategy"=>"", "ttl"=>1261495947, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:81:in `block in test_post'
     78:         tester.test_all_valid_params(200, nil){|params, res|
     79: 
     80:             #if added successfully,store the id,we'll delete it when finished the test.
  => 81:             ids << res["ret"]["id"] if 200 == res["code"]
     82:             choise_params_by_policy_type(params)
     83:             if !tester.compare_json_include(params, res["ret"])
     84:                 assert_equal(params, res["ret"])
/root/zddiv3/tests/dns/common_data_type.rb:281:in `block in test_all_valid_params'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `each'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `test_all_valid_params'
/root/zddiv3/tests/dns/local-policiey_test.rb:78:in `test_post'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"115.211.21.49", "is_enable"=>"yes", "name"=>"mywgvvjp.vuopudhni.tbbols", "strategy"=>"", "ttl"=>605349855, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"184.110.216.190", "is_enable"=>"yes", "name"=>"wcrglvmma.ediqkephlb.fxdqaubjk", "strategy"=>"", "ttl"=>1811962472, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"82.222.145.135", "is_enable"=>"yes", "name"=>"bbtmtpd.hoxpdjqlv.l", "strategy"=>"", "ttl"=>666947805, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"242.0.191.19", "is_enable"=>"no", "name"=>"pgabxuoio.wq.uyy", "strategy"=>"", "ttl"=>1968142731, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"65.62.239.184", "is_enable"=>"yes", "name"=>"yekqs.u.x", "strategy"=>"", "ttl"=>63683681, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"22.116.126.8", "is_enable"=>"no", "name"=>"puwvucjwf.ftjtlyulj.uwyy", "strategy"=>"", "ttl"=>1210197242, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"204.62.28.89", "is_enable"=>"no", "name"=>"sgl.pkf.grgoionlpe", "strategy"=>"", "ttl"=>904516299, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"183.105.10.64", "is_enable"=>"no", "name"=>"lkducqf.aywi.drmo", "strategy"=>"", "ttl"=>1309035345, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"93.205.176.194", "is_enable"=>"yes", "name"=>"ofu.gsxmjlsg.kitpphng", "strategy"=>"", "ttl"=>1703617266, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"243.163.121.238", "is_enable"=>"yes", "name"=>"jjnxkv.icg.vm", "strategy"=>"", "ttl"=>926821120, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:129:in `block in test_put'
     126:     def test_put
     127:         ids = []
     128:         add_rrs().each{|res|
  => 129:             ids << res["ret"]["id"]
     130:         }
     131: 
     132:         put_paras_info = [{"name" => "ids", "type" => "string_array", "max_cnt" => 1},
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `test_put'
===============================================================================
E
===============================================================================
Error: test_class_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:26:in `test_class_set_ipam_config'
     23:     end
     24: 
     25:     def test_class_set_ipam_config
  => 26:         insert_config_data
     27:         DDI::IPAM::NetworkConfigManager.set_ipam_config(IMAP_CONFIG)
     28:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     29:     end
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:40:in `test_create_table'
     37:     end
     38: 
     39:     def test_create_table
  => 40:         @db.run('drop table ' + TABLE_NAME.to_s)
     41:         @config_manager.send :_create_table
     42:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     43:         assert_equal(1, @table.count)
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:20:in `test_set_ipam_config'
     17:     end
     18: 
     19:     def test_set_ipam_config
  => 20:         insert_config_data
     21:         @config_manager.set_ipam_config(IMAP_CONFIG)
     22:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     23:     end
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
.....E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:34:in `test_add_obj_comment'
     31: 
     32:     def test_add_obj_comment
     33:         @obj_comment_manager.add_obj_comment(*TEST_FIELDS.values)
  => 34:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     35:     end
     36: 
     37:     def test_del_obj_comment
===============================================================================
E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:17:in `test_create_obj_comment'
     14: 
     15:     def test_create_obj_comment
     16:         @obj_comment_manager.create_obj_comment(*TEST_FIELDS.values)
  => 17:         assert_equal(TEST_FIELDS[:r_type], @table.first[:r_type])
     18: 
     19:         replaced_feilds = TEST_FIELDS.merge(comment: "new_comment")
     20:         @obj_comment_manager.create_obj_comment(*replaced_feilds.values)
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:91:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:144:in `block in execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:141:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:54:in `test_create_table'
     51:     end
     52: 
     53:     def test_create_table
  => 54:         @db.run('drop table objcomment')
     55:         @obj_comment_manager.send :_create_table
     56:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     57:     end
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:38:in `test_del_obj_comment'
     35:     end
     36: 
     37:     def test_del_obj_comment
  => 38:         insert_comment_data
     39:         @obj_comment_manager.del_obj_comment(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     40:         assert_equal(0, @table.count)
     41:     end
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:44:in `test_get_comment_for_obj'
     41:     end
     42: 
     43:     def test_get_comment_for_obj
  => 44:         insert_comment_data
     45:         comment = @obj_comment_manager.get_comment_for_obj(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     46:         assert_equal(TEST_FIELDS[:comment], comment)
     47:     end
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:11:in `test_get_obj_comments'
      8:     TEST_FIELDS = {:identity => 'grid', :r_type => 'is_a_type', :comment => 'is_a_comment'}
      9: 
     10:     def test_get_obj_comments
  => 11:         insert_comment_data
     12:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     13:     end
     14: 
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:25:in `test_update_obj_identity'
     22:     end
     23: 
     24:     def test_update_obj_identity
  => 25:         insert_comment_data
     26:         replaced_feilds = TEST_FIELDS.merge(identity: "new_comment")
     27:         @obj_comment_manager.update_obj_identity(TEST_FIELDS[:identity], TEST_FIELDS[:type], "new_identity")
     28:         assert_equal("new_identity", @table.first[:identity])
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
............................................................N
===============================================================================
TestACL#test_create_acl was redefined [test_create_acl(TestACL)]
/root/zddiv3/tests/dns/acl_test.rb:4:in `<class:TestACL>'
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestACL)
/root/zddiv3/tests/dns/acl_test.rb:7:in `test_create_acl'
      4:     def test_create_acl
      5:         acl_data = {"ids" => ["aaa", "bbb", "ccc"]}
      6:         code, response = send_cmd("delete", "acls", acl_data)
  =>  7:         assert_equal(200, code)
      8: 
      9:         #acl_data = {"comment"=>"", "name"=>"acl1", "networks"=>["1.2.3.4", "2.2.2.0/24"], "current_user"=>"admin"}
     10:         #code, response = send_cmd("post", "acls", acl_data)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.Connection refused - connect(2) for "127.0.0.1" port 4571
F
===============================================================================
Failure:
test_get_alarm_thresholds(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:46:in `test_get_alarm_thresholds'
     43: 
     44:     def test_get_alarm_thresholds
     45:         code, response = send_cmd("get", "/alarm_thresholds", {}, ALARM_PORT)
  => 46:         assert_equal(200, code)
     47: 
     48:         db_path = DDI::ALARM_DB_FP
     49:         unless File.exist?(db_path)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_mail_alarm_config(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:29:in `test_mail_alarm_config'
     26:         } 
     27: 
     28:         code, response = send_cmd("put", "/config/email_alarm", conf_data)
  => 29:         assert_equal(421, code)
     30:         assert_equal(REQUIRE_PARAMS, response["error"])
     31: 
     32:         conf_data.merge!({"emerg_level_frequency":"6"})
<421> expected but was
<nil>

diff:
? 421
? nil
===============================================================================
[test_put_audit_networks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.6.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:18:in `test_put_audit_networks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_ips__timerange]
    PATH: /audit/ips/1622217600000-1622304000000
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_audit_ips__timerange(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:61:in `test_get_audit_ips__timerange'
     58:         puts req.to_s
     59:         code, response = send_cmd(req.method, req.path, req.params)
     60:         puts "RESPONSE: #{response}", "\n"
  => 61:         assert_equal(200, code)
     62:         assert_equal(response.class, Hash)
     63:         assert_include(response.keys, "resources")
     64:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_networks]
    PATH: /audit/networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:76:in `test_get_audit_networks'
     73:         puts req.to_s
     74:         code, response = send_cmd(req.method, req.path, req.params)
     75:         puts "RESPONSE: #{response}"
  => 76:         assert_equal(200, code)
     77:         assert_equal(response.class, Hash)
     78:         puts "--delete pool"
     79:         req.method = "delete"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authusers]
--create one
    PATH: /auth-users
  METHOD: post
  PARAMS: {"comment"=>"", "username"=>"test_user", "passwd"=>"Abc123", "rep_passwd"=>"Abc123", "name"=>"test", "mailbox"=>"x@125.com", "phone"=>"11111111111", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:18:in `test_post_authusers'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "id")
     21:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authusers]
    PATH: /auth-users
  METHOD: put
  PARAMS: {"name"=>"test222", "mailbox"=>"x@125.com", "phone"=>"11111111111", "ids"=>["test_user"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:49:in `test_put_authusers'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers]
    PATH: /auth-users
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:66:in `test_get_authusers'
     63:         puts req.to_s
     64:         code, response = send_cmd(req.method, req.path, req.params)
     65:         puts "RESPONSE: #{response}", "\n"
  => 66:         assert_equal(200, code)
     67:         assert_equal(response.class, Hash)
     68:         assert_include(response.keys, "resources")
     69:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers__auth_user]
    PATH: /auth-users/test_user
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers__auth_user(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:89:in `test_get_authusers__auth_user'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "id")
     92:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authusers]
    PATH: /auth-users
  METHOD: delete
  PARAMS: {"ids"=>["test_user", "user1", "user2", "user3"], "link_mac"=>true, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:105:in `test_delete_authusers'
     102:         puts req.to_s
     103:         code, response = send_cmd(req.method, req.path, req.params)
     104:         puts "RESPONSE: #{response}", "\n"
  => 105:         assert_equal(200, code)
     106:         assert_equal(response.class, Hash)
     107:         assert_include(response.keys, "result")
     108:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_auth_zone_tree_display(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:12:in `test_auth_zone_tree_display'
      9:         zone5 = {"zone_type"=>"auth", "name"=>"bb.slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10: 
     11:         code, response = send_cmd("post", "/views/default/zones", zone1);
  => 12:         assert_equal(code, 200)
     13:         code, response = send_cmd("post", "/views/default/zones", zone2);
     14:         assert_equal(code, 200)
     15:         code, response = send_cmd("post", "/views/default/zones", zone3);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

Test User Zone Display Style:
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_save_user_zone_display_style(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:87:in `test_save_user_zone_display_style'
     84:     def test_save_user_zone_display_style
     85:         print "\nTest User Zone Display Style:\n"
     86:         code, response = send_cmd("get", "/users/admin/zone_display_style", {"current_user" => "admin"})
  => 87:         assert_equal(code, 200)
     88:         print "\tGet zone_display_style:",response,"\n"
     89: 
     90:         code, response = send_cmd("put", "/users/admin/zone_display_style", {"zone_display_style" => "tree", "current_user" => "admin"})
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clean_resources(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:106:in `test_clean_resources'
     103:     def test_clean_resources
     104:         del_zones = {"ids"=>["@", "aa.slave", "bb.slave", "master", "slave"], "current_user"=>"admin"}
     105:         code, response = send_cmd("delete", "/views/default/zones", del_zones);
  => 106:         assert_equal(code, 200)
     107: 
     108:         del_user = {"ids"=>["grd"], "current_user"=>"admin"}
     109:         code, response = send_cmd("delete", "/users", del_user);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"s1", "type"=>"radius", "overtime"=>"5", "retry"=>"5", "style"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:17:in `test_post_authenticatepolicy'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: put
  PARAMS: {"overtime"=>"5", "retry"=>"10", "style"=>"1", "ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:33:in `test_put_authenticatepolicy'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:52:in `test_get_authenticatepolicy'
     49:         puts req.to_s
     50:         code, response = send_cmd(req.method, req.path, req.params)
     51:         puts "RESPONSE: #{response}", "\n"
  => 52:         assert_equal(200, code)
     53:         assert_equal(response.class, Hash)
     54:         assert_include(response.keys, "resources")
     55:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__id]
    PATH: /authenticate-policy/s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:74:in `test_get_authenticatepolicy__id'
     71:         puts req.to_s
     72:         code, response = send_cmd(req.method, req.path, req.params)
     73:         puts "RESPONSE: #{response}", "\n"
  => 74:         assert_equal(200, code)
     75:         assert_equal(response.class, Hash)
     76:         assert_include(response.keys, "id")
     77:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: post
  PARAMS: {"comment"=>"", "ip_addr"=>"1.1.1.1", "radius_port"=>"1812", "protocol"=>"PAP", "public_key"=>"1234567890", "public_key_2"=>"1234567890", "enable"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:91:in `test_post_authenticatepolicy__policyid_authenticates'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "id")
     94:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: put
  PARAMS: {"radius_port"=>"1812", "protocol"=>"CHAP", "public_key"=>"123456", "public_key_2"=>"123456", "enable"=>"no", "ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:108:in `test_put_authenticatepolicy__policyid_authenticates'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Array)
     110:         assert_equal(response.length, 1)
     111:         assert_include(response[0].keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:127:in `test_get_authenticatepolicy__policyid_authenticates'
     124:         puts req.to_s
     125:         code, response = send_cmd(req.method, req.path, req.params)
     126:         puts "RESPONSE: #{response}", "\n"
  => 127:         assert_equal(200, code)
     128:         assert_equal(response.class, Hash)
     129:         assert_include(response.keys, "resources")
     130:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates__id]
    PATH: /authenticate-policy/s1/authenticates/1.1.1.1$s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:150:in `test_get_authenticatepolicy__policyid_authenticates__id'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}", "\n"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "id")
     153:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy__policy_id_authenticates]
    PATH: /authenticate-policy/:policy_id/authenticates
  METHOD: delete
  PARAMS: {"ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy__policy_id_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:168:in `test_delete_authenticatepolicy__policy_id_authenticates'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "result")
     171:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: delete
  PARAMS: {"ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:184:in `test_delete_authenticatepolicy'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "result")
     187:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_post_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"acl1", "exp"=>[{"name"=>"vendor-class-identifier;60;string", "match"=>"equals", "value"=>"opt60-test"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:17:in `test_post_dhcpoptionacls'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: put
  PARAMS: {"exp"=>[{"name"=>"dhcp-parameter-request-list;55;array of unsigned integer 8", "match"=>"exists"}], "ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:33:in `test_put_dhcpoptionacls'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:56:in `test_get_dhcpoptionacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}", "\n"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Hash)
     58:         assert_include(response.keys, "resources")
     59:         assert_equal(response["resources"].length, 1)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls__name]
    PATH: /dhcp-option-acls/acl1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls__name(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:75:in `test_get_dhcpoptionacls__name'
     72:         puts req.to_s
     73:         code, response = send_cmd(req.method, req.path, req.params)
     74:         puts "RESPONSE: #{response}", "\n"
  => 75:         assert_equal(200, code)
     76:         assert_equal(response.class, Hash)
     77:         assert_include(response.keys, "id")
     78:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls__name_comment]
    PATH: /dhcp-option-acls/acl1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls__name_comment(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:92:in `test_put_dhcpoptionacls__name_comment'
     89:         puts req.to_s
     90:         code, response = send_cmd(req.method, req.path, req.params)
     91:         puts "RESPONSE: #{response}", "\n"
  => 92:         assert_equal(200, code)
     93:         assert_equal(response.class, Hash)
     94:         assert_include(response.keys, "id")
     95:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: delete
  PARAMS: {"ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:110:in `test_delete_dhcpoptionacls'
     107:         puts req.to_s
     108:         code, response = send_cmd(req.method, req.path, req.params)
     109:         puts "RESPONSE: #{response}", "\n"
  => 110:         assert_equal(200, code)
     111:         assert_equal(response.class, Hash)
     112:         assert_include(response.keys, "result")
     113:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"test", "protocol"=>"IPv4", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:17:in `test_post_dhcpoptionspaces'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], req.params["protocol"] + "$" + req.params["name"])
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:49:in `test_get_dhcpoptionspaces'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Hash)
     51:         assert_include(response.keys, "resources")
     52:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid]
    PATH: /dhcp-option-spaces/IPv4$test
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:70:in `test_get_dhcpoptionspaces__spaceid'
     67:         puts req.to_s
     68:         code, response = send_cmd(req.method, req.path, req.params)
     69:         puts "RESPONSE: #{response}", "\n"
  => 70:         assert_equal(200, code)
     71:         assert_equal(response.class, Hash)
     72:         assert_include(response.keys, "id")
     73:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_comment]
    PATH: /dhcp-option-spaces/IPv4$test/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_comment(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:87:in `test_put_dhcpoptionspaces__spaceid_comment'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "id")
     90:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"o1", "code"=>"55", "type"=>"ip-address", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:106:in `test_post_dhcpoptionspaces__spaceid_options'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: put
  PARAMS: {"code"=>"100", "type"=>"string", "ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:123:in `test_put_dhcpoptionspaces__spaceid_options'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Array)
     125:         assert_equal(response.length, 1)
     126:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:143:in `test_get_dhcpoptionspaces__spaceid_options'
     140:         puts req.to_s
     141:         code, response = send_cmd(req.method, req.path, req.params)
     142:         puts "RESPONSE: #{response}", "\n"
  => 143:         assert_equal(200, code)
     144:         assert_equal(response.class, Hash)
     145:         assert_include(response.keys, "resources")
     146:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options__optionid]
    PATH: /dhcp-option-spaces/IPv4$test/options/test$o1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options__optionid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:163:in `test_get_dhcpoptionspaces__spaceid_options__optionid'
     160:         puts req.to_s
     161:         code, response = send_cmd(req.method, req.path, req.params)
     162:         puts "RESPONSE: #{response}", "\n"
  => 163:         assert_equal(200, code)
     164:         assert_equal(response.class, Hash)
     165:         assert_include(response.keys, "id")
     166:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: delete
  PARAMS: {"ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:180:in `test_delete_dhcpoptionspaces__spaceid_options'
     177:         puts req.to_s
     178:         code, response = send_cmd(req.method, req.path, req.params)
     179:         puts "RESPONSE: #{response}", "\n"
  => 180:         assert_equal(200, code)
     181:         assert_equal(response.class, Hash)
     182:         assert_include(response.keys, "result")
     183:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: delete
  PARAMS: {"ids"=>["IPv4$test"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:196:in `test_delete_dhcpoptionspaces'
     193:         puts req.to_s
     194:         code, response = send_cmd(req.method, req.path, req.params)
     195:         puts "RESPONSE: #{response}", "\n"
  => 196:         assert_equal(200, code)
     197:         assert_equal(response.class, Hash)
     198:         assert_include(response.keys, "result")
     199:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_multidhcpresources]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.7.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_multidhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:22:in `test_post_multidhcpresources'
     19:         puts req.to_s
     20:         code, response = send_cmd(req.method, req.path, req.params)
     21:         puts "RESPONSE: #{response}"
  => 22:         assert_equal(200, code)
     23:         assert_equal(response.class, Hash)
     24:         puts "--create template"
     25:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_dhcpresources]
--create pool one
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: post
  PARAMS: {"comment"=>"", "type"=>"dynamic", "ip_start"=>"3.0.7.1", "ip_end"=>"3.0.7.2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:68:in `test_post_networks__network_dhcpresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: put
  PARAMS: {"default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"1000", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "type"=>"dynamic", "max_value"=>"86400", "min_value"=>"1000", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["3.0.7.1-3.0.7.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:99:in `test_put_networks__network_dhcpresources'
      96:         puts req.to_s
      97:         code, response = send_cmd(req.method, req.path, req.params)
      98:         puts "RESPONSE: #{response}", "\n"
  =>  99:         assert_equal(200, code)
     100:         assert_equal(response.class, Array)
     101:         assert_equal(response.length, 1)
     102:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:119:in `test_get_networks__network_dhcpresources__resourceid'
     116:         puts req.to_s
     117:         code, response = send_cmd(req.method, req.path, req.params)
     118:         puts "RESPONSE: #{response}", "\n"
  => 119:         assert_equal(200, code)
     120:         assert_equal(response.class, Hash)
     121:         assert_include(response.keys, "id")
     122:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:135:in `test_get_networks__network_dhcpresources'
     132:         puts req.to_s
     133:         code, response = send_cmd(req.method, req.path, req.params)
     134:         puts "RESPONSE: #{response}", "\n"
  => 135:         assert_equal(200, code)
     136:         assert_equal(response.class, Hash)
     137:         assert_include(response.keys, "resources")
     138:         assert_equal(response["resources"].length, 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:157:in `test_put_networks__network_dhcpresources__resourceid_ddnsconfig'
     154:         puts req.to_s
     155:         code, response = send_cmd(req.method, req.path, req.params)
     156:         puts "RESPONSE: #{response}", "\n"
  => 157:         assert_equal(200, code)
     158:         assert_equal(response.class, Hash)
     159:         assert_include(response.keys, "ddns_domainname")
     160:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:173:in `test_get_networks__network_dhcpresources__resourceid_ddnsconfig'
     170:         puts req.to_s
     171:         code, response = send_cmd(req.method, req.path, req.params)
     172:         puts "RESPONSE: #{response}", "\n"
  => 173:         assert_equal(200, code)
     174:         assert_equal(response.class, Hash)
     175:         assert_include(response.keys, "ddns_domainname")
     176:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_dhcpresources]
--delete pool
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: delete
  PARAMS: {"ids"=>["3.0.7.1-3.0.7.2", "3.0.7.11-3.0.7.12", "3.0.7.13-3.0.7.14", "3.0.7.3-3.0.7.4"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:261:in `test_delete_networks__network_dhcpresources'
     258:         puts req.to_s
     259:         code, response = send_cmd(req.method, req.path, req.params)
     260:         puts "RESPONSE: #{response}"
  => 261:         assert_equal(200, code)
     262:         assert_equal(response.class, Hash)
     263:         assert_include(response.keys, "result")
     264:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"t", "type"=>"ipv4-dynamic", "offset"=>"1", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:17:in `test_post_dhcptemplates'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: put
  PARAMS: {"offset"=>"3", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:33:in `test_put_dhcptemplates'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name]
    PATH: /dhcp-templates/t
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:53:in `test_get_dhcptemplates__name'
     50:         puts req.to_s
     51:         code, response = send_cmd(req.method, req.path, req.params)
     52:         puts "RESPONSE: #{response}", "\n"
  => 53:         assert_equal(200, code)
     54:         assert_equal(response.class, Hash)
     55:         assert_include(response.keys, "id")
     56:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:68:in `test_get_dhcptemplates'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "resources")
     71:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:91:in `test_get_dhcptemplates__name_ddnsconfig'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "enable_ddns")
     94:         assert_equal(response["enable_ddns"], "no")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:108:in `test_put_dhcptemplates__name_ddnsconfig'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "ddns_domainname")
     111:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_comment]
    PATH: /dhcp-templates/t/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_comment(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:125:in `test_put_dhcptemplates__name_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "comment")
     128:         assert_equal(response["comment"], "just for test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: delete
  PARAMS: {"ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:141:in `test_delete_dhcptemplates'
     138:         puts req.to_s
     139:         code, response = send_cmd(req.method, req.path, req.params)
     140:         puts "RESPONSE: #{response}", "\n"
  => 141:         assert_equal(200, code)
     142:         assert_equal(response.class, Hash)
     143:         assert_include(response.keys, "result")
     144:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls]
--fingerprint acl
    PATH: /dhcp-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fp_acl", "type"=>"fingerprint", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:18:in `test_post_dhcpacls'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_include(response["name"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls]
--modify
    PATH: /dhcp-acls
  METHOD: put
  PARAMS: {"comment"=>"", "ids"=>["option_acl", "fp_acl"], "type"=>"macs", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:56:in `test_put_dhcpacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Array)
     58:         assert_equal(response.length, 2)
     59:         response.each do |r| 
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls]
    PATH: /dhcp-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:90:in `test_get_dhcpacls'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl]
    PATH: /dhcp-acls/fp_acl
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:108:in `test_get_dhcpacls__acl'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls__acl_comment]
    PATH: /dhcp-acls/fp_acl/comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpacls__acl_comment(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:125:in `test_put_dhcpacls__acl_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "id")
     128:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: post
  PARAMS: {"macs_file"=>"", "resources"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:145:in `test_post_dhcpacls__acl_aclresources'
     142:         puts req.to_s
     143:         code, response = send_cmd(req.method, req.path, req.params)
     144:         puts "RESPONSE: #{response}"
  => 145:         assert_equal(200, code)
     146:         assert_equal(response.class, Array)
     147:         assert_equal(response.length, 2)
     148:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:206:in `test_get_dhcpacls__acl_aclresources'
     203:         puts req.to_s
     204:         code, response = send_cmd(req.method, req.path, req.params)
     205:         puts "RESPONSE: #{response}"
  => 206:         assert_equal(200, code)
     207:         assert_equal(response.class, Hash)
     208:         assert_include(response.keys, "resources")
     209:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources__resource]
    PATH: /dhcp-acls/mac_acl/acl-resources/00:22:22:22:22:22
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources__resource(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:256:in `test_get_dhcpacls__acl_aclresources__resource'
     253:         puts req.to_s
     254:         code, response = send_cmd(req.method, req.path, req.params)
     255:         puts "RESPONSE: #{response}", "\n"
  => 256:         assert_equal(200, code)
     257:         assert_equal(response.class, Array)
     258:         assert_equal(response.length, 1)
     259:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: delete
  PARAMS: {"ids"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:276:in `test_delete_dhcpacls__acl_aclresources'
     273:         puts req.to_s
     274:         code, response = send_cmd(req.method, req.path, req.params)
     275:         puts "RESPONSE: #{response}"
  => 276:         assert_equal(200, code)
     277:         assert_equal(response.class, Hash)
     278:         assert_include(response.keys, "result")
     279:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls]
    PATH: /dhcp-acls
  METHOD: delete
  PARAMS: {"ids"=>["fp_acl", "mac_acl", "option_acl"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:311:in `test_delete_dhcpacls'
     308:         puts req.to_s
     309:         code, response = send_cmd(req.method, req.path, req.params)
     310:         puts "RESPONSE: #{response}", "\n"
  => 311:         assert_equal(200, code)
     312:         assert_equal(response.class, Hash)
     313:         assert_include(response.keys, "result")
     314:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:8:in `_test_put_base_safe'
(eval):1:in `test_put_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
Base_Safes: 
F
===============================================================================
Failure:
test_get_nodes_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:27:in `_test_get_nodes_base_safe'
(eval):1:in `test_get_nodes_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_servfail]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_servfail(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:37:in `_test_put_servfail'
(eval):1:in `test_put_servfail'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_high_performance]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_high_performance(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:49:in `_test_put_high_performance'
(eval):1:in `test_put_high_performance'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_concurrent_recursion_count]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_concurrent_recursion_count(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:57:in `_test_put_concurrent_recursion_count'
(eval):1:in `test_put_concurrent_recursion_count'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_security]
Connection refused - connect(2) for "127.0.0.1" port 20120
Recurity servfail: 
F
===============================================================================
Failure:
test_get_nodes_security(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:74:in `block in _test_get_nodes_security'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `each'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `_test_get_nodes_security'
(eval):1:in `test_get_nodes_security'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_nodes_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_nodes_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:82:in `_test_nodes_cache_clean'
(eval):1:in `test_nodes_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:89:in `_test_node_cache_clean'
(eval):1:in `test_node_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_search]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_search(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:96:in `_test_node_cache_search'
(eval):1:in `test_node_cache_search'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_cache_config]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_cache_config(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:103:in `_test_put_cache_config'
(eval):1:in `test_put_cache_config'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"444444", "vendor_class_identifier"=>"555555", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:18:in `test_post_dhcpfingerprints'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_equal(response["name"], "fingerprint_test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: put
  PARAMS: {"type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:36:in `test_put_dhcpfingerprints'
     33:         puts req.to_s
     34:         code, response = send_cmd(req.method, req.path, req.params)
     35:         puts "RESPONSE: #{response}", "\n"
  => 36:         assert_equal(200, code)
     37:         assert_equal(response.class, Array)
     38:         assert_equal(response.length, 1)
     39:         assert_include(response[0].keys, "name")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_dhcpfingerprints(TestFingerprints)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/ipam/fingerprints_test.rb:53:in `test_get_dhcpfingerprints'
     50:         req.params.merge!({"current_user"=>"admin"})
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
  => 53:         puts "RESPONSE: Response too large. Total number of fingerprints is #{response["resources"].length.to_s}", "\n"
     54:         assert_equal(200, code)
     55:         assert_equal(response.class, Hash)
     56:         assert_include(response.keys, "resources")
===============================================================================
[test_get_dhcpfingerprints__id]
    PATH: /dhcp-fingerprints/
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints__id(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:69:in `test_get_dhcpfingerprints__id'
     66:         puts req.to_s
     67:         code, response = send_cmd(req.method, req.path, req.params)
     68:         puts "RESPONSE: #{response}", "\n"
  => 69:         assert_equal(200, code)
     70:         assert_equal(response.class, Hash)
     71:         assert_include(response.keys, "id")
     72:         assert_equal(response["id"],  @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprinttype]
    PATH: /dhcp-fingerprint-type
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprinttype(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:84:in `test_get_dhcpfingerprinttype'
     81:         puts req.to_s
     82:         code, response = send_cmd(req.method, req.path, req.params)
     83:         puts "RESPONSE: #{response}", "\n"
  => 84:         assert_equal(200, code)
     85:         assert_equal(response.class, Array)
     86:         response.each do |r|
     87:             assert_include(["Others", "Switch", "Apple", "Router", "Printer", "Linux", "Android", "Windows", "AP"], r)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints__id_comment]
    PATH: /dhcp-fingerprints//comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "id"=>nil, "write_access"=>1, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints__id_comment(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:102:in `test_put_dhcpfingerprints__id_comment'
      99:         puts req.to_s
     100:         code, response = send_cmd(req.method, req.path, req.params)
     101:         puts "RESPONSE: #{response}", "\n"
  => 102:         assert_equal(200, code)
     103:         assert_equal(response.class, Hash)
     104:         assert_include(response.keys, "id")
     105:         assert_equal(response["id"], @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints_update]
    PATH: /dhcp-fingerprints/update
  METHOD: post
  PARAMS: {"file_content"=>"MjAxNi0wOS0yMixrbmV0LXpkbnMKQW5kcm9pZCxHYWxheHkgUzJYLCIxLDMz\nLDMsNiwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0zLjAuMTUt\nMTE0OTcyOTphcm12N2w6U01ESzQyMTAKQW5kcm9pZCxHYWxheHkgUzNZLCIx\nLDMzLDMsNiwxNSwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0z\nLjAuOC0xMTMxNDgzOmFybXY3bDpTQU1TVU5HIE0yX1ZaVw==\n", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints_update(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:122:in `test_post_dhcpfingerprints_update'
     119:         puts req.to_s
     120:         code, response = send_cmd(req.method, req.path, req.params)
     121:         puts "RESPONSE: #{response}", "\n"
  => 122:         assert_equal(200, code)
     123:         assert_equal(response.class, Hash)
     124:         assert_include(response.keys, "result")
     125:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints_update_version]
    PATH: /dhcp-fingerprints/update/version
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints_update_version(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:137:in `test_get_dhcpfingerprints_update_version'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "version")
     140:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: delete
  PARAMS: {"ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:152:in `test_delete_dhcpfingerprints'
     149:         puts req.to_s
     150:         code, response = send_cmd(req.method, req.path, req.params)
     151:         puts "RESPONSE: #{response}", "\n"
  => 152:         assert_equal(200, code)
     153:         assert_equal(response.class, Hash)
     154:         assert_include(response.keys, "result")
     155:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:8:in `_test_create_forward_zone'
(eval):1:in `test_create_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:24:in `_test_batch_add_forward_zone'
(eval):1:in `test_batch_add_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:39:in `_test_update_forward_zone'
(eval):1:in `test_update_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone_owners(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:47:in `_test_update_forward_zone_owners'
(eval):1:in `test_update_forward_zone_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_forward_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_forward_zone_comment(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:63:in `_test_put_forward_zone_comment'
(eval):1:in `test_put_forward_zone_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:71:in `_test_del_forward_zone'
(eval):1:in `test_del_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clear_offline_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:180:in `test_clear_offline_webcliuser'
     177: 
     178:     def test_clear_offline_webcliuser
     179:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => "127.0.0.1"})
  => 180:         assert_equal(200, code)
     181: 
     182:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => ""})
     183:         assert_equal(422, code)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_creat_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:195:in `block in test_creat_webcliuser'
     192:     def test_creat_webcliuser
     193:         (1..6).each do
     194:             code, response = send_cmd("post", "/webcli/open-webcli", {"host" => "127.0.0.1"})
  => 195:             assert_equal(200, code)
     196:             assert_equal(true, !response["username"].empty?)
     197:         end
     198: 
/root/zddiv3/tests/grid/grid_test.rb:193:in `each'
/root/zddiv3/tests/grid/grid_test.rb:193:in `test_creat_webcliuser'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.....sh: useradd: command not found
passwd: Unknown user name '_webcliGs7f3C'.
sh: useradd: command not found
passwd: Unknown user name '_webclieT5iM8'.
sh: useradd: command not found
passwd: Unknown user name '_webcli2fQ0Hq'.
F
===============================================================================
Failure:
test_create_username3(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:244:in `rescue in test_create_username3'
/root/zddiv3/tests/grid/grid_test.rb:242:in `test_create_username3'
     239:     end
     240: 
     241:     def test_create_username3
  => 242:         create_webcli_user
     243:     rescue Exception => e
     244:         assert_equal("create user success", "CREATE_WEBCLI_CONNECT_ERR")
     245:     end
<"create user success"> expected but was
<"CREATE_WEBCLI_CONNECT_ERR">

diff:
? create user success      
? CREATE_WEBCLI_CONNECT_ERR
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_is_incluster(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:220:in `test_is_incluster'
     217:         else
     218:             # attention for single node, node name:local.master
     219:             code, response = send_cmd("get", "/groups/local/members/master", {"current_user"=>"admin"})
  => 220:             assert_equal(200, code)
     221:             assert_equal("yes", response["is_in_cluster"])
     222:         end
     223:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_login(TestGrid)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/grid/grid_test.rb:22:in `test_login'
     19:     def test_login
     20:         # admin login
     21:         code, response = _login("admin", DDI::Crypt.rsa_encrypt("admin"))
  => 22:         assert_equal(2, response["fcm_cloud"])
     23:         assert_equal(2, response["cloud_core_toolbar"])
     24: 
     25:         # crate test, with fcm_cloud = 0 cloud_core_toolbar = 1
===============================================================================
mv: cannot stat `/etc/issue_tmp': No such file or directory
E
===============================================================================
Error: test_system_loop(TestGrid)
: Errno::ENOENT: No such file or directory - ntpdate
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in ``'
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in `test_system_loop'
     19:     rescue Exception => e
     20:         puts "#{e},\n#{$@[0..20]}"
     21:     ensure
  => 22:         `ntpdate ntp1.aliyun.com`
     23:     end
     24: end
===============================================================================
..........
[_test_add_ip_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_ip_rrl(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:8:in `_test_add_ip_rrl'
(eval):1:in `test_add_ip_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:21:in `_test_update_ip_rrls'
(eval):1:in `test_update_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls_owners(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:38:in `_test_update_ip_rrls_owners'
(eval):1:in `test_update_ip_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_ip_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_ip_rrl_comment(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:55:in `_test_set_ip_rrl_comment'
(eval):1:in `test_set_ip_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
IP-rrls: 
F
===============================================================================
Failure:
test_get_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:48:in `_test_get_ip_rrls'
(eval):1:in `test_get_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:64:in `_test_del_ip_rrls'
(eval):1:in `test_del_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_put_ipamconfig]
    PATH: /ipam-config
  METHOD: put
  PARAMS: {"comment"=>"", "zombie_time"=>"110", "enable_port_alarm"=>"yes", "enable_conflict_check"=>"yes", "enable_unmanaged_check"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:17:in `test_put_ipamconfig'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert(response.has_key?("zombie_time") && response["zombie_time"].eql?("110"))
     20:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamconfig]
    PATH: /ipam-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:31:in `test_get_ipamconfig'
     28:         puts req.to_s
     29:         code, response = send_cmd(req.method, req.path, req.params)
     30:         puts "RESPONSE: #{response}", "\n"
  => 31:         assert_equal(200, code)
     32:         assert_equal(response.class, Hash)
     33:         assert response.keys.length.eql?(4)
     34:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamsearchresources]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr1", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:19:in `test_get_ipamsearchresources'
     16:         puts req.to_s
     17:         code, response = send_cmd(req.method, req.path, req.params)
     18:         puts "RESPONSE: #{response}"
  => 19:         assert_equal(200, code)
     20:         assert_equal(response.class, Array)
     21:         assert_equal(response.length, 1)
     22:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_ipamsearchresources]
    PATH: /ipam-search-resources
  METHOD: put
  PARAMS: {""=>"101", "_in"=>"no", "ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:68:in `test_put_ipamsearchresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Array)
     70:         assert_equal(response.length, 1)
     71:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_ipamsearchresources]
--delete search
    PATH: /ipam-search-resources
  METHOD: delete
  PARAMS: {"ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:87:in `test_delete_ipamsearchresources'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         puts "--delete user defined attribute"
     90:         req.method = "put"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
200
{"result"=>"service already inited"}
200
{"cpu_usage"=>"0.04", "memory_usage"=>"0.28", "disk_usage"=>"0.84", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-05-31 00:00:00", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.[test_post_macinformations]
    PATH: /mac-informations
  METHOD: post
  PARAMS: {"comment"=>"", "MAC"=>"00:01:01:01:01:01", "nic_port"=>["eth1", "eth2", "eth3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:18:in `test_post_macinformations'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "MAC")
     21:         assert_include(response["MAC"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_macinformations]
    PATH: /mac-informations
  METHOD: put
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "nic_port"=>["eth1", "eth0"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:34:in `test_put_macinformations'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert_equal(response.length, 1)
     37:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations]
    PATH: /mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:51:in `test_get_macinformations'
     48:         puts req.to_s
     49:         code, response = send_cmd(req.method, req.path, req.params)
     50:         puts "RESPONSE: #{response}", "\n"
  => 51:         assert_equal(200, code)
     52:         assert_equal(response.class, Hash)
     53:         assert_include(response.keys, "resources")
     54:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations__mac]
    PATH: /mac-informations/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations__mac(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:71:in `test_get_macinformations__mac'
     68:         puts req.to_s
     69:         code, response = send_cmd(req.method, req.path, req.params)
     70:         puts "RESPONSE: #{response}", "\n"
  => 71:         assert_equal(200, code)
     72:         assert_equal(response.class, Hash)
     73:         assert_include(response.keys, "id")
     74:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_macinformations]
    PATH: /mac-informations
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:87:in `test_delete_macinformations'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "result")
     90:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
E
===============================================================================
Error: test_all_customer_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:112:in `test_all_customer_menus'
     109:     end
     110: 
     111:     def test_all_customer_menus
  => 112:         m = _menu_manager.all_customer_menus
     113:         check_result("all_customer_menus", m){|m| !m.nil?}
     114:     end
     115: 
===============================================================================
E
===============================================================================
Error: test_all_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:107:in `test_all_menus'
     104:     end
     105: 
     106:     def test_all_menus
  => 107:         m = _menu_manager.all_menus
     108:         check_result("all_menus", m){|m| !m.nil?}
     109:     end
     110: 
===============================================================================
E
===============================================================================
Error: test_all_system_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:117:in `test_all_system_menus'
     114:     end
     115: 
     116:     def test_all_system_menus
  => 117:         m = _menu_manager.all_system_menus
     118:         check_result("all_system_menus", m){|m| !m.nil?}
     119:     end
     120: end
===============================================================================
Test analyse_items                            --> Success
.E
===============================================================================
Error: test_calc_start_end_time(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006f2c550>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:182:in `test_calc_start_end_time'
     179:     end
     180: 
     181:     def test_calc_start_end_time
  => 182:         result _report_task.calc_start_end_time(Time.now.to_i, Time.now.to_i)
     183:         check_result("calc_start_end_time", result){|result| !result.nil?}
     184:     end
     185: 
===============================================================================
E
===============================================================================
Error: test_calc_start_end_time2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006f2c4b0>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:233:in `test_calc_start_end_time2'
     230:     end
     231: 
     232:     def test_calc_start_end_time2
  => 233:         result = _task_schedul.calc_start_end_time(nil, nil)
     234:         check_result("calc_start_end_time", result){|result| !result.nil?}
     235:     end
     236: 
===============================================================================
E
===============================================================================
Error: test_delete_by_ids(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:102:in `test_delete_by_ids'
      99:     end
     100: 
     101:     def test_delete_by_ids
  => 102:         _item_manager.delete_by_ids(["1"])
     103:     end
     104: 
     105:     def test_delete_overtime_report
===============================================================================
.N
===============================================================================
TestMenu#test_delete_generate was redefined [test_delete_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:153:in `<class:TestMenu>'
===============================================================================
Test delete_generate                          --> Success
.E
===============================================================================
Error: test_delete_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:84:in `test_delete_menu'
     81: 
     82:     def test_delete_menu
     83:         params = {"lang" => "en", "ids" => [9]}
  => 84:         menus = _menu_manager.delete_menu(params)
     85:         check_result("delete_menu", menus){|menus| !menus.nil?}
     86:     end
     87: 
===============================================================================
Test delete_network_pool                      --> Success
..E
===============================================================================
Error: test_delete_report_list(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:776:in `delete_report_list'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:81:in `test_delete_report_list'
     78:     end
     79: 
     80:     def test_delete_report_list
  => 81:         result = _report_manager.delete_report_list(["1"])
     82:         check_result("delete_report_list", result){|result| !result.nil?}
     83:     end
     84: 
===============================================================================
Test deploy                                   --> Success
.Test fetch_conf-topn                          --> Success
Test fetch_conf-lease                         --> Success
.N
===============================================================================
TestMenu#test_fetch_generate was redefined [test_fetch_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:116:in `<class:TestMenu>'
===============================================================================
Test fetch_generate                           --> Success
.Test fetch_mail_config                        --> Success
.E
===============================================================================
Error: test_fetch_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:66:in `test_fetch_menu'
     63: 
     64:     def test_fetch_menu
     65:         params = {"lang" => "en"}
  => 66:         menus = _menu_manager.fetch_menu(params)
     67:         check_result("fetch_menu", menus){|menus| !menus.nil?}
     68:     end
     69: 
===============================================================================
Test update_network_pool                      --> Success
.Test fetch_report_list                        --> Success
.N
===============================================================================
TestMenu#test_generate_report_manual was redefined [test_generate_report_manual(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:158:in `<class:TestMenu>'
===============================================================================
Test generate_report_manual                   --> Success
.Test has_mail_config                          --> Success
.E
===============================================================================
Error: test_lookup_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:102:in `test_lookup_menu'
      99:     def test_lookup_menu
     100:         menu   = DDI::STATS::GridStatsMenu.new("cpu_like", "cpu_like", DDI::STATS::MENU_TYPE_SYSTEM)
     101: 
  => 102:         m = _menu_manager.lookup_menu(menu)
     103:         check_result("menu_deploy", m){|m| !m.nil?}
     104:     end
     105: 
===============================================================================
E
===============================================================================
Error: test_menu_deploy(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:95:in `test_menu_deploy'
     92:             {"id"=>"slave24", "ip"=>"10.1.108.24", "type"=>"ZDNS", "state"=>"warning", "is_master"=>false, "is_backup"=>false, "is_am"=>false }
     93:         ]}]
     94: 
  => 95:         deploy = _menu_manager.menu_deploy(menu, groups)
     96:         check_result("menu_deploy", deploy){|deploy| !deploy.nil?}
     97:     end
     98: 
===============================================================================
N
===============================================================================
TestMenu#test_modify_generate was redefined [test_modify_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:137:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_modify_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec3758>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:149:in `test_modify_generate'
     146:         available = "yes"
     147:         max_report = 5
     148: 
  => 149:         result = _scheduler_manager.modify_generate(["1"], name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     150:         check_result("modify_generate", result){|result| !result.nil?}
     151:     end
     152: 
===============================================================================
Test modify_mail_config                       --> Success
.Test name                                     --> Success
.Test name_equal                               --> Success
.N
===============================================================================
TestMenu#test_new_generate was redefined [test_new_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:121:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_new_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec3438>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:133:in `test_new_generate'
     130:         available = "yes"
     131:         max_report = 5
     132:         
  => 133:         result = _scheduler_manager.new_generate(name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     134:         check_result("new_generate", result){|result| !result.nil?}
     135:     end
     136: 
===============================================================================
E
===============================================================================
Error: test_new_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:72:in `test_new_menu'
     69: 
     70:     def test_new_menu
     71:         params = {"lang" => "en", "name" => "TMENU"}
  => 72:         menus = _menu_manager.new_menu(params)
     73:         check_result("new_menu", menus){|menus| !menus.nil?}
     74:     end
     75: 
===============================================================================
Test report_send_mail                         --> Success
.Test report_send_mail                         --> Success
.E
===============================================================================
Error: test_run1(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec3028>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:190:in `test_run1'
     187:         is_schedule = true
     188:         start_time = Time.now.to_i - 3600
     189:         end_time  = Time.now.to_i 
  => 190:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     191:     end
     192:     def test_run2
     193:         is_schedule = false
===============================================================================
E
===============================================================================
Error: test_run2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec2ee8>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:196:in `test_run2'
     193:         is_schedule = false
     194:         start_time = Time.now.to_i - 3600
     195:         end_time  = Time.now.to_i 
  => 196:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     197:     end
     198: 
     199:     def test_should_run?
===============================================================================
E
===============================================================================
Error: test_should_run2?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec2da8>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:228:in `test_should_run2?'
     225:     end
     226: 
     227:     def test_should_run2?
  => 228:         result = _task_schedul.should_run?
     229:         check_result("should_run?", result){|result| !result.nil?}
     230:     end
     231: 
===============================================================================
E
===============================================================================
Error: test_should_run?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec2c68>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:200:in `test_should_run?'
     197:     end
     198: 
     199:     def test_should_run?
  => 200:         result = _report_task.should_run?
     201:         check_result("should_run?", result){|result| !result.nil?}
     202:     end
     203: 
===============================================================================
E
===============================================================================
Error: test_test_mail_config(TestMenu)
: RuntimeError: 20002018010710
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:101:in `rescue in test_mail_config'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:96:in `test_mail_config'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:284:in `test_test_mail_config'
     281:         enable_verify = "yes"
     282:         from_address = "zhangxiao@zdns"
     283:         passwd = "123456"
  => 284:         result = _mail_manager.test_mail_config(server, port, account, enable_verify, from_address, passwd)
     285:         check_result("test_mail_config", result){|result| !result.nil?}
     286:     end
     287: 
===============================================================================
N
===============================================================================
TestMenu#test_to_hash was redefined [test_to_hash(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:204:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_to_hash(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000006ec2970>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:205:in `test_to_hash'
     202:     end
     203: 
     204:     def test_to_hash
  => 205:         result = _report_task.to_hash
     206:         check_result("to_hash", result){|result| !result.nil?}
     207:     end
     208: 
===============================================================================
E
===============================================================================
Error: test_update_conf(TestMenu)
: NoMethodError: undefined method `update_conf' for #<DDI::STATS::WasuUsageSetting:0x0000000222f7e8>
/root/zddiv3/tests/unit/am/network_pool_test.rb:82:in `test_update_conf'
     79:     end
     80: 
     81:     def test_update_conf
  => 82:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_USAGE_TOPN, [], 0)
     83:         check_result("update_conf-topn", result){|result| !result.nil?}
     84: 
     85:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_LEASES_USAGE, [], 30)
===============================================================================
E
===============================================================================
Error: test_update_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:78:in `test_update_menu'
     75: 
     76:     def test_update_menu
     77:         params = {"lang" => "en", "ids" => [8], "priority" => 2}
  => 78:         menus = _menu_manager.update_menu(params)
     79:         check_result("update_menu", menus){|menus| !menus.nil?}
     80:     end
     81: 
===============================================================================
Test update_network_pool                      --> Success
.
[_test_add_name_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_name_rrl(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:8:in `_test_add_name_rrl'
(eval):1:in `test_add_name_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:21:in `_test_update_name_rrls'
(eval):1:in `test_update_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls_owners(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:38:in `_test_update_name_rrls_owners'
(eval):1:in `test_update_name_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_name_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_name_rrl_comment(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:55:in `_test_set_name_rrl_comment'
(eval):1:in `test_set_name_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
Name-rrls: 
F
===============================================================================
Failure:
test_get_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:48:in `_test_get_name_rrls'
(eval):1:in `test_get_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:64:in `_test_del_name_rrls'
(eval):1:in `test_del_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_multinetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.1.0/28", "3.0.2.0/28", "3.0.3.0/28"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response valid resource.
F
===============================================================================
Failure:
test_post_multinetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:19:in `test_post_multinetworks'
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
     18:         puts "[warn] This interface does not response valid resource.\n"
  => 19:         assert_equal(200, code)
     20:     end
     21: 
     22:     def test_post_importnetworks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_importnetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"resource_content"=>[{"network"=>"1.0.0.0/24", "owners"=>["local.master"]}, {"network"=>"2.0.0.0/24", "owners"=>["local.master"]}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_post_importnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:33:in `test_post_importnetworks'
     30:         code, response = send_cmd(req.method, req.path, req.params)
     31:         puts "RESPONSE: #{response}"
     32:         puts "[warn] This interface does not response a valid resouce.\n"
  => 33:         assert_equal(200, code)
     34:     end
     35: 
     36:     def test_post_networks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks]
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.0.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:47:in `test_post_networks'
     44:         puts req.to_s
     45:         code, response = send_cmd(req.method, req.path, req.params)
     46:         puts "RESPONSE: #{response}", "\n"
  => 47:         assert_equal(200, code)
     48:         assert_equal(response.class, Hash)
     49:         assert_include(response.keys, "id")
     50:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr", "type"=>"text", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:64:in `test_put_networks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Array)
     66:         assert_equal(response.length, 1)
     67:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks]
    PATH: /networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:118:in `test_get_networks'
     115:         puts req.to_s
     116:         code, response = send_cmd(req.method, req.path, req.params)
     117:         puts "RESPONSE: #{response}", "\n"
  => 118:         assert_equal(200, code)
     119:         assert_equal(response.class, Hash)
     120:         assert_include(response.keys, "resources")
     121:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_leafnetworks]
    PATH: /leaf-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_leafnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:134:in `test_get_leafnetworks'
     131:         puts req.to_s
     132:         code, response = send_cmd(req.method, req.path, req.params)
     133:         puts "RESPONSE: #{response}", "\n"
  => 134:         assert_equal(200, code)
     135:         assert_equal(response.class, Hash)
     136:         assert_include(response.keys, "resources")
     137:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network]
    PATH: /networks/3.0.0.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:151:in `test_get_networks__network'
     148:         puts req.to_s
     149:         code, response = send_cmd(req.method, req.path, req.params)
     150:         puts "RESPONSE: #{response}", "\n"
  => 151:         assert_equal(200, code)
     152:         assert_equal(response.class, Hash)
     153:         assert_include(response.keys, "id")
     154:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "domain_name"=>"", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"43200", "def_value"=>"43200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"9000", "max_value"=>"86400", "max_unit"=>"1", "min_lease_time"=>"800", "min_value"=>"800", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:168:in `test_put_networks__network_dhcpconfig'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "max_lease_time")
     171:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:184:in `test_get_networks__network_dhcpconfig'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "max_lease_time")
     187:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: put
  PARAMS: {"hardware_ethernet"=>"00:11:12:12:12:31", "type"=>"manual", "nic_port"=>[""], "ids"=>["3.0.0.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:201:in `test_put_networks__network_addressinfos'
     198:         puts req.to_s
     199:         code, response = send_cmd(req.method, req.path, req.params)
     200:         puts "RESPONSE: #{response}", "\n"
  => 201:         assert_equal(200, code)
     202:         assert_equal(response.class, Array)
     203:         assert_equal(response.length, 1)
     204:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:221:in `test_get_networks__network_addressinfos'
     218:         puts req.to_s
     219:         code, response = send_cmd(req.method, req.path, req.params)
     220:         puts "RESPONSE: #{response}", "\n"
  => 221:         assert_equal(200, code)
     222:         assert_equal(response.class, Hash)
     223:         assert_include(response.keys, "total_size")
     224:         assert_equal(response["total_size"], 16)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_delete_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:240:in `test_delete_networks__network_addressinfos'
     237:         code, response = send_cmd(req.method, req.path, req.params)
     238:         puts "RESPONSE: #{response}"
     239:         puts "[warn] This interface does not response a valid resouce.\n"
  => 240:         assert_equal(200, code)
     241:     end
     242: 
     243:     def test_post_networks__network_addressinfos_importmanualaddresses
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_addressinfos_importmanualaddresses]
    PATH: /networks/3.0.0.0$28/addressinfos/import-manual-addresses
  METHOD: post
  PARAMS: {"resource_content"=>[{"ip_addr"=>"3.0.0.3", "hardware_ethernet"=>"00:11:22:33:44:01", "nic_port"=>"eth2"}, {"ip_addr"=>"3.0.0.4", "hardware_ethernet"=>"00:11:22:33:44:02", "nic_port"=>"eth3"}, {"ip_addr"=>"3.0.0.5", "hardware_ethernet"=>"00:11:22:33:44:03", "nic_port"=>"eth4"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_addressinfos_importmanualaddresses(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:254:in `test_post_networks__network_addressinfos_importmanualaddresses'
     251:         puts req.to_s
     252:         code, response = send_cmd(req.method, req.path, req.params)
     253:         puts "RESPONSE: #{response}", "\n"
  => 254:         assert_equal(200, code)
     255:         assert_equal(response.class, Array)
     256:         assert_equal(response.length, 3)
     257:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_resize]
--expand network
    PATH: /networks/3.0.0.0$28/resize
  METHOD: post
  PARAMS: {"netmask"=>"25", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_resize(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:274:in `test_post_networks__network_resize'
     271:         puts req.to_s
     272:         code, response = send_cmd(req.method, req.path, req.params)
     273:         puts "RESPONSE: #{response}"
  => 274:         assert_equal(200, code)
     275:         assert_equal(response.class, Hash)
     276:         assert_include(response.keys, "id")
     277:         assert_equal(response["id"], "3.0.0.0$25")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_split]
    PATH: /networks/3.0.0.0$28/split
  METHOD: post
  PARAMS: {"netmask"=>"30", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_split(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:307:in `test_post_networks__network_split'
     304:         puts req.to_s
     305:         code, response = send_cmd(req.method, req.path, req.params)
     306:         puts "RESPONSE: #{response}", "\n"
  => 307:         assert_equal(200, code)
     308:         assert_equal(response.class, Hash)
     309:         assert_include(response.keys, "children_count")
     310:         assert_equal(response["children_count"], 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_children]
    PATH: /networks/3.0.0.0$28/children
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_children(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:323:in `test_get_networks__network_children'
     320:         puts req.to_s
     321:         code, response = send_cmd(req.method, req.path, req.params)
     322:         puts "RESPONSE: #{response}", "\n"
  => 323:         assert_equal(200, code)
     324:         assert_equal(response.class, Hash)
     325:         assert_include(response.keys, "resources")
     326:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_parentattrs]
    PATH: /networks/3.0.1.0$30/parent-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_parentattrs(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:341:in `test_get_networks__network_parentattrs'
     338:         puts req.to_s
     339:         code, response = send_cmd(req.method, req.path, req.params)
     340:         puts "RESPONSE: #{response}", "\n"
  => 341:         assert_equal(200, code)
     342: =begin 
     343:         assert_equal(response.class, Hash)
     344:         assert_include(response.keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_join]
    PATH: /networks/3.0.0.0$30/join
  METHOD: post
  PARAMS: {"netmask"=>"28", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_join(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:399:in `test_post_networks__network_join'
     396:         puts req.to_s
     397:         code, response = send_cmd(req.method, req.path, req.params)
     398:         puts "RESPONSE: #{response}", "\n"
  => 399:         assert_equal(200, code)
     400:         assert_equal(response.class, Hash)
     401:         assert_include(response.keys, "id")
     402:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks]
--normal delete
    PATH: /networks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.0/28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:418:in `test_delete_networks'
     415:         puts req.to_s
     416:         code, response = send_cmd(req.method, req.path, req.params)
     417:         puts "RESPONSE: #{response}"
  => 418:         assert_equal(200, code)
     419:         assert_equal(response.class, Hash)
     420:         assert_include(response.keys, "result")
     421:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.......usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
...ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_del_pair(TestPair)
: ArgumentError: wrong number of arguments (1 for 4)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:25:in `new_pair'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:43:in `test_del_pair'
     40:     end
     41: 
     42:     def test_del_pair
  => 43:         _pair_manager.new_pair("1")
     44:     end
     45: 
     46:     def test_fetch_pair
===============================================================================
E
===============================================================================
Error: test_fetch_pair(TestPair)
: NoMethodError: undefined method `delete' for #<DDI::STATS::GridStatsPair:0x00000007206410>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `block in fetch_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `fetch_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:47:in `test_fetch_pair'
     44:     end
     45: 
     46:     def test_fetch_pair
  => 47:         pairs = _pair_manager.fetch_pairs
     48:         check_result("fetch_pairs", pairs){|pairs| !pairs.nil?}
     49:     end
     50: 
===============================================================================
ping: unknown host master
ping: unknown host slave
.usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
Test pair_info                                --> Success
.Test test_request_route1                      --> Failed
E
===============================================================================
Error: test_request_route1(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:63:in `test_request_route1'
     60:     def test_request_route1
     61:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     62:         result = _pair_manager.request_route("get", "1", "/views/*/stats/9", body)
  => 63:         check_result("test_request_route1", result){|result| !result.nil?}
     64:     end
     65: 
     66:     def test_request_route2
===============================================================================
Test test_request_route2                      --> Failed
E
===============================================================================
Error: test_request_route2(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:69:in `test_request_route2'
     66:     def test_request_route2
     67:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     68:         result = _pair_manager.request_route("get", "0", "/views/*/stats/9", body)
  => 69:         check_result("test_request_route2", result){|result| !result.nil?}
     70:     end
     71: 
     72:     #######################GridStatsPair############################
===============================================================================
ping: unknown host master
ping: unknown host slave
.ping: unknown host master
ping: unknown host slave
Test pair_info                                --> Success
.E
===============================================================================
Error: test_update_member(TestPair)
: NoMethodError: undefined method `ip=' for #<String:0x0000000442f168>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `block in update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:50:in `update_member'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:52:in `test_update_member'
     49:     end
     50: 
     51:     def test_update_member
  => 52:         _pair_manager.update_member("1", "127.0.0.1")
     53:     end
     54: 
     55:     def test_update_pairs
===============================================================================
ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_update_pairs(TestPair)
: ArgumentError: wrong number of arguments (1 for 2)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/db_resource_manager.rb:254:in `replace_resource'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:58:in `block in update_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `update_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:56:in `test_update_pairs'
     53:     end
     54: 
     55:     def test_update_pairs
  => 56:         result = _pair_manager.update_pairs(["1"], "1", "127.0.0.1")
     57:         check_result("update_pairs", result){|result| !result.nil?}
     58:     end
     59: 
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zones(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:7:in `test_view_zones'
      4:     def test_view_zones()
      5:         view1 = {"comment"=>"", "name"=>"grd", "owners"=>["local.master"], "acls"=>[], "black_acls"=>[], "filter_aaaa"=>"no", "filter_aaaa_ips"=>["any"], "recursion_enable"=>"yes", "non_recursive_acls"=>[], "bind_ips"=>["0.0.0.0"], "fail_forwarder"=>"", "dns64s"=>[], "need_tsig_key"=>"no", "tsig_host"=>[], "current_user"=>"admin"}
      6:         code, response = send_cmd("post", "/views", view1);
  =>  7:         assert_equal(code, 200)
      8: 
      9:         zone1 = {"zone_type"=>"auth", "name"=>"master", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10:         zone2 = {"zone_type"=>"auth", "name"=>"slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zone_rrs(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:32:in `test_view_zone_rrs'
     29:         rr2 = {"comment"=>"", "name"=>"22", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     30:         rr3 = {"comment"=>"", "name"=>"33", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     31:         code, response = send_cmd("post", "/views/default/zones/master/rrs", rr1);
  => 32:         assert_equal(code, 200)
     33:         code, response = send_cmd("post", "/views/default/zones/slave/rrs", rr1);
     34:         assert_equal(code, 200)
     35:         code, response = send_cmd("post", "/views/grd/zones/master/rrs", rr1);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
Connection refused - connect(2) for "127.0.0.1" port 20120
.[test_post_querytasks]
    PATH: /query-tasks
  METHOD: post
  PARAMS: {"depth"=>"3", "netdisco"=>"yes", "comment"=>"", "node"=>"local.master", "snmp_ver"=>"v1", "snmp_port"=>"161", "snmp_group"=>"public", "snmp_hosts"=>["10.1.101.1"], "enable_auto"=>"yes", "reccurence"=>"daily", "networks"=>[], "cron"=>"00 2 * * *", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_querytasks(TestQueryTasks)
/root/zddiv3/tests/ipam/query_tasks_test.rb:17:in `test_post_querytasks'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert_equal(response.length, 2)
     20:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_Redirection]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:8:in `_test_create_redirections'
(eval):1:in `test_create_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:26:in `_test_batch_add_redirections'
(eval):1:in `test_batch_add_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:41:in `_test_update_redirections'
(eval):1:in `test_update_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections_owners(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:49:in `_test_update_redirections_owners'
(eval):1:in `test_update_redirections_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_redirection_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_redirection_comment(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:65:in `_test_put_redirection_comment'
(eval):1:in `test_put_redirection_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:73:in `_test_del_redirections'
(eval):1:in `test_del_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Test fetch_regular_config                     --> Failed
E
===============================================================================
Error: test_fetch_regular_config(TestRegular)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:23:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:36:in `test_fetch_regular_config'
     33: 
     34:     def test_fetch_regular_config
     35:         result = _config.fetch_regular_config
  => 36:         check_result("fetch_regular_config", result){|result| !result.nil?}
     37:     end
     38: 
     39:     def test_modify_regular_confg
===============================================================================
E
===============================================================================
Error: test_modify_regular_confg(TestRegular)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:35:in `notify_redis_attime'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:30:in `modify_regular_confg'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:40:in `test_modify_regular_confg'
     37:     end
     38: 
     39:     def test_modify_regular_confg
  => 40:         result = _config.modify_regular_confg("yes", "yes", "yes", "yes", "yes", ["www.sohu.com"])
     41:         check_result("modify_regular_config", result){|result| !result.nil?}
     42:     end
     43: 
===============================================================================
.Test read_zones_from_file                     --> Success
.[test_post_roaminghosts]
--create one
    PATH: /roaming-hosts
  METHOD: post
  PARAMS: {"comment"=>"", "mac"=>"00:01:01:01:01:01", "name"=>"hostname1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:18:in `test_post_roaminghosts'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create two"
     21:         req.path = "/roaming-hosts"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts]
    PATH: /roaming-hosts
  METHOD: put
  PARAMS: {"name"=>"hostname111", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:49:in `test_put_roaminghosts'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts__host_comment]
    PATH: /roaming-hosts/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "name"=>"hostname111", "id"=>"00:01:01:01:01:01", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts__host_comment(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:68:in `test_put_roaminghosts__host_comment'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts]
    PATH: /roaming-hosts
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:85:in `test_get_roaminghosts'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "resources")
     88:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts__host]
    PATH: /roaming-hosts/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts__host(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:107:in `test_get_roaminghosts__host'
     104:         puts req.to_s
     105:         code, response = send_cmd(req.method, req.path, req.params)
     106:         puts "RESPONSE: #{response}", "\n"
  => 107:         assert_equal(200, code)
     108:         assert_equal(response.class, Hash)
     109:         assert_include(response.keys, "id")
     110:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_roaminghosts]
    PATH: /roaming-hosts
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01", "00:01:01:01:01:02", "00:01:01:01:01:03"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:123:in `test_delete_roaminghosts'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Hash)
     125:         assert_include(response.keys, "result")
     126:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_config(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:10:in `test_get_sso_config'
      7:     def test_get_sso_config
      8:         # first create sso config table
      9:         code, response = send_cmd("get", "/sso/config", {})
  => 10:         assert_equal(code, 200)
     11: 
     12:         # 1. check init sso config
     13:         db_config = `sqlite3 /usr/local/zddi/grid.db "select config from sso_config"`
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:94:in `test_get_sso_user_permission_1'
     91:         tmp_params["protocol"] = "p2"
     92:         tmp_params["enable"] = "yes"
     93:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 94:         assert_equal(code, 200)
     95: 
     96:         tmp_params = {"user_name" => "test_sso"}
     97:         code, response = send_cmd("get", "/sso/user/permission", tmp_params.dup)
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:105:in `test_get_sso_user_permission_2'
     102:         tmp_params = {}
     103:         tmp_params["enable"] = "no"
     104:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 105:         assert_equal(code, 200)
     106: 
     107:         # test no user
     108:         tmp_params = {"user_name" => "test_sso_2"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:42:in `test_put_sso_config_1'
     39:         tmp_params["protocol"] = "p2"
     40:         tmp_params["enable"] = "yes"
     41:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 42:         assert_equal(code, 200)
     43:         config = response
     44: 
     45:         # 1. check api result
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:82:in `test_put_sso_config_2'
     79:         tmp_params["protocol"] = "p2"
     80:         tmp_params["enable"] = "yes"
     81:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 82:         assert_equal(code, 422)
     83:     end
     84: 
     85:     def test_get_sso_user_permission_1
<nil> expected but was
<422>

diff:
? nil
? 422
===============================================================================
[test_post_scantasks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.5.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:18:in `test_post_scantasks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create scan task"
     21:         req.path = "/scan-tasks"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_scantasks]
    PATH: /scan-tasks
  METHOD: put
  PARAMS: {"node"=>"local.master", "scan_type"=>["ICMP", "NETBIOS", "ARP"], "enable_auto"=>"yes", "reccurence"=>"weekly", "cron"=>"00 2 * * 3", "ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:45:in `test_put_scantasks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks]
    PATH: /scan-tasks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:64:in `test_get_scantasks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}", "\n"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Hash)
     66:         assert_include(response.keys, "resources")
     67:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks__task]
    PATH: /scan-tasks/3.0.5.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks__task(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:85:in `test_get_scantasks__task'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "id")
     88:         assert_equal(response["id"], "3.0.5.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_start]
    PATH: /scan-tasks/3.0.5.0$28/start
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_start(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:101:in `test_post_scantasks__task_start'
      98:         puts req.to_s
      99:         code, response = send_cmd(req.method, req.path, req.params)
     100:         puts "RESPONSE: #{response}", "\n"
  => 101:         assert_equal(200, code)
     102:         assert_equal(response.class, Hash)
     103:         assert_include(response.keys, "result")
     104:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_stop]
    PATH: /scan-tasks/3.0.5.0$28/stop
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_stop(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:117:in `test_post_scantasks__task_stop'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "result")
     120:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_pause]
    PATH: /scan-tasks/3.0.5.0$28/pause
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_pause(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:133:in `test_post_scantasks__task_pause'
     130:         puts req.to_s
     131:         code, response = send_cmd(req.method, req.path, req.params)
     132:         puts "RESPONSE: #{response}", "\n"
  => 133:         assert_equal(200, code)
     134:         assert_equal(response.class, Hash)
     135:         assert_include(response.keys, "result")
     136:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_scantasks]
--delete scan task
    PATH: /scan-tasks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:150:in `test_delete_scantasks'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "result")
     153:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_sharednetworks]
--create 2 network 3.0.0.0/24 and 3.0.1.0/24
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.0.0/24", "3.0.1.0/24"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:18:in `test_post_sharednetworks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         puts "--create shared-network 3.0.0.0/24"
     20:         req.path = "/shared-networks"
     21:         req.params = {"comment"=>"","name"=>"shared-network1","type"=>"IPv4","networks"=>["3.0.0.0/24"]}
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks]
    PATH: /shared-networks
  METHOD: put
  PARAMS: {"networks"=>["3.0.0.0/24", "3.0.1.0/24"], "ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:45:in `test_put_sharednetworks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks]
    PATH: /shared-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:62:in `test_get_sharednetworks'
     59:         puts req.to_s
     60:         code, response = send_cmd(req.method, req.path, req.params)
     61:         puts "RESPONSE: #{response}", "\n"
  => 62:         assert_equal(200, code)
     63:         assert_equal(response.class, Hash)
     64:         assert_include(response.keys, "resources")
     65:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name]
    PATH: /shared-networks/shared-network1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:82:in `test_get_sharednetworks__name'
     79:         puts req.to_s
     80:         code, response = send_cmd(req.method, req.path, req.params)
     81:         puts "RESPONSE: #{response}", "\n"
  => 82:         assert_equal(200, code)
     83:         assert_equal(response.class, Hash)
     84:         assert_include(response.keys, "id")
     85:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_comment]
    PATH: /shared-networks/shared-network1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_comment(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:98:in `test_put_sharednetworks__name_comment'
      95:         puts req.to_s
      96:         code, response = send_cmd(req.method, req.path, req.params)
      97:         puts "RESPONSE: #{response}", "\n"
  =>  98:         assert_equal(200, code)
      99:         assert_equal(response.class, Hash)
     100:         assert_include(response.keys, "id")
     101:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"aaaa", "ddns_rev_domainname"=>"bbbb", "primary_server"=>"55.55.55.55", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:117:in `test_put_sharednetworks__name_ddns_config'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "ddns_domainname")
     120:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:137:in `test_get_sharednetworks__name_ddns_config'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "ddns_domainname")
     140:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "isIPv4"=>true, "domain_name"=>"XXX", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"3200", "def_value"=>"3200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"6400", "max_value"=>"6400", "max_unit"=>"1", "min_lease_time"=>"300", "min_value"=>"300", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:158:in `test_put_sharednetworks__name_dhcpconfig'
     155:         puts req.to_s
     156:         code, response = send_cmd(req.method, req.path, req.params)
     157:         puts "RESPONSE: #{response}", "\n"
  => 158:         assert_equal(200, code)
     159:         assert_equal(response.class, Hash)
     160:         assert_include(response.keys, "domain_name")
     161:         assert_equal(response["domain_name"], "XXX")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:174:in `test_get_sharednetworks__name_dhcpconfig'
     171:         puts req.to_s
     172:         code, response = send_cmd(req.method, req.path, req.params)
     173:         puts "RESPONSE: #{response}", "\n"
  => 174:         assert_equal(200, code)
     175:         assert_include(response.keys, "domain_name")
     176:         assert_equal(response["domain_name"], "XXX")
     177:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_sharednetworks]
--delete shared network
    PATH: /shared-networks
  METHOD: delete
  PARAMS: {"ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:190:in `test_delete_sharednetworks'
     187:         puts req.to_s
     188:         code, response = send_cmd(req.method, req.path, req.params)
     189:         puts "RESPONSE: #{response}"
  => 190:         assert_equal(200, code)
     191:         assert_equal(response.class, Hash)
     192:         assert_include(response.keys, "result")
     193:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
F
===============================================================================
Failure:
test_update_config(TestSnmpdAgentMgr)
/root/zddiv3/tests/unit/zva/snmpd_test.rb:22:in `test_update_config'
     19: 
     20:         assert_equal 1, @table.count
     21:         assert_equal "private", snmp_agent_mgr.read_community
  => 22:         assert_equal 3000, snmp_agent_mgr.port
     23:         assert_equal "yes", snmp_agent_mgr.switch
     24:     end
     25: 
<3000> expected but was
<"3000">

diff:
? "3000"
===============================================================================

[_test_create_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:8:in `_test_create_stub_zone'
(eval):1:in `test_create_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:31:in `_test_update_stub_zone'
(eval):1:in `test_update_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone_owners(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:39:in `_test_update_stub_zone_owners'
(eval):1:in `test_update_stub_zone_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_put_stub_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_stub_zone_comment(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:47:in `_test_put_stub_zone_comment'
(eval):1:in `test_put_stub_zone_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:55:in `_test_del_stub_zone'
(eval):1:in `test_del_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
.{"cpu_usage"=>"0.50", "memory_usage"=>"0.32", "disk_usage"=>"0.85", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-05-31 00:00:55", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.E
===============================================================================
Error: test_get_license_info(TestSystem)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/root/zddiv3/tests/system_manager/system_test.rb:13:in `test_get_license_info'
     10:         assert_equal(200, code)
     11: 
     12:         api_license = response
  => 13:         local_api = DDI.get_license_flag.merge(DDI.get_license_auth)
     14:         api_license.each do |k,v|
     15:             if v != local_api[k]
     16:                 puts "license: key:#{k}'s values is not equal"
===============================================================================
..[test_post_tempauthorities]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.4.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:18:in `test_post_tempauthorities'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.path = "/networks/:network/dhcp-resources"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities]
    PATH: /temp-authorities
  METHOD: put
  PARAMS: {"start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:54:in `test_put_tempauthorities'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}", "\n"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 1)
     57:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities__authority_comment]
    PATH: /temp-authorities/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "id"=>"00:01:01:01:01:01", "in_use"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities__authority_comment(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:73:in `test_put_tempauthorities__authority_comment'
     70:         puts req.to_s
     71:         code, response = send_cmd(req.method, req.path, req.params)
     72:         puts "RESPONSE: #{response}", "\n"
  => 73:         assert_equal(200, code)
     74:         assert_equal(response.class, Hash)
     75:         assert_include(response.keys, "id")
     76:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities]
    PATH: /temp-authorities
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:90:in `test_get_tempauthorities'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities__authority]
    PATH: /temp-authorities/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities__authority(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:108:in `test_get_tempauthorities__authority'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_tempauthorities]
--delete temp authority
    PATH: /temp-authorities
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:125:in `test_delete_tempauthorities'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "result")
     128:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_put_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"name1", "type"=>"phone", "id"=>""}, {"display_name"=>"name2", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:17:in `test_put_userdefinedattrs'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert response.length.eql?(2)
     20:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:34:in `test_get_userdefinedattrs'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert response.length.eql?(2)
     37:         assert do
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_res_private_user_defined_attrs]
--get attrs
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_res_private_user_defined_attrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:54:in `test_put_res_private_user_defined_attrs'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 2)
     57:         puts "--put attrs"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs]
    PATH: /res-private-user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:89:in `test_get_resprivateuserdefinedattrs'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "resources")
     92:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs__restype]
    PATH: /res-private-user-defined-attrs/mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs__restype(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:106:in `test_get_resprivateuserdefinedattrs__restype'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "mac-informations")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_acl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestView)
/root/zddiv3/tests/dns/view_test.rb:8:in `_test_create_acl'
(eval):1:in `test_create_acl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:22:in `_test_create_view'
(eval):1:in `test_create_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:39:in `_test_update_view'
(eval):1:in `test_update_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:50:in `_test_create_view_sortlist'
(eval):1:in `test_create_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:63:in `_test_update_view_sortlist'
(eval):1:in `test_update_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:70:in `_test_delete_view_sortlist'
(eval):1:in `test_delete_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:77:in `_test_delete_view'
(eval):1:in `test_delete_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_acl]
.Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_snmp_ha_status(TestZVA)
/root/zddiv3/tests/system_manager/zva_test.rb:17:in `_test_start_snmp'
/root/zddiv3/tests/system_manager/zva_test.rb:34:in `test_snmp_ha_status'
     31:         type = response["type"]
     32: 
     33:         # start snmp
  => 34:         _test_start_snmp
     35: 
     36:         # get ha status
     37:         res = `snmpget -v2c -c #{SNMP_READ_COMMUNITY} localhost 1.3.6.1.4.1.39810.100.1.19.0`
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:412:in `test_del_redirect_rrs'
     409:         rr_ids = Array.new
     410: 
     411:         #1:create new redirect records
  => 412:         add_redirect_rrs(5).each{|info|
     413:            rr_ids <<  info["id"]
     414:         }
     415:         #2:delete one
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:338:in `test_get_redirect_rrs'
     335: =end
     336:         rr_ids = []
     337:         rr_infos = []
  => 338:         rr_infos = add_redirect_rrs(10)
     339:         #store all records id,after finish the test,we'll delete them.
     340:         rr_infos.each{|rr|
     341:             rr_ids << rr["id"]
===============================================================================
+++test invalid view name+++
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:159:in `redirect_rr_common_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:191:in `post_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:305:in `block in test_post_redirect_rrs'
     302: 
     303:         check_valid.each{|record|
     304:             puts "+++#{record[0].to_s}+++"
  => 305:             res = post_test(record[1], record[2], record[3])  
     306:             if record[0].to_s == "add new redirect record"
     307:                 new_rr_id << res["ret"]["id"]
     308:             end
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `each'
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `test_post_redirect_rrs'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:357:in `test_put_redirect_rrs'
     354:        rr_ids = []
     355:  
     356:        #modify the records we have added,these values is we want to update
  => 357:        add_redirect_rrs(5).each{|rr_msg|
     358:           rr_ids << rr_msg["id"]
     359:           rr_msg["ttl"] = 200
     360:           rr_msg["is_enable"] = "no"
===============================================================================


Finished in 144040.754998838 seconds.

420 tests, 470 assertions, 198 failures, 106 errors, 0 pendings, 0 omissions, 7 notifications
35% passed

0.00 tests/s, 0.00 assertions/s
ping: unknown host master
ping: unknown host slave
SimpleCov failed with exit 1Coverage report generated for Unit Tests to /root/coverage/sample/report. 16358 / 72012 LOC (22.72%) covered.
rake aborted!
Command failed with status (1): [ruby -I"lib:test:lib"  "/usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader.rb" "/root/coverage/sample/test/test_helper.rb" "/root/zddiv3/tests/unit/agent/agent.rb" "/root/zddiv3/tests/unit/am/gridstats_menu_test.rb" "/root/zddiv3/tests/unit/am/gridstats_pair_test.rb" "/root/zddiv3/tests/unit/am/gridstats_regular_test.rb" "/root/zddiv3/tests/unit/am/gridstats_report_test.rb" "/root/zddiv3/tests/unit/am/network_pool_test.rb" "/root/zddiv3/tests/unit/dns/query_source_checker_test.rb" "/root/zddiv3/tests/unit/dns/query_source_test.rb" "/root/zddiv3/tests/unit/dns/shared_rr_test.rb" "/root/zddiv3/tests/unit/dns/shared_zone_test.rb" "/root/zddiv3/tests/unit/dns/smart_view_manager_test.rb" "/root/zddiv3/tests/unit/grid/obj_comment_test.rb" "/root/zddiv3/tests/unit/grid/user.rb" "/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb" "/root/zddiv3/tests/unit/ipam/network_manager_test.rb" "/root/zddiv3/tests/unit/node/node_test.rb" "/root/zddiv3/tests/unit/system/ha_config.rb" "/root/zddiv3/tests/unit/system/nic_link_monitor_table_test.rb" "/root/zddiv3/tests/unit/system/power_status_table_test.rb" "/root/zddiv3/tests/unit/util/command_version_manager_test.rb" "/root/zddiv3/tests/unit/util/config_manager_test.rb" "/root/zddiv3/tests/unit/web/web.rb" "/root/zddiv3/tests/unit/zva/data_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/query_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/snmpd_test.rb" "/root/zddiv3/tests/dns/acl_lib_test.rb" "/root/zddiv3/tests/dns/acl_test.rb" "/root/zddiv3/tests/dns/auth_zone_tree_test.rb" "/root/zddiv3/tests/dns/dns_security_test.rb" "/root/zddiv3/tests/dns/forward_zone_test.rb" "/root/zddiv3/tests/dns/hint-zones_test.rb" "/root/zddiv3/tests/dns/hint_zone_record_test.rb" "/root/zddiv3/tests/dns/ip_rrl_test.rb" "/root/zddiv3/tests/dns/local-policiey_test.rb" "/root/zddiv3/tests/dns/name_rrl_test.rb" "/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb" "/root/zddiv3/tests/dns/redict_rr_test.rb" "/root/zddiv3/tests/dns/redirection_url_test.rb" "/root/zddiv3/tests/dns/stub_zone_test.rb" "/root/zddiv3/tests/dns/view_test.rb" "/root/zddiv3/tests/grid/grid_test.rb" "/root/zddiv3/tests/ipam/acls_test.rb" "/root/zddiv3/tests/ipam/audit_test.rb" "/root/zddiv3/tests/ipam/auth_users_test.rb" "/root/zddiv3/tests/ipam/authenticate_policy_test.rb" "/root/zddiv3/tests/ipam/dhcp_failovers_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb" "/root/zddiv3/tests/ipam/dhcp_resources_test.rb" "/root/zddiv3/tests/ipam/dhcp_templates_test.rb" "/root/zddiv3/tests/ipam/fingerprints_test.rb" "/root/zddiv3/tests/ipam/ipam_config_test.rb" "/root/zddiv3/tests/ipam/ipam_search_resources_test.rb" "/root/zddiv3/tests/ipam/macs_test.rb" "/root/zddiv3/tests/ipam/networks_test.rb" "/root/zddiv3/tests/ipam/query_tasks_test.rb" "/root/zddiv3/tests/ipam/roaming_host_test.rb" "/root/zddiv3/tests/ipam/scan_tasks_test.rb" "/root/zddiv3/tests/ipam/shared_networks_test.rb" "/root/zddiv3/tests/ipam/temp_authorities_test.rb" "/root/zddiv3/tests/ipam/user_defined_attrs_test.rb" "/root/zddiv3/tests/system_manager/alarm_test.rb" "/root/zddiv3/tests/system_manager/ha_test.rb" "/root/zddiv3/tests/system_manager/license_test.rb" "/root/zddiv3/tests/system_manager/sso_test.rb" "/root/zddiv3/tests/system_manager/system_loop_test.rb" "/root/zddiv3/tests/system_manager/system_test.rb" "/root/zddiv3/tests/system_manager/zva_test.rb" ]

Tasks: TOP => test
(See full trace by running task with --trace)
29 May 08:01:41 ntpdate[24307]: step time server 120.25.115.20 offset -143972.008915 sec
Already up-to-date.
Already on 'task38746-dev-3.14'
  a
  dev-3.14
  master
  task-jinyue
  task36923-master
  task36968-3.12.2.2
  task37042-master
  task37057-3.12.4.4
  task37538-3.12.4.6
  task37730-3.12.4.6
  task38090-3.11
  task38210-3.11.2.16
  task38223-3.11
  task38224-3.11
  task38396-3.11
  task38428-3.11
  task38436-3.11
* task38746-dev-3.14
  task38746-dev-3.14-add-test
  task38746-tcy-test
  zddi-3.11
  zddi-3.11.2.10
  zddi-3.11.2.16
  zddi-3.12.2.0-dongfangyouxian
  zddi-3.12.2.2
  zddi-3.12.4.4
  zddi-3.12.4.6
Already up-to-date.
fatal: Not a git repository (or any of the parent directories): .git
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/def.rb:12: warning: already initialized constant DDI::SYSTEM_PASTATE_FP
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:136: warning: previous definition of SYSTEM_PASTATE_FP was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:311: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:338: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:3: warning: already initialized constant DDI::PATCH_DATA_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:369: warning: previous definition of PATCH_DATA_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:4: warning: already initialized constant DDI::PATCH_BAK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:370: warning: previous definition of PATCH_BAK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:5: warning: already initialized constant DDI::PATCH_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:371: warning: previous definition of PATCH_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:6: warning: already initialized constant DDI::PATCH_M_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:372: warning: previous definition of PATCH_M_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:11: warning: already initialized constant DDI::SystemInfo::POWER_AVAILABLE_FILE
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:8: warning: previous definition of POWER_AVAILABLE_FILE was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:143: warning: duplicated key at line 145 ignored: :y_label_font_size
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:3: warning: class variable access from toplevel
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:15: warning: already initialized constant DDI::SQueryLog::DHCP_TABLE_ROW_NAME
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:14: warning: previous definition of DHCP_TABLE_ROW_NAME was here
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:69: warning: duplicated key at line 69 ignored: "192.168.1.100"
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:97: warning: duplicated key at line 97 ignored: "192.168.1.100"
Loaded suite /usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader
Started
................E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
: RuntimeError: 60002018010703
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/grid_dhcpfailover.rb:48:in `create_dhcpfailover'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:31:in `test_create_dhcpfailover'
     28: 
     29:     def test_create_dhcpfailover
     30:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
  => 31:         @failover_manager.create_dhcpfailover(DATA)
     32:         assert_equal(DATA['name'], @table.first[:name])
     33:     end
     34: 
===============================================================================
E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:133:in `test_create_table'
     130:     end
     131: 
     132:     def test_create_table
  => 133:         @db.run('drop table ' + TABLE_NAME.to_s)
     134:         @failover_manager.send :_create_table
     135:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     136:     end
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:36:in `test_del_dhcpfailover'
     33:     end
     34: 
     35:     def test_del_dhcpfailover
  => 36:         insert_failover_data
     37:         assert_equal(1, @table.count)
     38:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     39:         @failover_manager.del_dhcpfailover(DATA['name'])
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:75:in `test_del_failover_by_ip'
     72:     end
     73: 
     74:     def test_del_failover_by_ip
  => 75:         insert_failover_data
     76:         assert_equal(1, @table.count)
     77:         @failover_manager.del_failover_by_ip(DATA['master_node'])
     78:         assert_equal(0, @table.count)
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:118:in `test_fetch_failover_states_thread'
     115:     end
     116: 
     117:     def test_fetch_failover_states_thread
  => 118:         insert_failover_data
     119:         assert_nothing_raised {@failover_manager.fetch_failover_states_thread}
     120:     end
     121: 
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:21:in `test_get_configers'
     18:             "comment" => "is_a_comment"}
     19: 
     20:     def test_get_configers
  => 21:         insert_failover_data
     22:         assert_equal(DATA['name'], @failover_manager.configers[0].name)
     23:     end
     24: 
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:108:in `test_get_dhcpfailover_master_ip'
     105:     end
     106: 
     107:     def test_get_dhcpfailover_master_ip
  => 108:         insert_failover_data
     109:         assert_equal(DATA['master_ip'], @failover_manager.get_dhcpfailover_master_ip(DATA['name']))
     110:     end
     111: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:103:in `test_get_dhcpfailover_nodes'
     100:     end
     101: 
     102:     def test_get_dhcpfailover_nodes
  => 103:         insert_failover_data
     104:         assert_equal([DATA['master_node'], DATA['slave_node']], @failover_manager.get_dhcpfailover_nodes(DATA['name']))
     105:     end
     106: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:113:in `test_get_dhcpfailovers'
     110:     end
     111: 
     112:     def test_get_dhcpfailovers
  => 113:         insert_failover_data
     114:         assert_equal(DATA['name'], @failover_manager.get_dhcpfailovers[0]['name'])
     115:     end
     116: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:63:in `test_is_using_group?'
     60:     end
     61: 
     62:     def test_is_using_group?
  => 63:         insert_failover_data
     64:         assert_equal('yes', @failover_manager.is_using_group?([DATA['master_node']]))
     65:         assert_equal('no', @failover_manager.is_using_group?(['3.3.3.3']))
     66:     end
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:69:in `test_is_using_member_ip?'
     66:     end
     67: 
     68:     def test_is_using_member_ip?
  => 69:         insert_failover_data
     70:         assert_equal(true, @failover_manager.is_using_member_ip?(DATA['master_node']))
     71:         assert_equal(false, @failover_manager.is_using_member_ip?('3.3.3.3'))
     72:     end
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:123:in `test_set_failover_state'
     120:     end
     121: 
     122:     def test_set_failover_state
  => 123:         insert_failover_data
     124:         assert_nothing_raised do
     125:             @failover_manager.stubs(:_host_accessible).returns(true)
     126:             @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:44:in `test_update_dhcpfailover'
     41:     end
     42: 
     43:     def test_update_dhcpfailover
  => 44:         insert_failover_data
     45:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     46:         new_data = {'split' => '3/1', 'slave_ip' => '8.8.8.8'}
     47: 
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:57:in `test_update_dhcpfailover_comment'
     54:     end
     55: 
     56:     def test_update_dhcpfailover_comment
  => 57:         insert_failover_data
     58:         @failover_manager.update_dhcpfailover_comment(DATA['name'], 'set_new_comment')
     59:         assert_equal('set_new_comment', @table.first[:comment])
     60:     end
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:97:in `test_update_master_node_ip'
      94:     end
      95: 
      96:     def test_update_master_node_ip
  =>  97:         insert_failover_data
      98:         @failover_manager.update_master_node_ip(DATA['master_node'], '8.8.8.8')
      99:         assert_equal('8.8.8.8', @table.first[:master_node])
     100:     end
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `block in test_update_member_ip'
     86:         ip_datas = [{'master_node' => '6.6.6.6', 'master_ip' => '13.13.13.13', 'slave_ip' => '14.14.14.14'},
     87:                     {'master_node' => 'master1', 'master_ip' => '6.6.6.6', 'slave_ip' => '67.67.67.67'},
     88:                     {'master_node' => 'master2', 'master_ip' => '7.7.7.7', 'slave_ip' => '6.6.6.6'}]
  => 89:         ip_datas.each {|data| insert_failover_data(DATA.merge(data))}
     90:         @failover_manager.update_member_ip('6.6.6.6', '8.9.9.9')
     91:         assert_equal('13.13.13.13', @table.where(master_node: '8.9.9.9').first[:master_ip])
     92:         assert_equal('67.67.67.67', @table.where(master_ip: '8.9.9.9').first[:slave_ip])
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `each'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `test_update_member_ip'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"vjgf.bmdduim.pqtmbylr", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:141:in `test_del'
     138:     def test_del
     139:         expect_success_res = {"result" => "succeed"}
     140:         hint_zone_id = add_hint_zone() 
  => 141:         ids = add_hint_rrs(10)
     142: 
     143:         del_params_info = [{"name" => "ids", "type" => "string_array",
     144:                             "max_len" => 10, "max_cnt" => nil},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"fuwdtm.mg.ecalrwg", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:222:in `test_get'
     219:         all_rrs = []
     220:         hint_zone_id = add_hint_zone() 
     221: 
  => 222:         ids = add_hint_rrs(10){|res|
     223:             all_rrs << res["ret"] 
     224:         }
     225: 
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"efmbkppv.msfikiwxh.bolupjgftr", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:124:in `block in test_post'
     121:         tester.test_valid_params(200, nil){|para, res|
     122:             # save the parameters,we'll add a duplicate record later.
     123:             paras = para
  => 124:             ids << res["ret"]["id"]
     125:         }
     126: 
     127:         # add an existing record
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:121:in `test_post'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"oque.j.ku", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:168:in `test_put'
     165:     
     166:     def test_put
     167:         hint_zone_id = add_hint_zone() 
  => 168:         ids = add_hint_rrs(10)
     169: 
     170:         put_paras_info = [
     171:             {"name" => "ids", "type" => "string_array", "max_cnt" => 1, "assignation" => ids},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:171:in `test_del'
     168:         ids = []
     169:         expect_success_res = {"result" => "succeed"}
     170: 
  => 171:         view_infos = add_views(10)
     172:         ids = add_rrs(view_infos)
     173: 
     174:         del_params_info = [{"name" => "ids", "type" => "string_array",
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:253:in `test_get'
     250:         all_rrs = []
     251:         view_infos = []
     252: 
  => 253:         view_infos = add_views(10)
     254:         ids = add_rrs(view_infos){|res|
     255:             all_rrs << res["ret"] 
     256:         }
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"view"=>"clxrweovb", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : owners
check type  : This is a rand string array
expect code : 421
expect res  : {"error"=>"10002018010736"}
parameters  : {"view"=>"default", "owners"=>["eqoibtrhpj", "bvsiht", "btucuuywh", "mpwkj", "iwvonmywqt"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"view"=>"default", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
.exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:205:in `test_put'
     202:         ids = []
     203:         view_infos = []
     204: 
  => 205:         view_infos = add_views(10)
     206:         ids = add_rrs(view_infos)
     207: 
     208:         put_paras_info = [
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"53.153.137.167", "is_enable"=>"no", "name"=>"wn.ejncng.eapm", "strategy"=>"", "ttl"=>975441349, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"56.100.127.135", "is_enable"=>"no", "name"=>"m.gtvdogss.jnubc", "strategy"=>"", "ttl"=>395015151, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"49.67.112.105", "is_enable"=>"yes", "name"=>"e.qbfjbm.exnxpjhsch", "strategy"=>"", "ttl"=>1046853188, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"112.250.90.102", "is_enable"=>"yes", "name"=>"bo.xaatebl.dhdvyvkea", "strategy"=>"", "ttl"=>1098263600, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"100.171.223.136", "is_enable"=>"yes", "name"=>"javjkvlsn.hvu.tlluvm", "strategy"=>"", "ttl"=>39827875, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"20.56.18.89", "is_enable"=>"yes", "name"=>"iu.yimx.i", "strategy"=>"", "ttl"=>1179924315, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"165.8.247.12", "is_enable"=>"yes", "name"=>"pr.ugruukf.ijgp", "strategy"=>"", "ttl"=>384791705, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"188.14.189.139", "is_enable"=>"yes", "name"=>"hfgbmuig.u.oik", "strategy"=>"", "ttl"=>778075606, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"201.221.221.167", "is_enable"=>"no", "name"=>"hnwtitwgd.ksxmmt.x", "strategy"=>"", "ttl"=>1918569224, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"59.116.222.148", "is_enable"=>"no", "name"=>"vqnpp.mcuas.pcop", "strategy"=>"", "ttl"=>364728216, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:99:in `block in test_del'
      96:         expect_success_res = {"result" => "succeed"}
      97: 
      98:         add_rrs().each{|res|
  =>  99:             ids << res["ret"]["id"]
     100:         }
     101:         del_params_info = [{"name" => "ids", "type" => "string_array",
     102:                             "max_len" => 10, "max_cnt" => nil},
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `test_del'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"110.194.204.201", "is_enable"=>"no", "name"=>"w.yyewbux.hrbmbjwnu", "strategy"=>"", "ttl"=>1330832467, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"242.157.105.178", "is_enable"=>"no", "name"=>"vkxi.vnjgbaw.wucd", "strategy"=>"", "ttl"=>1205663241, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"82.200.252.62", "is_enable"=>"yes", "name"=>"ptw.awag.usel", "strategy"=>"", "ttl"=>1209382704, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"159.89.214.17", "is_enable"=>"no", "name"=>"aogwl.a.ejbuxwxrsd", "strategy"=>"", "ttl"=>1285504172, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"175.190.155.197", "is_enable"=>"yes", "name"=>"oei.tmuiwt.qeankai", "strategy"=>"", "ttl"=>1954548854, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"76.174.205.29", "is_enable"=>"yes", "name"=>"invfqmt.bwa.taksnk", "strategy"=>"", "ttl"=>803947820, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"42.108.134.183", "is_enable"=>"yes", "name"=>"eofgthf.mfpkrccqfj.wif", "strategy"=>"", "ttl"=>1101757958, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"93.38.31.218", "is_enable"=>"no", "name"=>"ugsksivwg.nrieaklnm.kinc", "strategy"=>"", "ttl"=>1154230402, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"248.96.180.240", "is_enable"=>"yes", "name"=>"gxi.hiwwfg.wpbfqjkcs", "strategy"=>"", "ttl"=>1099485718, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"151.21.87.191", "is_enable"=>"no", "name"=>"oad.scju.okxlfhg", "strategy"=>"", "ttl"=>146229974, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:175:in `block in test_get'
     172:         all_rrs = []
     173: 
     174:         add_rrs().each{|res|
  => 175:             all_rrs << res["ret"]
     176:             ids << res["ret"]["id"]
     177:         }
     178: 
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `test_get'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : type
check type  : The value is out of range
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"ip"=>"223.124.59.168", "is_enable"=>"yes", "name"=>"k.jg.i", "strategy"=>"", "ttl"=>561671515, "type"=>"nsnyxffpk", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"ip"=>"19.185.101.205", "is_enable"=>"no", "name"=>"rdpvbnock.jh.lsimahyti", "strategy"=>"", "ttl"=>304391715, "type"=>"passthru", "view"=>"eccjaetpp", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"54.129.136.93", "is_enable"=>"yes", "name"=>"aon.wosbjxkp.phbm", "strategy"=>"", "ttl"=>624550343, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:81:in `block in test_post'
     78:         tester.test_all_valid_params(200, nil){|params, res|
     79: 
     80:             #if added successfully,store the id,we'll delete it when finished the test.
  => 81:             ids << res["ret"]["id"] if 200 == res["code"]
     82:             choise_params_by_policy_type(params)
     83:             if !tester.compare_json_include(params, res["ret"])
     84:                 assert_equal(params, res["ret"])
/root/zddiv3/tests/dns/common_data_type.rb:281:in `block in test_all_valid_params'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `each'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `test_all_valid_params'
/root/zddiv3/tests/dns/local-policiey_test.rb:78:in `test_post'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"84.127.97.242", "is_enable"=>"yes", "name"=>"hncfperrfi.ysnlyhj.wekqle", "strategy"=>"", "ttl"=>1745080065, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"18.4.220.79", "is_enable"=>"no", "name"=>"aljacdrum.bfu.fdqh", "strategy"=>"", "ttl"=>1016364580, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"37.175.193.64", "is_enable"=>"no", "name"=>"lacqwmyys.qdl.nnjtbo", "strategy"=>"", "ttl"=>1872894274, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"246.157.10.149", "is_enable"=>"yes", "name"=>"duook.tj.yw", "strategy"=>"", "ttl"=>392182686, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"210.57.18.121", "is_enable"=>"yes", "name"=>"rxlfylywqx.riwlvrxfeg.pd", "strategy"=>"", "ttl"=>36664856, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"127.138.139.40", "is_enable"=>"no", "name"=>"tbshu.h.p", "strategy"=>"", "ttl"=>1724192051, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"128.71.232.254", "is_enable"=>"no", "name"=>"owjqn.dmwnirj.qbdwu", "strategy"=>"", "ttl"=>1220002955, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"179.179.212.241", "is_enable"=>"no", "name"=>"tu.udmgw.gxmf", "strategy"=>"", "ttl"=>1604254145, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"129.26.97.45", "is_enable"=>"no", "name"=>"vjm.n.onvdy", "strategy"=>"", "ttl"=>1493761034, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"56.84.238.88", "is_enable"=>"no", "name"=>"kkixqiqk.eupxn.bbk", "strategy"=>"", "ttl"=>1195545365, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:129:in `block in test_put'
     126:     def test_put
     127:         ids = []
     128:         add_rrs().each{|res|
  => 129:             ids << res["ret"]["id"]
     130:         }
     131: 
     132:         put_paras_info = [{"name" => "ids", "type" => "string_array", "max_cnt" => 1},
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `test_put'
===============================================================================
E
===============================================================================
Error: test_class_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:26:in `test_class_set_ipam_config'
     23:     end
     24: 
     25:     def test_class_set_ipam_config
  => 26:         insert_config_data
     27:         DDI::IPAM::NetworkConfigManager.set_ipam_config(IMAP_CONFIG)
     28:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     29:     end
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:40:in `test_create_table'
     37:     end
     38: 
     39:     def test_create_table
  => 40:         @db.run('drop table ' + TABLE_NAME.to_s)
     41:         @config_manager.send :_create_table
     42:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     43:         assert_equal(1, @table.count)
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:20:in `test_set_ipam_config'
     17:     end
     18: 
     19:     def test_set_ipam_config
  => 20:         insert_config_data
     21:         @config_manager.set_ipam_config(IMAP_CONFIG)
     22:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     23:     end
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
.....E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:34:in `test_add_obj_comment'
     31: 
     32:     def test_add_obj_comment
     33:         @obj_comment_manager.add_obj_comment(*TEST_FIELDS.values)
  => 34:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     35:     end
     36: 
     37:     def test_del_obj_comment
===============================================================================
E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:17:in `test_create_obj_comment'
     14: 
     15:     def test_create_obj_comment
     16:         @obj_comment_manager.create_obj_comment(*TEST_FIELDS.values)
  => 17:         assert_equal(TEST_FIELDS[:r_type], @table.first[:r_type])
     18: 
     19:         replaced_feilds = TEST_FIELDS.merge(comment: "new_comment")
     20:         @obj_comment_manager.create_obj_comment(*replaced_feilds.values)
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:91:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:144:in `block in execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:141:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:54:in `test_create_table'
     51:     end
     52: 
     53:     def test_create_table
  => 54:         @db.run('drop table objcomment')
     55:         @obj_comment_manager.send :_create_table
     56:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     57:     end
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:38:in `test_del_obj_comment'
     35:     end
     36: 
     37:     def test_del_obj_comment
  => 38:         insert_comment_data
     39:         @obj_comment_manager.del_obj_comment(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     40:         assert_equal(0, @table.count)
     41:     end
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:44:in `test_get_comment_for_obj'
     41:     end
     42: 
     43:     def test_get_comment_for_obj
  => 44:         insert_comment_data
     45:         comment = @obj_comment_manager.get_comment_for_obj(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     46:         assert_equal(TEST_FIELDS[:comment], comment)
     47:     end
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:11:in `test_get_obj_comments'
      8:     TEST_FIELDS = {:identity => 'grid', :r_type => 'is_a_type', :comment => 'is_a_comment'}
      9: 
     10:     def test_get_obj_comments
  => 11:         insert_comment_data
     12:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     13:     end
     14: 
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:25:in `test_update_obj_identity'
     22:     end
     23: 
     24:     def test_update_obj_identity
  => 25:         insert_comment_data
     26:         replaced_feilds = TEST_FIELDS.merge(identity: "new_comment")
     27:         @obj_comment_manager.update_obj_identity(TEST_FIELDS[:identity], TEST_FIELDS[:type], "new_identity")
     28:         assert_equal("new_identity", @table.first[:identity])
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
............................................................N
===============================================================================
TestACL#test_create_acl was redefined [test_create_acl(TestACL)]
/root/zddiv3/tests/dns/acl_test.rb:4:in `<class:TestACL>'
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestACL)
/root/zddiv3/tests/dns/acl_test.rb:7:in `test_create_acl'
      4:     def test_create_acl
      5:         acl_data = {"ids" => ["aaa", "bbb", "ccc"]}
      6:         code, response = send_cmd("delete", "acls", acl_data)
  =>  7:         assert_equal(200, code)
      8: 
      9:         #acl_data = {"comment"=>"", "name"=>"acl1", "networks"=>["1.2.3.4", "2.2.2.0/24"], "current_user"=>"admin"}
     10:         #code, response = send_cmd("post", "acls", acl_data)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.Connection refused - connect(2) for "127.0.0.1" port 4571
F
===============================================================================
Failure:
test_get_alarm_thresholds(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:46:in `test_get_alarm_thresholds'
     43: 
     44:     def test_get_alarm_thresholds
     45:         code, response = send_cmd("get", "/alarm_thresholds", {}, ALARM_PORT)
  => 46:         assert_equal(200, code)
     47: 
     48:         db_path = DDI::ALARM_DB_FP
     49:         unless File.exist?(db_path)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_mail_alarm_config(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:29:in `test_mail_alarm_config'
     26:         } 
     27: 
     28:         code, response = send_cmd("put", "/config/email_alarm", conf_data)
  => 29:         assert_equal(421, code)
     30:         assert_equal(REQUIRE_PARAMS, response["error"])
     31: 
     32:         conf_data.merge!({"emerg_level_frequency":"6"})
<421> expected but was
<nil>

diff:
? 421
? nil
===============================================================================
[test_put_audit_networks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.6.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:18:in `test_put_audit_networks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_ips__timerange]
    PATH: /audit/ips/1622304000000-1622390400000
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_audit_ips__timerange(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:61:in `test_get_audit_ips__timerange'
     58:         puts req.to_s
     59:         code, response = send_cmd(req.method, req.path, req.params)
     60:         puts "RESPONSE: #{response}", "\n"
  => 61:         assert_equal(200, code)
     62:         assert_equal(response.class, Hash)
     63:         assert_include(response.keys, "resources")
     64:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_networks]
    PATH: /audit/networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:76:in `test_get_audit_networks'
     73:         puts req.to_s
     74:         code, response = send_cmd(req.method, req.path, req.params)
     75:         puts "RESPONSE: #{response}"
  => 76:         assert_equal(200, code)
     77:         assert_equal(response.class, Hash)
     78:         puts "--delete pool"
     79:         req.method = "delete"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authusers]
--create one
    PATH: /auth-users
  METHOD: post
  PARAMS: {"comment"=>"", "username"=>"test_user", "passwd"=>"Abc123", "rep_passwd"=>"Abc123", "name"=>"test", "mailbox"=>"x@125.com", "phone"=>"11111111111", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:18:in `test_post_authusers'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "id")
     21:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authusers]
    PATH: /auth-users
  METHOD: put
  PARAMS: {"name"=>"test222", "mailbox"=>"x@125.com", "phone"=>"11111111111", "ids"=>["test_user"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:49:in `test_put_authusers'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers]
    PATH: /auth-users
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:66:in `test_get_authusers'
     63:         puts req.to_s
     64:         code, response = send_cmd(req.method, req.path, req.params)
     65:         puts "RESPONSE: #{response}", "\n"
  => 66:         assert_equal(200, code)
     67:         assert_equal(response.class, Hash)
     68:         assert_include(response.keys, "resources")
     69:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers__auth_user]
    PATH: /auth-users/test_user
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers__auth_user(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:89:in `test_get_authusers__auth_user'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "id")
     92:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authusers]
    PATH: /auth-users
  METHOD: delete
  PARAMS: {"ids"=>["test_user", "user1", "user2", "user3"], "link_mac"=>true, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:105:in `test_delete_authusers'
     102:         puts req.to_s
     103:         code, response = send_cmd(req.method, req.path, req.params)
     104:         puts "RESPONSE: #{response}", "\n"
  => 105:         assert_equal(200, code)
     106:         assert_equal(response.class, Hash)
     107:         assert_include(response.keys, "result")
     108:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_auth_zone_tree_display(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:12:in `test_auth_zone_tree_display'
      9:         zone5 = {"zone_type"=>"auth", "name"=>"bb.slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10: 
     11:         code, response = send_cmd("post", "/views/default/zones", zone1);
  => 12:         assert_equal(code, 200)
     13:         code, response = send_cmd("post", "/views/default/zones", zone2);
     14:         assert_equal(code, 200)
     15:         code, response = send_cmd("post", "/views/default/zones", zone3);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

Test User Zone Display Style:
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_save_user_zone_display_style(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:87:in `test_save_user_zone_display_style'
     84:     def test_save_user_zone_display_style
     85:         print "\nTest User Zone Display Style:\n"
     86:         code, response = send_cmd("get", "/users/admin/zone_display_style", {"current_user" => "admin"})
  => 87:         assert_equal(code, 200)
     88:         print "\tGet zone_display_style:",response,"\n"
     89: 
     90:         code, response = send_cmd("put", "/users/admin/zone_display_style", {"zone_display_style" => "tree", "current_user" => "admin"})
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clean_resources(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:106:in `test_clean_resources'
     103:     def test_clean_resources
     104:         del_zones = {"ids"=>["@", "aa.slave", "bb.slave", "master", "slave"], "current_user"=>"admin"}
     105:         code, response = send_cmd("delete", "/views/default/zones", del_zones);
  => 106:         assert_equal(code, 200)
     107: 
     108:         del_user = {"ids"=>["grd"], "current_user"=>"admin"}
     109:         code, response = send_cmd("delete", "/users", del_user);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"s1", "type"=>"radius", "overtime"=>"5", "retry"=>"5", "style"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:17:in `test_post_authenticatepolicy'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: put
  PARAMS: {"overtime"=>"5", "retry"=>"10", "style"=>"1", "ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:33:in `test_put_authenticatepolicy'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:52:in `test_get_authenticatepolicy'
     49:         puts req.to_s
     50:         code, response = send_cmd(req.method, req.path, req.params)
     51:         puts "RESPONSE: #{response}", "\n"
  => 52:         assert_equal(200, code)
     53:         assert_equal(response.class, Hash)
     54:         assert_include(response.keys, "resources")
     55:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__id]
    PATH: /authenticate-policy/s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:74:in `test_get_authenticatepolicy__id'
     71:         puts req.to_s
     72:         code, response = send_cmd(req.method, req.path, req.params)
     73:         puts "RESPONSE: #{response}", "\n"
  => 74:         assert_equal(200, code)
     75:         assert_equal(response.class, Hash)
     76:         assert_include(response.keys, "id")
     77:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: post
  PARAMS: {"comment"=>"", "ip_addr"=>"1.1.1.1", "radius_port"=>"1812", "protocol"=>"PAP", "public_key"=>"1234567890", "public_key_2"=>"1234567890", "enable"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:91:in `test_post_authenticatepolicy__policyid_authenticates'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "id")
     94:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: put
  PARAMS: {"radius_port"=>"1812", "protocol"=>"CHAP", "public_key"=>"123456", "public_key_2"=>"123456", "enable"=>"no", "ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:108:in `test_put_authenticatepolicy__policyid_authenticates'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Array)
     110:         assert_equal(response.length, 1)
     111:         assert_include(response[0].keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:127:in `test_get_authenticatepolicy__policyid_authenticates'
     124:         puts req.to_s
     125:         code, response = send_cmd(req.method, req.path, req.params)
     126:         puts "RESPONSE: #{response}", "\n"
  => 127:         assert_equal(200, code)
     128:         assert_equal(response.class, Hash)
     129:         assert_include(response.keys, "resources")
     130:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates__id]
    PATH: /authenticate-policy/s1/authenticates/1.1.1.1$s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:150:in `test_get_authenticatepolicy__policyid_authenticates__id'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}", "\n"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "id")
     153:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy__policy_id_authenticates]
    PATH: /authenticate-policy/:policy_id/authenticates
  METHOD: delete
  PARAMS: {"ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy__policy_id_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:168:in `test_delete_authenticatepolicy__policy_id_authenticates'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "result")
     171:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: delete
  PARAMS: {"ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:184:in `test_delete_authenticatepolicy'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "result")
     187:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_post_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"acl1", "exp"=>[{"name"=>"vendor-class-identifier;60;string", "match"=>"equals", "value"=>"opt60-test"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:17:in `test_post_dhcpoptionacls'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: put
  PARAMS: {"exp"=>[{"name"=>"dhcp-parameter-request-list;55;array of unsigned integer 8", "match"=>"exists"}], "ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:33:in `test_put_dhcpoptionacls'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:56:in `test_get_dhcpoptionacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}", "\n"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Hash)
     58:         assert_include(response.keys, "resources")
     59:         assert_equal(response["resources"].length, 1)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls__name]
    PATH: /dhcp-option-acls/acl1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls__name(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:75:in `test_get_dhcpoptionacls__name'
     72:         puts req.to_s
     73:         code, response = send_cmd(req.method, req.path, req.params)
     74:         puts "RESPONSE: #{response}", "\n"
  => 75:         assert_equal(200, code)
     76:         assert_equal(response.class, Hash)
     77:         assert_include(response.keys, "id")
     78:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls__name_comment]
    PATH: /dhcp-option-acls/acl1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls__name_comment(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:92:in `test_put_dhcpoptionacls__name_comment'
     89:         puts req.to_s
     90:         code, response = send_cmd(req.method, req.path, req.params)
     91:         puts "RESPONSE: #{response}", "\n"
  => 92:         assert_equal(200, code)
     93:         assert_equal(response.class, Hash)
     94:         assert_include(response.keys, "id")
     95:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: delete
  PARAMS: {"ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:110:in `test_delete_dhcpoptionacls'
     107:         puts req.to_s
     108:         code, response = send_cmd(req.method, req.path, req.params)
     109:         puts "RESPONSE: #{response}", "\n"
  => 110:         assert_equal(200, code)
     111:         assert_equal(response.class, Hash)
     112:         assert_include(response.keys, "result")
     113:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"test", "protocol"=>"IPv4", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:17:in `test_post_dhcpoptionspaces'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], req.params["protocol"] + "$" + req.params["name"])
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:49:in `test_get_dhcpoptionspaces'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Hash)
     51:         assert_include(response.keys, "resources")
     52:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid]
    PATH: /dhcp-option-spaces/IPv4$test
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:70:in `test_get_dhcpoptionspaces__spaceid'
     67:         puts req.to_s
     68:         code, response = send_cmd(req.method, req.path, req.params)
     69:         puts "RESPONSE: #{response}", "\n"
  => 70:         assert_equal(200, code)
     71:         assert_equal(response.class, Hash)
     72:         assert_include(response.keys, "id")
     73:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_comment]
    PATH: /dhcp-option-spaces/IPv4$test/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_comment(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:87:in `test_put_dhcpoptionspaces__spaceid_comment'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "id")
     90:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"o1", "code"=>"55", "type"=>"ip-address", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:106:in `test_post_dhcpoptionspaces__spaceid_options'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: put
  PARAMS: {"code"=>"100", "type"=>"string", "ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:123:in `test_put_dhcpoptionspaces__spaceid_options'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Array)
     125:         assert_equal(response.length, 1)
     126:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:143:in `test_get_dhcpoptionspaces__spaceid_options'
     140:         puts req.to_s
     141:         code, response = send_cmd(req.method, req.path, req.params)
     142:         puts "RESPONSE: #{response}", "\n"
  => 143:         assert_equal(200, code)
     144:         assert_equal(response.class, Hash)
     145:         assert_include(response.keys, "resources")
     146:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options__optionid]
    PATH: /dhcp-option-spaces/IPv4$test/options/test$o1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options__optionid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:163:in `test_get_dhcpoptionspaces__spaceid_options__optionid'
     160:         puts req.to_s
     161:         code, response = send_cmd(req.method, req.path, req.params)
     162:         puts "RESPONSE: #{response}", "\n"
  => 163:         assert_equal(200, code)
     164:         assert_equal(response.class, Hash)
     165:         assert_include(response.keys, "id")
     166:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: delete
  PARAMS: {"ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:180:in `test_delete_dhcpoptionspaces__spaceid_options'
     177:         puts req.to_s
     178:         code, response = send_cmd(req.method, req.path, req.params)
     179:         puts "RESPONSE: #{response}", "\n"
  => 180:         assert_equal(200, code)
     181:         assert_equal(response.class, Hash)
     182:         assert_include(response.keys, "result")
     183:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: delete
  PARAMS: {"ids"=>["IPv4$test"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:196:in `test_delete_dhcpoptionspaces'
     193:         puts req.to_s
     194:         code, response = send_cmd(req.method, req.path, req.params)
     195:         puts "RESPONSE: #{response}", "\n"
  => 196:         assert_equal(200, code)
     197:         assert_equal(response.class, Hash)
     198:         assert_include(response.keys, "result")
     199:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_multidhcpresources]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.7.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_multidhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:22:in `test_post_multidhcpresources'
     19:         puts req.to_s
     20:         code, response = send_cmd(req.method, req.path, req.params)
     21:         puts "RESPONSE: #{response}"
  => 22:         assert_equal(200, code)
     23:         assert_equal(response.class, Hash)
     24:         puts "--create template"
     25:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_dhcpresources]
--create pool one
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: post
  PARAMS: {"comment"=>"", "type"=>"dynamic", "ip_start"=>"3.0.7.1", "ip_end"=>"3.0.7.2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:68:in `test_post_networks__network_dhcpresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: put
  PARAMS: {"default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"1000", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "type"=>"dynamic", "max_value"=>"86400", "min_value"=>"1000", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["3.0.7.1-3.0.7.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:99:in `test_put_networks__network_dhcpresources'
      96:         puts req.to_s
      97:         code, response = send_cmd(req.method, req.path, req.params)
      98:         puts "RESPONSE: #{response}", "\n"
  =>  99:         assert_equal(200, code)
     100:         assert_equal(response.class, Array)
     101:         assert_equal(response.length, 1)
     102:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:119:in `test_get_networks__network_dhcpresources__resourceid'
     116:         puts req.to_s
     117:         code, response = send_cmd(req.method, req.path, req.params)
     118:         puts "RESPONSE: #{response}", "\n"
  => 119:         assert_equal(200, code)
     120:         assert_equal(response.class, Hash)
     121:         assert_include(response.keys, "id")
     122:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:135:in `test_get_networks__network_dhcpresources'
     132:         puts req.to_s
     133:         code, response = send_cmd(req.method, req.path, req.params)
     134:         puts "RESPONSE: #{response}", "\n"
  => 135:         assert_equal(200, code)
     136:         assert_equal(response.class, Hash)
     137:         assert_include(response.keys, "resources")
     138:         assert_equal(response["resources"].length, 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:157:in `test_put_networks__network_dhcpresources__resourceid_ddnsconfig'
     154:         puts req.to_s
     155:         code, response = send_cmd(req.method, req.path, req.params)
     156:         puts "RESPONSE: #{response}", "\n"
  => 157:         assert_equal(200, code)
     158:         assert_equal(response.class, Hash)
     159:         assert_include(response.keys, "ddns_domainname")
     160:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:173:in `test_get_networks__network_dhcpresources__resourceid_ddnsconfig'
     170:         puts req.to_s
     171:         code, response = send_cmd(req.method, req.path, req.params)
     172:         puts "RESPONSE: #{response}", "\n"
  => 173:         assert_equal(200, code)
     174:         assert_equal(response.class, Hash)
     175:         assert_include(response.keys, "ddns_domainname")
     176:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_dhcpresources]
--delete pool
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: delete
  PARAMS: {"ids"=>["3.0.7.1-3.0.7.2", "3.0.7.11-3.0.7.12", "3.0.7.13-3.0.7.14", "3.0.7.3-3.0.7.4"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:261:in `test_delete_networks__network_dhcpresources'
     258:         puts req.to_s
     259:         code, response = send_cmd(req.method, req.path, req.params)
     260:         puts "RESPONSE: #{response}"
  => 261:         assert_equal(200, code)
     262:         assert_equal(response.class, Hash)
     263:         assert_include(response.keys, "result")
     264:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"t", "type"=>"ipv4-dynamic", "offset"=>"1", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:17:in `test_post_dhcptemplates'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: put
  PARAMS: {"offset"=>"3", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:33:in `test_put_dhcptemplates'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name]
    PATH: /dhcp-templates/t
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:53:in `test_get_dhcptemplates__name'
     50:         puts req.to_s
     51:         code, response = send_cmd(req.method, req.path, req.params)
     52:         puts "RESPONSE: #{response}", "\n"
  => 53:         assert_equal(200, code)
     54:         assert_equal(response.class, Hash)
     55:         assert_include(response.keys, "id")
     56:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:68:in `test_get_dhcptemplates'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "resources")
     71:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:91:in `test_get_dhcptemplates__name_ddnsconfig'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "enable_ddns")
     94:         assert_equal(response["enable_ddns"], "no")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:108:in `test_put_dhcptemplates__name_ddnsconfig'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "ddns_domainname")
     111:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_comment]
    PATH: /dhcp-templates/t/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_comment(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:125:in `test_put_dhcptemplates__name_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "comment")
     128:         assert_equal(response["comment"], "just for test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: delete
  PARAMS: {"ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:141:in `test_delete_dhcptemplates'
     138:         puts req.to_s
     139:         code, response = send_cmd(req.method, req.path, req.params)
     140:         puts "RESPONSE: #{response}", "\n"
  => 141:         assert_equal(200, code)
     142:         assert_equal(response.class, Hash)
     143:         assert_include(response.keys, "result")
     144:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls]
--fingerprint acl
    PATH: /dhcp-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fp_acl", "type"=>"fingerprint", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:18:in `test_post_dhcpacls'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_include(response["name"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls]
--modify
    PATH: /dhcp-acls
  METHOD: put
  PARAMS: {"comment"=>"", "ids"=>["option_acl", "fp_acl"], "type"=>"macs", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:56:in `test_put_dhcpacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Array)
     58:         assert_equal(response.length, 2)
     59:         response.each do |r| 
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls]
    PATH: /dhcp-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:90:in `test_get_dhcpacls'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl]
    PATH: /dhcp-acls/fp_acl
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:108:in `test_get_dhcpacls__acl'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls__acl_comment]
    PATH: /dhcp-acls/fp_acl/comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpacls__acl_comment(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:125:in `test_put_dhcpacls__acl_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "id")
     128:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: post
  PARAMS: {"macs_file"=>"", "resources"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:145:in `test_post_dhcpacls__acl_aclresources'
     142:         puts req.to_s
     143:         code, response = send_cmd(req.method, req.path, req.params)
     144:         puts "RESPONSE: #{response}"
  => 145:         assert_equal(200, code)
     146:         assert_equal(response.class, Array)
     147:         assert_equal(response.length, 2)
     148:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:206:in `test_get_dhcpacls__acl_aclresources'
     203:         puts req.to_s
     204:         code, response = send_cmd(req.method, req.path, req.params)
     205:         puts "RESPONSE: #{response}"
  => 206:         assert_equal(200, code)
     207:         assert_equal(response.class, Hash)
     208:         assert_include(response.keys, "resources")
     209:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources__resource]
    PATH: /dhcp-acls/mac_acl/acl-resources/00:22:22:22:22:22
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources__resource(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:256:in `test_get_dhcpacls__acl_aclresources__resource'
     253:         puts req.to_s
     254:         code, response = send_cmd(req.method, req.path, req.params)
     255:         puts "RESPONSE: #{response}", "\n"
  => 256:         assert_equal(200, code)
     257:         assert_equal(response.class, Array)
     258:         assert_equal(response.length, 1)
     259:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: delete
  PARAMS: {"ids"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:276:in `test_delete_dhcpacls__acl_aclresources'
     273:         puts req.to_s
     274:         code, response = send_cmd(req.method, req.path, req.params)
     275:         puts "RESPONSE: #{response}"
  => 276:         assert_equal(200, code)
     277:         assert_equal(response.class, Hash)
     278:         assert_include(response.keys, "result")
     279:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls]
    PATH: /dhcp-acls
  METHOD: delete
  PARAMS: {"ids"=>["fp_acl", "mac_acl", "option_acl"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:311:in `test_delete_dhcpacls'
     308:         puts req.to_s
     309:         code, response = send_cmd(req.method, req.path, req.params)
     310:         puts "RESPONSE: #{response}", "\n"
  => 311:         assert_equal(200, code)
     312:         assert_equal(response.class, Hash)
     313:         assert_include(response.keys, "result")
     314:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:8:in `_test_put_base_safe'
(eval):1:in `test_put_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
Base_Safes: 
F
===============================================================================
Failure:
test_get_nodes_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:27:in `_test_get_nodes_base_safe'
(eval):1:in `test_get_nodes_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_servfail]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_servfail(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:37:in `_test_put_servfail'
(eval):1:in `test_put_servfail'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_high_performance]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_high_performance(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:49:in `_test_put_high_performance'
(eval):1:in `test_put_high_performance'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_concurrent_recursion_count]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_concurrent_recursion_count(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:57:in `_test_put_concurrent_recursion_count'
(eval):1:in `test_put_concurrent_recursion_count'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_security]
Connection refused - connect(2) for "127.0.0.1" port 20120
Recurity servfail: 
F
===============================================================================
Failure:
test_get_nodes_security(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:74:in `block in _test_get_nodes_security'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `each'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `_test_get_nodes_security'
(eval):1:in `test_get_nodes_security'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_nodes_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_nodes_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:82:in `_test_nodes_cache_clean'
(eval):1:in `test_nodes_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:89:in `_test_node_cache_clean'
(eval):1:in `test_node_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_search]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_search(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:96:in `_test_node_cache_search'
(eval):1:in `test_node_cache_search'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_cache_config]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_cache_config(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:103:in `_test_put_cache_config'
(eval):1:in `test_put_cache_config'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"444444", "vendor_class_identifier"=>"555555", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:18:in `test_post_dhcpfingerprints'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_equal(response["name"], "fingerprint_test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: put
  PARAMS: {"type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:36:in `test_put_dhcpfingerprints'
     33:         puts req.to_s
     34:         code, response = send_cmd(req.method, req.path, req.params)
     35:         puts "RESPONSE: #{response}", "\n"
  => 36:         assert_equal(200, code)
     37:         assert_equal(response.class, Array)
     38:         assert_equal(response.length, 1)
     39:         assert_include(response[0].keys, "name")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_dhcpfingerprints(TestFingerprints)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/ipam/fingerprints_test.rb:53:in `test_get_dhcpfingerprints'
     50:         req.params.merge!({"current_user"=>"admin"})
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
  => 53:         puts "RESPONSE: Response too large. Total number of fingerprints is #{response["resources"].length.to_s}", "\n"
     54:         assert_equal(200, code)
     55:         assert_equal(response.class, Hash)
     56:         assert_include(response.keys, "resources")
===============================================================================
[test_get_dhcpfingerprints__id]
    PATH: /dhcp-fingerprints/
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints__id(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:69:in `test_get_dhcpfingerprints__id'
     66:         puts req.to_s
     67:         code, response = send_cmd(req.method, req.path, req.params)
     68:         puts "RESPONSE: #{response}", "\n"
  => 69:         assert_equal(200, code)
     70:         assert_equal(response.class, Hash)
     71:         assert_include(response.keys, "id")
     72:         assert_equal(response["id"],  @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprinttype]
    PATH: /dhcp-fingerprint-type
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprinttype(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:84:in `test_get_dhcpfingerprinttype'
     81:         puts req.to_s
     82:         code, response = send_cmd(req.method, req.path, req.params)
     83:         puts "RESPONSE: #{response}", "\n"
  => 84:         assert_equal(200, code)
     85:         assert_equal(response.class, Array)
     86:         response.each do |r|
     87:             assert_include(["Others", "Switch", "Apple", "Router", "Printer", "Linux", "Android", "Windows", "AP"], r)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints__id_comment]
    PATH: /dhcp-fingerprints//comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "id"=>nil, "write_access"=>1, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints__id_comment(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:102:in `test_put_dhcpfingerprints__id_comment'
      99:         puts req.to_s
     100:         code, response = send_cmd(req.method, req.path, req.params)
     101:         puts "RESPONSE: #{response}", "\n"
  => 102:         assert_equal(200, code)
     103:         assert_equal(response.class, Hash)
     104:         assert_include(response.keys, "id")
     105:         assert_equal(response["id"], @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints_update]
    PATH: /dhcp-fingerprints/update
  METHOD: post
  PARAMS: {"file_content"=>"MjAxNi0wOS0yMixrbmV0LXpkbnMKQW5kcm9pZCxHYWxheHkgUzJYLCIxLDMz\nLDMsNiwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0zLjAuMTUt\nMTE0OTcyOTphcm12N2w6U01ESzQyMTAKQW5kcm9pZCxHYWxheHkgUzNZLCIx\nLDMzLDMsNiwxNSwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0z\nLjAuOC0xMTMxNDgzOmFybXY3bDpTQU1TVU5HIE0yX1ZaVw==\n", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints_update(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:122:in `test_post_dhcpfingerprints_update'
     119:         puts req.to_s
     120:         code, response = send_cmd(req.method, req.path, req.params)
     121:         puts "RESPONSE: #{response}", "\n"
  => 122:         assert_equal(200, code)
     123:         assert_equal(response.class, Hash)
     124:         assert_include(response.keys, "result")
     125:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints_update_version]
    PATH: /dhcp-fingerprints/update/version
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints_update_version(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:137:in `test_get_dhcpfingerprints_update_version'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "version")
     140:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: delete
  PARAMS: {"ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:152:in `test_delete_dhcpfingerprints'
     149:         puts req.to_s
     150:         code, response = send_cmd(req.method, req.path, req.params)
     151:         puts "RESPONSE: #{response}", "\n"
  => 152:         assert_equal(200, code)
     153:         assert_equal(response.class, Hash)
     154:         assert_include(response.keys, "result")
     155:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:8:in `_test_create_forward_zone'
(eval):1:in `test_create_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:24:in `_test_batch_add_forward_zone'
(eval):1:in `test_batch_add_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:39:in `_test_update_forward_zone'
(eval):1:in `test_update_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone_owners(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:47:in `_test_update_forward_zone_owners'
(eval):1:in `test_update_forward_zone_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_forward_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_forward_zone_comment(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:63:in `_test_put_forward_zone_comment'
(eval):1:in `test_put_forward_zone_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:71:in `_test_del_forward_zone'
(eval):1:in `test_del_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clear_offline_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:180:in `test_clear_offline_webcliuser'
     177: 
     178:     def test_clear_offline_webcliuser
     179:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => "127.0.0.1"})
  => 180:         assert_equal(200, code)
     181: 
     182:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => ""})
     183:         assert_equal(422, code)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_creat_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:195:in `block in test_creat_webcliuser'
     192:     def test_creat_webcliuser
     193:         (1..6).each do
     194:             code, response = send_cmd("post", "/webcli/open-webcli", {"host" => "127.0.0.1"})
  => 195:             assert_equal(200, code)
     196:             assert_equal(true, !response["username"].empty?)
     197:         end
     198: 
/root/zddiv3/tests/grid/grid_test.rb:193:in `each'
/root/zddiv3/tests/grid/grid_test.rb:193:in `test_creat_webcliuser'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.....sh: useradd: command not found
passwd: Unknown user name '_webclikZ6Iv5'.
sh: useradd: command not found
passwd: Unknown user name '_webcli5rH0Kg'.
sh: useradd: command not found
passwd: Unknown user name '_webcli7XyK9b'.
F
===============================================================================
Failure:
test_create_username3(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:244:in `rescue in test_create_username3'
/root/zddiv3/tests/grid/grid_test.rb:242:in `test_create_username3'
     239:     end
     240: 
     241:     def test_create_username3
  => 242:         create_webcli_user
     243:     rescue Exception => e
     244:         assert_equal("create user success", "CREATE_WEBCLI_CONNECT_ERR")
     245:     end
<"create user success"> expected but was
<"CREATE_WEBCLI_CONNECT_ERR">

diff:
? create user success      
? CREATE_WEBCLI_CONNECT_ERR
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_is_incluster(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:220:in `test_is_incluster'
     217:         else
     218:             # attention for single node, node name:local.master
     219:             code, response = send_cmd("get", "/groups/local/members/master", {"current_user"=>"admin"})
  => 220:             assert_equal(200, code)
     221:             assert_equal("yes", response["is_in_cluster"])
     222:         end
     223:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_login(TestGrid)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/grid/grid_test.rb:22:in `test_login'
     19:     def test_login
     20:         # admin login
     21:         code, response = _login("admin", DDI::Crypt.rsa_encrypt("admin"))
  => 22:         assert_equal(2, response["fcm_cloud"])
     23:         assert_equal(2, response["cloud_core_toolbar"])
     24: 
     25:         # crate test, with fcm_cloud = 0 cloud_core_toolbar = 1
===============================================================================
mv: cannot stat `/etc/issue_tmp': No such file or directory
E
===============================================================================
Error: test_system_loop(TestGrid)
: Errno::ENOENT: No such file or directory - ntpdate
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in ``'
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in `test_system_loop'
     19:     rescue Exception => e
     20:         puts "#{e},\n#{$@[0..20]}"
     21:     ensure
  => 22:         `ntpdate ntp1.aliyun.com`
     23:     end
     24: end
===============================================================================
..........
[_test_add_ip_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_ip_rrl(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:8:in `_test_add_ip_rrl'
(eval):1:in `test_add_ip_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:21:in `_test_update_ip_rrls'
(eval):1:in `test_update_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls_owners(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:38:in `_test_update_ip_rrls_owners'
(eval):1:in `test_update_ip_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_ip_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_ip_rrl_comment(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:55:in `_test_set_ip_rrl_comment'
(eval):1:in `test_set_ip_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
IP-rrls: 
F
===============================================================================
Failure:
test_get_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:48:in `_test_get_ip_rrls'
(eval):1:in `test_get_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:64:in `_test_del_ip_rrls'
(eval):1:in `test_del_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_put_ipamconfig]
    PATH: /ipam-config
  METHOD: put
  PARAMS: {"comment"=>"", "zombie_time"=>"110", "enable_port_alarm"=>"yes", "enable_conflict_check"=>"yes", "enable_unmanaged_check"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:17:in `test_put_ipamconfig'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert(response.has_key?("zombie_time") && response["zombie_time"].eql?("110"))
     20:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamconfig]
    PATH: /ipam-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:31:in `test_get_ipamconfig'
     28:         puts req.to_s
     29:         code, response = send_cmd(req.method, req.path, req.params)
     30:         puts "RESPONSE: #{response}", "\n"
  => 31:         assert_equal(200, code)
     32:         assert_equal(response.class, Hash)
     33:         assert response.keys.length.eql?(4)
     34:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamsearchresources]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr1", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:19:in `test_get_ipamsearchresources'
     16:         puts req.to_s
     17:         code, response = send_cmd(req.method, req.path, req.params)
     18:         puts "RESPONSE: #{response}"
  => 19:         assert_equal(200, code)
     20:         assert_equal(response.class, Array)
     21:         assert_equal(response.length, 1)
     22:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_ipamsearchresources]
    PATH: /ipam-search-resources
  METHOD: put
  PARAMS: {""=>"101", "_in"=>"no", "ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:68:in `test_put_ipamsearchresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Array)
     70:         assert_equal(response.length, 1)
     71:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_ipamsearchresources]
--delete search
    PATH: /ipam-search-resources
  METHOD: delete
  PARAMS: {"ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:87:in `test_delete_ipamsearchresources'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         puts "--delete user defined attribute"
     90:         req.method = "put"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
200
{"result"=>"service already inited"}
200
{"cpu_usage"=>"0.04", "memory_usage"=>"0.28", "disk_usage"=>"0.85", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-06-01 00:00:00", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.[test_post_macinformations]
    PATH: /mac-informations
  METHOD: post
  PARAMS: {"comment"=>"", "MAC"=>"00:01:01:01:01:01", "nic_port"=>["eth1", "eth2", "eth3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:18:in `test_post_macinformations'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "MAC")
     21:         assert_include(response["MAC"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_macinformations]
    PATH: /mac-informations
  METHOD: put
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "nic_port"=>["eth1", "eth0"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:34:in `test_put_macinformations'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert_equal(response.length, 1)
     37:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations]
    PATH: /mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:51:in `test_get_macinformations'
     48:         puts req.to_s
     49:         code, response = send_cmd(req.method, req.path, req.params)
     50:         puts "RESPONSE: #{response}", "\n"
  => 51:         assert_equal(200, code)
     52:         assert_equal(response.class, Hash)
     53:         assert_include(response.keys, "resources")
     54:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations__mac]
    PATH: /mac-informations/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations__mac(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:71:in `test_get_macinformations__mac'
     68:         puts req.to_s
     69:         code, response = send_cmd(req.method, req.path, req.params)
     70:         puts "RESPONSE: #{response}", "\n"
  => 71:         assert_equal(200, code)
     72:         assert_equal(response.class, Hash)
     73:         assert_include(response.keys, "id")
     74:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_macinformations]
    PATH: /mac-informations
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:87:in `test_delete_macinformations'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "result")
     90:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
E
===============================================================================
Error: test_all_customer_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:112:in `test_all_customer_menus'
     109:     end
     110: 
     111:     def test_all_customer_menus
  => 112:         m = _menu_manager.all_customer_menus
     113:         check_result("all_customer_menus", m){|m| !m.nil?}
     114:     end
     115: 
===============================================================================
E
===============================================================================
Error: test_all_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:107:in `test_all_menus'
     104:     end
     105: 
     106:     def test_all_menus
  => 107:         m = _menu_manager.all_menus
     108:         check_result("all_menus", m){|m| !m.nil?}
     109:     end
     110: 
===============================================================================
E
===============================================================================
Error: test_all_system_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:117:in `test_all_system_menus'
     114:     end
     115: 
     116:     def test_all_system_menus
  => 117:         m = _menu_manager.all_system_menus
     118:         check_result("all_system_menus", m){|m| !m.nil?}
     119:     end
     120: end
===============================================================================
Test analyse_items                            --> Success
.E
===============================================================================
Error: test_calc_start_end_time(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bce68>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:182:in `test_calc_start_end_time'
     179:     end
     180: 
     181:     def test_calc_start_end_time
  => 182:         result _report_task.calc_start_end_time(Time.now.to_i, Time.now.to_i)
     183:         check_result("calc_start_end_time", result){|result| !result.nil?}
     184:     end
     185: 
===============================================================================
E
===============================================================================
Error: test_calc_start_end_time2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bcda0>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:233:in `test_calc_start_end_time2'
     230:     end
     231: 
     232:     def test_calc_start_end_time2
  => 233:         result = _task_schedul.calc_start_end_time(nil, nil)
     234:         check_result("calc_start_end_time", result){|result| !result.nil?}
     235:     end
     236: 
===============================================================================
E
===============================================================================
Error: test_delete_by_ids(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:102:in `test_delete_by_ids'
      99:     end
     100: 
     101:     def test_delete_by_ids
  => 102:         _item_manager.delete_by_ids(["1"])
     103:     end
     104: 
     105:     def test_delete_overtime_report
===============================================================================
.N
===============================================================================
TestMenu#test_delete_generate was redefined [test_delete_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:153:in `<class:TestMenu>'
===============================================================================
Test delete_generate                          --> Success
.E
===============================================================================
Error: test_delete_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:84:in `test_delete_menu'
     81: 
     82:     def test_delete_menu
     83:         params = {"lang" => "en", "ids" => [9]}
  => 84:         menus = _menu_manager.delete_menu(params)
     85:         check_result("delete_menu", menus){|menus| !menus.nil?}
     86:     end
     87: 
===============================================================================
Test delete_network_pool                      --> Success
..E
===============================================================================
Error: test_delete_report_list(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:776:in `delete_report_list'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:81:in `test_delete_report_list'
     78:     end
     79: 
     80:     def test_delete_report_list
  => 81:         result = _report_manager.delete_report_list(["1"])
     82:         check_result("delete_report_list", result){|result| !result.nil?}
     83:     end
     84: 
===============================================================================
Test deploy                                   --> Success
.Test fetch_conf-topn                          --> Success
Test fetch_conf-lease                         --> Success
.N
===============================================================================
TestMenu#test_fetch_generate was redefined [test_fetch_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:116:in `<class:TestMenu>'
===============================================================================
Test fetch_generate                           --> Success
.Test fetch_mail_config                        --> Success
.E
===============================================================================
Error: test_fetch_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:66:in `test_fetch_menu'
     63: 
     64:     def test_fetch_menu
     65:         params = {"lang" => "en"}
  => 66:         menus = _menu_manager.fetch_menu(params)
     67:         check_result("fetch_menu", menus){|menus| !menus.nil?}
     68:     end
     69: 
===============================================================================
Test update_network_pool                      --> Success
.Test fetch_report_list                        --> Success
.N
===============================================================================
TestMenu#test_generate_report_manual was redefined [test_generate_report_manual(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:158:in `<class:TestMenu>'
===============================================================================
Test generate_report_manual                   --> Success
.Test has_mail_config                          --> Success
.E
===============================================================================
Error: test_lookup_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:102:in `test_lookup_menu'
      99:     def test_lookup_menu
     100:         menu   = DDI::STATS::GridStatsMenu.new("cpu_like", "cpu_like", DDI::STATS::MENU_TYPE_SYSTEM)
     101: 
  => 102:         m = _menu_manager.lookup_menu(menu)
     103:         check_result("menu_deploy", m){|m| !m.nil?}
     104:     end
     105: 
===============================================================================
E
===============================================================================
Error: test_menu_deploy(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:95:in `test_menu_deploy'
     92:             {"id"=>"slave24", "ip"=>"10.1.108.24", "type"=>"ZDNS", "state"=>"warning", "is_master"=>false, "is_backup"=>false, "is_am"=>false }
     93:         ]}]
     94: 
  => 95:         deploy = _menu_manager.menu_deploy(menu, groups)
     96:         check_result("menu_deploy", deploy){|deploy| !deploy.nil?}
     97:     end
     98: 
===============================================================================
N
===============================================================================
TestMenu#test_modify_generate was redefined [test_modify_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:137:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_modify_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bc080>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:149:in `test_modify_generate'
     146:         available = "yes"
     147:         max_report = 5
     148: 
  => 149:         result = _scheduler_manager.modify_generate(["1"], name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     150:         check_result("modify_generate", result){|result| !result.nil?}
     151:     end
     152: 
===============================================================================
Test modify_mail_config                       --> Success
.Test name                                     --> Success
.Test name_equal                               --> Success
.N
===============================================================================
TestMenu#test_new_generate was redefined [test_new_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:121:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_new_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bf348>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:133:in `test_new_generate'
     130:         available = "yes"
     131:         max_report = 5
     132:         
  => 133:         result = _scheduler_manager.new_generate(name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     134:         check_result("new_generate", result){|result| !result.nil?}
     135:     end
     136: 
===============================================================================
E
===============================================================================
Error: test_new_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:72:in `test_new_menu'
     69: 
     70:     def test_new_menu
     71:         params = {"lang" => "en", "name" => "TMENU"}
  => 72:         menus = _menu_manager.new_menu(params)
     73:         check_result("new_menu", menus){|menus| !menus.nil?}
     74:     end
     75: 
===============================================================================
Test report_send_mail                         --> Success
.Test report_send_mail                         --> Success
.E
===============================================================================
Error: test_run1(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bbe50>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:190:in `test_run1'
     187:         is_schedule = true
     188:         start_time = Time.now.to_i - 3600
     189:         end_time  = Time.now.to_i 
  => 190:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     191:     end
     192:     def test_run2
     193:         is_schedule = false
===============================================================================
E
===============================================================================
Error: test_run2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bbdb0>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:196:in `test_run2'
     193:         is_schedule = false
     194:         start_time = Time.now.to_i - 3600
     195:         end_time  = Time.now.to_i 
  => 196:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     197:     end
     198: 
     199:     def test_should_run?
===============================================================================
E
===============================================================================
Error: test_should_run2?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bbd10>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:228:in `test_should_run2?'
     225:     end
     226: 
     227:     def test_should_run2?
  => 228:         result = _task_schedul.should_run?
     229:         check_result("should_run?", result){|result| !result.nil?}
     230:     end
     231: 
===============================================================================
E
===============================================================================
Error: test_should_run?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bbc70>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:200:in `test_should_run?'
     197:     end
     198: 
     199:     def test_should_run?
  => 200:         result = _report_task.should_run?
     201:         check_result("should_run?", result){|result| !result.nil?}
     202:     end
     203: 
===============================================================================
E
===============================================================================
Error: test_test_mail_config(TestMenu)
: RuntimeError: 20002018010710
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:101:in `rescue in test_mail_config'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:96:in `test_mail_config'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:284:in `test_test_mail_config'
     281:         enable_verify = "yes"
     282:         from_address = "zhangxiao@zdns"
     283:         passwd = "123456"
  => 284:         result = _mail_manager.test_mail_config(server, port, account, enable_verify, from_address, passwd)
     285:         check_result("test_mail_config", result){|result| !result.nil?}
     286:     end
     287: 
===============================================================================
N
===============================================================================
TestMenu#test_to_hash was redefined [test_to_hash(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:204:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_to_hash(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x000000081bbae0>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:205:in `test_to_hash'
     202:     end
     203: 
     204:     def test_to_hash
  => 205:         result = _report_task.to_hash
     206:         check_result("to_hash", result){|result| !result.nil?}
     207:     end
     208: 
===============================================================================
E
===============================================================================
Error: test_update_conf(TestMenu)
: NoMethodError: undefined method `update_conf' for #<DDI::STATS::WasuUsageSetting:0x00000001cfa8b8>
/root/zddiv3/tests/unit/am/network_pool_test.rb:82:in `test_update_conf'
     79:     end
     80: 
     81:     def test_update_conf
  => 82:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_USAGE_TOPN, [], 0)
     83:         check_result("update_conf-topn", result){|result| !result.nil?}
     84: 
     85:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_LEASES_USAGE, [], 30)
===============================================================================
E
===============================================================================
Error: test_update_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:78:in `test_update_menu'
     75: 
     76:     def test_update_menu
     77:         params = {"lang" => "en", "ids" => [8], "priority" => 2}
  => 78:         menus = _menu_manager.update_menu(params)
     79:         check_result("update_menu", menus){|menus| !menus.nil?}
     80:     end
     81: 
===============================================================================
Test update_network_pool                      --> Success
.
[_test_add_name_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_name_rrl(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:8:in `_test_add_name_rrl'
(eval):1:in `test_add_name_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:21:in `_test_update_name_rrls'
(eval):1:in `test_update_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls_owners(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:38:in `_test_update_name_rrls_owners'
(eval):1:in `test_update_name_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_name_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_name_rrl_comment(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:55:in `_test_set_name_rrl_comment'
(eval):1:in `test_set_name_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
Name-rrls: 
F
===============================================================================
Failure:
test_get_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:48:in `_test_get_name_rrls'
(eval):1:in `test_get_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:64:in `_test_del_name_rrls'
(eval):1:in `test_del_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_multinetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.1.0/28", "3.0.2.0/28", "3.0.3.0/28"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response valid resource.
F
===============================================================================
Failure:
test_post_multinetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:19:in `test_post_multinetworks'
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
     18:         puts "[warn] This interface does not response valid resource.\n"
  => 19:         assert_equal(200, code)
     20:     end
     21: 
     22:     def test_post_importnetworks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_importnetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"resource_content"=>[{"network"=>"1.0.0.0/24", "owners"=>["local.master"]}, {"network"=>"2.0.0.0/24", "owners"=>["local.master"]}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_post_importnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:33:in `test_post_importnetworks'
     30:         code, response = send_cmd(req.method, req.path, req.params)
     31:         puts "RESPONSE: #{response}"
     32:         puts "[warn] This interface does not response a valid resouce.\n"
  => 33:         assert_equal(200, code)
     34:     end
     35: 
     36:     def test_post_networks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks]
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.0.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:47:in `test_post_networks'
     44:         puts req.to_s
     45:         code, response = send_cmd(req.method, req.path, req.params)
     46:         puts "RESPONSE: #{response}", "\n"
  => 47:         assert_equal(200, code)
     48:         assert_equal(response.class, Hash)
     49:         assert_include(response.keys, "id")
     50:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr", "type"=>"text", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:64:in `test_put_networks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Array)
     66:         assert_equal(response.length, 1)
     67:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks]
    PATH: /networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:118:in `test_get_networks'
     115:         puts req.to_s
     116:         code, response = send_cmd(req.method, req.path, req.params)
     117:         puts "RESPONSE: #{response}", "\n"
  => 118:         assert_equal(200, code)
     119:         assert_equal(response.class, Hash)
     120:         assert_include(response.keys, "resources")
     121:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_leafnetworks]
    PATH: /leaf-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_leafnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:134:in `test_get_leafnetworks'
     131:         puts req.to_s
     132:         code, response = send_cmd(req.method, req.path, req.params)
     133:         puts "RESPONSE: #{response}", "\n"
  => 134:         assert_equal(200, code)
     135:         assert_equal(response.class, Hash)
     136:         assert_include(response.keys, "resources")
     137:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network]
    PATH: /networks/3.0.0.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:151:in `test_get_networks__network'
     148:         puts req.to_s
     149:         code, response = send_cmd(req.method, req.path, req.params)
     150:         puts "RESPONSE: #{response}", "\n"
  => 151:         assert_equal(200, code)
     152:         assert_equal(response.class, Hash)
     153:         assert_include(response.keys, "id")
     154:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "domain_name"=>"", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"43200", "def_value"=>"43200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"9000", "max_value"=>"86400", "max_unit"=>"1", "min_lease_time"=>"800", "min_value"=>"800", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:168:in `test_put_networks__network_dhcpconfig'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "max_lease_time")
     171:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:184:in `test_get_networks__network_dhcpconfig'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "max_lease_time")
     187:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: put
  PARAMS: {"hardware_ethernet"=>"00:11:12:12:12:31", "type"=>"manual", "nic_port"=>[""], "ids"=>["3.0.0.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:201:in `test_put_networks__network_addressinfos'
     198:         puts req.to_s
     199:         code, response = send_cmd(req.method, req.path, req.params)
     200:         puts "RESPONSE: #{response}", "\n"
  => 201:         assert_equal(200, code)
     202:         assert_equal(response.class, Array)
     203:         assert_equal(response.length, 1)
     204:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:221:in `test_get_networks__network_addressinfos'
     218:         puts req.to_s
     219:         code, response = send_cmd(req.method, req.path, req.params)
     220:         puts "RESPONSE: #{response}", "\n"
  => 221:         assert_equal(200, code)
     222:         assert_equal(response.class, Hash)
     223:         assert_include(response.keys, "total_size")
     224:         assert_equal(response["total_size"], 16)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_delete_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:240:in `test_delete_networks__network_addressinfos'
     237:         code, response = send_cmd(req.method, req.path, req.params)
     238:         puts "RESPONSE: #{response}"
     239:         puts "[warn] This interface does not response a valid resouce.\n"
  => 240:         assert_equal(200, code)
     241:     end
     242: 
     243:     def test_post_networks__network_addressinfos_importmanualaddresses
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_addressinfos_importmanualaddresses]
    PATH: /networks/3.0.0.0$28/addressinfos/import-manual-addresses
  METHOD: post
  PARAMS: {"resource_content"=>[{"ip_addr"=>"3.0.0.3", "hardware_ethernet"=>"00:11:22:33:44:01", "nic_port"=>"eth2"}, {"ip_addr"=>"3.0.0.4", "hardware_ethernet"=>"00:11:22:33:44:02", "nic_port"=>"eth3"}, {"ip_addr"=>"3.0.0.5", "hardware_ethernet"=>"00:11:22:33:44:03", "nic_port"=>"eth4"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_addressinfos_importmanualaddresses(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:254:in `test_post_networks__network_addressinfos_importmanualaddresses'
     251:         puts req.to_s
     252:         code, response = send_cmd(req.method, req.path, req.params)
     253:         puts "RESPONSE: #{response}", "\n"
  => 254:         assert_equal(200, code)
     255:         assert_equal(response.class, Array)
     256:         assert_equal(response.length, 3)
     257:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_resize]
--expand network
    PATH: /networks/3.0.0.0$28/resize
  METHOD: post
  PARAMS: {"netmask"=>"25", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_resize(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:274:in `test_post_networks__network_resize'
     271:         puts req.to_s
     272:         code, response = send_cmd(req.method, req.path, req.params)
     273:         puts "RESPONSE: #{response}"
  => 274:         assert_equal(200, code)
     275:         assert_equal(response.class, Hash)
     276:         assert_include(response.keys, "id")
     277:         assert_equal(response["id"], "3.0.0.0$25")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_split]
    PATH: /networks/3.0.0.0$28/split
  METHOD: post
  PARAMS: {"netmask"=>"30", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_split(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:307:in `test_post_networks__network_split'
     304:         puts req.to_s
     305:         code, response = send_cmd(req.method, req.path, req.params)
     306:         puts "RESPONSE: #{response}", "\n"
  => 307:         assert_equal(200, code)
     308:         assert_equal(response.class, Hash)
     309:         assert_include(response.keys, "children_count")
     310:         assert_equal(response["children_count"], 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_children]
    PATH: /networks/3.0.0.0$28/children
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_children(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:323:in `test_get_networks__network_children'
     320:         puts req.to_s
     321:         code, response = send_cmd(req.method, req.path, req.params)
     322:         puts "RESPONSE: #{response}", "\n"
  => 323:         assert_equal(200, code)
     324:         assert_equal(response.class, Hash)
     325:         assert_include(response.keys, "resources")
     326:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_parentattrs]
    PATH: /networks/3.0.1.0$30/parent-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_parentattrs(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:341:in `test_get_networks__network_parentattrs'
     338:         puts req.to_s
     339:         code, response = send_cmd(req.method, req.path, req.params)
     340:         puts "RESPONSE: #{response}", "\n"
  => 341:         assert_equal(200, code)
     342: =begin 
     343:         assert_equal(response.class, Hash)
     344:         assert_include(response.keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_join]
    PATH: /networks/3.0.0.0$30/join
  METHOD: post
  PARAMS: {"netmask"=>"28", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_join(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:399:in `test_post_networks__network_join'
     396:         puts req.to_s
     397:         code, response = send_cmd(req.method, req.path, req.params)
     398:         puts "RESPONSE: #{response}", "\n"
  => 399:         assert_equal(200, code)
     400:         assert_equal(response.class, Hash)
     401:         assert_include(response.keys, "id")
     402:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks]
--normal delete
    PATH: /networks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.0/28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:418:in `test_delete_networks'
     415:         puts req.to_s
     416:         code, response = send_cmd(req.method, req.path, req.params)
     417:         puts "RESPONSE: #{response}"
  => 418:         assert_equal(200, code)
     419:         assert_equal(response.class, Hash)
     420:         assert_include(response.keys, "result")
     421:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.......usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
...ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_del_pair(TestPair)
: ArgumentError: wrong number of arguments (1 for 4)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:25:in `new_pair'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:43:in `test_del_pair'
     40:     end
     41: 
     42:     def test_del_pair
  => 43:         _pair_manager.new_pair("1")
     44:     end
     45: 
     46:     def test_fetch_pair
===============================================================================
E
===============================================================================
Error: test_fetch_pair(TestPair)
: NoMethodError: undefined method `delete' for #<DDI::STATS::GridStatsPair:0x000000073f6888>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `block in fetch_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `fetch_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:47:in `test_fetch_pair'
     44:     end
     45: 
     46:     def test_fetch_pair
  => 47:         pairs = _pair_manager.fetch_pairs
     48:         check_result("fetch_pairs", pairs){|pairs| !pairs.nil?}
     49:     end
     50: 
===============================================================================
ping: unknown host master
ping: unknown host slave
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
.ping: unknown host master
ping: unknown host slave
Test pair_info                                --> Success
.Test test_request_route1                      --> Failed
E
===============================================================================
Error: test_request_route1(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:63:in `test_request_route1'
     60:     def test_request_route1
     61:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     62:         result = _pair_manager.request_route("get", "1", "/views/*/stats/9", body)
  => 63:         check_result("test_request_route1", result){|result| !result.nil?}
     64:     end
     65: 
     66:     def test_request_route2
===============================================================================
ping: unknown host master
ping: unknown host slave
Test test_request_route2                      --> Failed
E
===============================================================================
Error: test_request_route2(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:69:in `test_request_route2'
     66:     def test_request_route2
     67:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     68:         result = _pair_manager.request_route("get", "0", "/views/*/stats/9", body)
  => 69:         check_result("test_request_route2", result){|result| !result.nil?}
     70:     end
     71: 
     72:     #######################GridStatsPair############################
===============================================================================
.ping: unknown host master
ping: unknown host slave
Test pair_info                                --> Success
.ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_update_member(TestPair)
: NoMethodError: undefined method `ip=' for #<String:0x000000048b2a00>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `block in update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:50:in `update_member'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:52:in `test_update_member'
     49:     end
     50: 
     51:     def test_update_member
  => 52:         _pair_manager.update_member("1", "127.0.0.1")
     53:     end
     54: 
     55:     def test_update_pairs
===============================================================================
E
===============================================================================
Error: test_update_pairs(TestPair)
: ArgumentError: wrong number of arguments (1 for 2)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/db_resource_manager.rb:254:in `replace_resource'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:58:in `block in update_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `update_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:56:in `test_update_pairs'
     53:     end
     54: 
     55:     def test_update_pairs
  => 56:         result = _pair_manager.update_pairs(["1"], "1", "127.0.0.1")
     57:         check_result("update_pairs", result){|result| !result.nil?}
     58:     end
     59: 
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zones(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:7:in `test_view_zones'
      4:     def test_view_zones()
      5:         view1 = {"comment"=>"", "name"=>"grd", "owners"=>["local.master"], "acls"=>[], "black_acls"=>[], "filter_aaaa"=>"no", "filter_aaaa_ips"=>["any"], "recursion_enable"=>"yes", "non_recursive_acls"=>[], "bind_ips"=>["0.0.0.0"], "fail_forwarder"=>"", "dns64s"=>[], "need_tsig_key"=>"no", "tsig_host"=>[], "current_user"=>"admin"}
      6:         code, response = send_cmd("post", "/views", view1);
  =>  7:         assert_equal(code, 200)
      8: 
      9:         zone1 = {"zone_type"=>"auth", "name"=>"master", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10:         zone2 = {"zone_type"=>"auth", "name"=>"slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zone_rrs(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:32:in `test_view_zone_rrs'
     29:         rr2 = {"comment"=>"", "name"=>"22", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     30:         rr3 = {"comment"=>"", "name"=>"33", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     31:         code, response = send_cmd("post", "/views/default/zones/master/rrs", rr1);
  => 32:         assert_equal(code, 200)
     33:         code, response = send_cmd("post", "/views/default/zones/slave/rrs", rr1);
     34:         assert_equal(code, 200)
     35:         code, response = send_cmd("post", "/views/grd/zones/master/rrs", rr1);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
Connection refused - connect(2) for "127.0.0.1" port 20120
.[test_post_querytasks]
    PATH: /query-tasks
  METHOD: post
  PARAMS: {"depth"=>"3", "netdisco"=>"yes", "comment"=>"", "node"=>"local.master", "snmp_ver"=>"v1", "snmp_port"=>"161", "snmp_group"=>"public", "snmp_hosts"=>["10.1.101.1"], "enable_auto"=>"yes", "reccurence"=>"daily", "networks"=>[], "cron"=>"00 2 * * *", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_querytasks(TestQueryTasks)
/root/zddiv3/tests/ipam/query_tasks_test.rb:17:in `test_post_querytasks'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert_equal(response.length, 2)
     20:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_Redirection]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:8:in `_test_create_redirections'
(eval):1:in `test_create_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:26:in `_test_batch_add_redirections'
(eval):1:in `test_batch_add_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:41:in `_test_update_redirections'
(eval):1:in `test_update_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections_owners(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:49:in `_test_update_redirections_owners'
(eval):1:in `test_update_redirections_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_redirection_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_redirection_comment(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:65:in `_test_put_redirection_comment'
(eval):1:in `test_put_redirection_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:73:in `_test_del_redirections'
(eval):1:in `test_del_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Test fetch_regular_config                     --> Failed
E
===============================================================================
Error: test_fetch_regular_config(TestRegular)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:23:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:36:in `test_fetch_regular_config'
     33: 
     34:     def test_fetch_regular_config
     35:         result = _config.fetch_regular_config
  => 36:         check_result("fetch_regular_config", result){|result| !result.nil?}
     37:     end
     38: 
     39:     def test_modify_regular_confg
===============================================================================
E
===============================================================================
Error: test_modify_regular_confg(TestRegular)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:35:in `notify_redis_attime'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:30:in `modify_regular_confg'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:40:in `test_modify_regular_confg'
     37:     end
     38: 
     39:     def test_modify_regular_confg
  => 40:         result = _config.modify_regular_confg("yes", "yes", "yes", "yes", "yes", ["www.sohu.com"])
     41:         check_result("modify_regular_config", result){|result| !result.nil?}
     42:     end
     43: 
===============================================================================
.Test read_zones_from_file                     --> Success
.[test_post_roaminghosts]
--create one
    PATH: /roaming-hosts
  METHOD: post
  PARAMS: {"comment"=>"", "mac"=>"00:01:01:01:01:01", "name"=>"hostname1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:18:in `test_post_roaminghosts'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create two"
     21:         req.path = "/roaming-hosts"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts]
    PATH: /roaming-hosts
  METHOD: put
  PARAMS: {"name"=>"hostname111", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:49:in `test_put_roaminghosts'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts__host_comment]
    PATH: /roaming-hosts/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "name"=>"hostname111", "id"=>"00:01:01:01:01:01", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts__host_comment(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:68:in `test_put_roaminghosts__host_comment'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts]
    PATH: /roaming-hosts
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:85:in `test_get_roaminghosts'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "resources")
     88:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts__host]
    PATH: /roaming-hosts/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts__host(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:107:in `test_get_roaminghosts__host'
     104:         puts req.to_s
     105:         code, response = send_cmd(req.method, req.path, req.params)
     106:         puts "RESPONSE: #{response}", "\n"
  => 107:         assert_equal(200, code)
     108:         assert_equal(response.class, Hash)
     109:         assert_include(response.keys, "id")
     110:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_roaminghosts]
    PATH: /roaming-hosts
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01", "00:01:01:01:01:02", "00:01:01:01:01:03"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:123:in `test_delete_roaminghosts'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Hash)
     125:         assert_include(response.keys, "result")
     126:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_config(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:10:in `test_get_sso_config'
      7:     def test_get_sso_config
      8:         # first create sso config table
      9:         code, response = send_cmd("get", "/sso/config", {})
  => 10:         assert_equal(code, 200)
     11: 
     12:         # 1. check init sso config
     13:         db_config = `sqlite3 /usr/local/zddi/grid.db "select config from sso_config"`
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:94:in `test_get_sso_user_permission_1'
     91:         tmp_params["protocol"] = "p2"
     92:         tmp_params["enable"] = "yes"
     93:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 94:         assert_equal(code, 200)
     95: 
     96:         tmp_params = {"user_name" => "test_sso"}
     97:         code, response = send_cmd("get", "/sso/user/permission", tmp_params.dup)
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:105:in `test_get_sso_user_permission_2'
     102:         tmp_params = {}
     103:         tmp_params["enable"] = "no"
     104:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 105:         assert_equal(code, 200)
     106: 
     107:         # test no user
     108:         tmp_params = {"user_name" => "test_sso_2"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:42:in `test_put_sso_config_1'
     39:         tmp_params["protocol"] = "p2"
     40:         tmp_params["enable"] = "yes"
     41:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 42:         assert_equal(code, 200)
     43:         config = response
     44: 
     45:         # 1. check api result
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:82:in `test_put_sso_config_2'
     79:         tmp_params["protocol"] = "p2"
     80:         tmp_params["enable"] = "yes"
     81:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 82:         assert_equal(code, 422)
     83:     end
     84: 
     85:     def test_get_sso_user_permission_1
<nil> expected but was
<422>

diff:
? nil
? 422
===============================================================================
[test_post_scantasks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.5.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:18:in `test_post_scantasks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create scan task"
     21:         req.path = "/scan-tasks"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_scantasks]
    PATH: /scan-tasks
  METHOD: put
  PARAMS: {"node"=>"local.master", "scan_type"=>["ICMP", "NETBIOS", "ARP"], "enable_auto"=>"yes", "reccurence"=>"weekly", "cron"=>"00 2 * * 3", "ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:45:in `test_put_scantasks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks]
    PATH: /scan-tasks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:64:in `test_get_scantasks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}", "\n"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Hash)
     66:         assert_include(response.keys, "resources")
     67:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks__task]
    PATH: /scan-tasks/3.0.5.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks__task(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:85:in `test_get_scantasks__task'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "id")
     88:         assert_equal(response["id"], "3.0.5.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_start]
    PATH: /scan-tasks/3.0.5.0$28/start
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_start(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:101:in `test_post_scantasks__task_start'
      98:         puts req.to_s
      99:         code, response = send_cmd(req.method, req.path, req.params)
     100:         puts "RESPONSE: #{response}", "\n"
  => 101:         assert_equal(200, code)
     102:         assert_equal(response.class, Hash)
     103:         assert_include(response.keys, "result")
     104:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_stop]
    PATH: /scan-tasks/3.0.5.0$28/stop
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_stop(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:117:in `test_post_scantasks__task_stop'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "result")
     120:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_pause]
    PATH: /scan-tasks/3.0.5.0$28/pause
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_pause(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:133:in `test_post_scantasks__task_pause'
     130:         puts req.to_s
     131:         code, response = send_cmd(req.method, req.path, req.params)
     132:         puts "RESPONSE: #{response}", "\n"
  => 133:         assert_equal(200, code)
     134:         assert_equal(response.class, Hash)
     135:         assert_include(response.keys, "result")
     136:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_scantasks]
--delete scan task
    PATH: /scan-tasks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:150:in `test_delete_scantasks'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "result")
     153:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_sharednetworks]
--create 2 network 3.0.0.0/24 and 3.0.1.0/24
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.0.0/24", "3.0.1.0/24"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:18:in `test_post_sharednetworks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         puts "--create shared-network 3.0.0.0/24"
     20:         req.path = "/shared-networks"
     21:         req.params = {"comment"=>"","name"=>"shared-network1","type"=>"IPv4","networks"=>["3.0.0.0/24"]}
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks]
    PATH: /shared-networks
  METHOD: put
  PARAMS: {"networks"=>["3.0.0.0/24", "3.0.1.0/24"], "ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:45:in `test_put_sharednetworks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks]
    PATH: /shared-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:62:in `test_get_sharednetworks'
     59:         puts req.to_s
     60:         code, response = send_cmd(req.method, req.path, req.params)
     61:         puts "RESPONSE: #{response}", "\n"
  => 62:         assert_equal(200, code)
     63:         assert_equal(response.class, Hash)
     64:         assert_include(response.keys, "resources")
     65:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name]
    PATH: /shared-networks/shared-network1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:82:in `test_get_sharednetworks__name'
     79:         puts req.to_s
     80:         code, response = send_cmd(req.method, req.path, req.params)
     81:         puts "RESPONSE: #{response}", "\n"
  => 82:         assert_equal(200, code)
     83:         assert_equal(response.class, Hash)
     84:         assert_include(response.keys, "id")
     85:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_comment]
    PATH: /shared-networks/shared-network1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_comment(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:98:in `test_put_sharednetworks__name_comment'
      95:         puts req.to_s
      96:         code, response = send_cmd(req.method, req.path, req.params)
      97:         puts "RESPONSE: #{response}", "\n"
  =>  98:         assert_equal(200, code)
      99:         assert_equal(response.class, Hash)
     100:         assert_include(response.keys, "id")
     101:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"aaaa", "ddns_rev_domainname"=>"bbbb", "primary_server"=>"55.55.55.55", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:117:in `test_put_sharednetworks__name_ddns_config'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "ddns_domainname")
     120:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:137:in `test_get_sharednetworks__name_ddns_config'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "ddns_domainname")
     140:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "isIPv4"=>true, "domain_name"=>"XXX", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"3200", "def_value"=>"3200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"6400", "max_value"=>"6400", "max_unit"=>"1", "min_lease_time"=>"300", "min_value"=>"300", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:158:in `test_put_sharednetworks__name_dhcpconfig'
     155:         puts req.to_s
     156:         code, response = send_cmd(req.method, req.path, req.params)
     157:         puts "RESPONSE: #{response}", "\n"
  => 158:         assert_equal(200, code)
     159:         assert_equal(response.class, Hash)
     160:         assert_include(response.keys, "domain_name")
     161:         assert_equal(response["domain_name"], "XXX")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:174:in `test_get_sharednetworks__name_dhcpconfig'
     171:         puts req.to_s
     172:         code, response = send_cmd(req.method, req.path, req.params)
     173:         puts "RESPONSE: #{response}", "\n"
  => 174:         assert_equal(200, code)
     175:         assert_include(response.keys, "domain_name")
     176:         assert_equal(response["domain_name"], "XXX")
     177:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_sharednetworks]
--delete shared network
    PATH: /shared-networks
  METHOD: delete
  PARAMS: {"ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:190:in `test_delete_sharednetworks'
     187:         puts req.to_s
     188:         code, response = send_cmd(req.method, req.path, req.params)
     189:         puts "RESPONSE: #{response}"
  => 190:         assert_equal(200, code)
     191:         assert_equal(response.class, Hash)
     192:         assert_include(response.keys, "result")
     193:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
F
===============================================================================
Failure:
test_update_config(TestSnmpdAgentMgr)
/root/zddiv3/tests/unit/zva/snmpd_test.rb:22:in `test_update_config'
     19: 
     20:         assert_equal 1, @table.count
     21:         assert_equal "private", snmp_agent_mgr.read_community
  => 22:         assert_equal 3000, snmp_agent_mgr.port
     23:         assert_equal "yes", snmp_agent_mgr.switch
     24:     end
     25: 
<3000> expected but was
<"3000">

diff:
? "3000"
===============================================================================

[_test_create_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:8:in `_test_create_stub_zone'
(eval):1:in `test_create_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:31:in `_test_update_stub_zone'
(eval):1:in `test_update_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone_owners(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:39:in `_test_update_stub_zone_owners'
(eval):1:in `test_update_stub_zone_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_put_stub_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_stub_zone_comment(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:47:in `_test_put_stub_zone_comment'
(eval):1:in `test_put_stub_zone_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:55:in `_test_del_stub_zone'
(eval):1:in `test_del_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
.{"cpu_usage"=>"0.64", "memory_usage"=>"0.32", "disk_usage"=>"0.85", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-06-01 00:01:09", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.E
===============================================================================
Error: test_get_license_info(TestSystem)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/root/zddiv3/tests/system_manager/system_test.rb:13:in `test_get_license_info'
     10:         assert_equal(200, code)
     11: 
     12:         api_license = response
  => 13:         local_api = DDI.get_license_flag.merge(DDI.get_license_auth)
     14:         api_license.each do |k,v|
     15:             if v != local_api[k]
     16:                 puts "license: key:#{k}'s values is not equal"
===============================================================================
..[test_post_tempauthorities]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.4.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:18:in `test_post_tempauthorities'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.path = "/networks/:network/dhcp-resources"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities]
    PATH: /temp-authorities
  METHOD: put
  PARAMS: {"start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:54:in `test_put_tempauthorities'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}", "\n"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 1)
     57:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities__authority_comment]
    PATH: /temp-authorities/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "id"=>"00:01:01:01:01:01", "in_use"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities__authority_comment(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:73:in `test_put_tempauthorities__authority_comment'
     70:         puts req.to_s
     71:         code, response = send_cmd(req.method, req.path, req.params)
     72:         puts "RESPONSE: #{response}", "\n"
  => 73:         assert_equal(200, code)
     74:         assert_equal(response.class, Hash)
     75:         assert_include(response.keys, "id")
     76:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities]
    PATH: /temp-authorities
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:90:in `test_get_tempauthorities'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities__authority]
    PATH: /temp-authorities/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities__authority(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:108:in `test_get_tempauthorities__authority'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_tempauthorities]
--delete temp authority
    PATH: /temp-authorities
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:125:in `test_delete_tempauthorities'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "result")
     128:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_put_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"name1", "type"=>"phone", "id"=>""}, {"display_name"=>"name2", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:17:in `test_put_userdefinedattrs'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert response.length.eql?(2)
     20:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:34:in `test_get_userdefinedattrs'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert response.length.eql?(2)
     37:         assert do
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_res_private_user_defined_attrs]
--get attrs
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_res_private_user_defined_attrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:54:in `test_put_res_private_user_defined_attrs'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 2)
     57:         puts "--put attrs"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs]
    PATH: /res-private-user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:89:in `test_get_resprivateuserdefinedattrs'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "resources")
     92:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs__restype]
    PATH: /res-private-user-defined-attrs/mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs__restype(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:106:in `test_get_resprivateuserdefinedattrs__restype'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "mac-informations")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_acl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestView)
/root/zddiv3/tests/dns/view_test.rb:8:in `_test_create_acl'
(eval):1:in `test_create_acl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:22:in `_test_create_view'
(eval):1:in `test_create_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:39:in `_test_update_view'
(eval):1:in `test_update_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:50:in `_test_create_view_sortlist'
(eval):1:in `test_create_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:63:in `_test_update_view_sortlist'
(eval):1:in `test_update_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:70:in `_test_delete_view_sortlist'
(eval):1:in `test_delete_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:77:in `_test_delete_view'
(eval):1:in `test_delete_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_acl]
.Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_snmp_ha_status(TestZVA)
/root/zddiv3/tests/system_manager/zva_test.rb:17:in `_test_start_snmp'
/root/zddiv3/tests/system_manager/zva_test.rb:34:in `test_snmp_ha_status'
     31:         type = response["type"]
     32: 
     33:         # start snmp
  => 34:         _test_start_snmp
     35: 
     36:         # get ha status
     37:         res = `snmpget -v2c -c #{SNMP_READ_COMMUNITY} localhost 1.3.6.1.4.1.39810.100.1.19.0`
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:412:in `test_del_redirect_rrs'
     409:         rr_ids = Array.new
     410: 
     411:         #1:create new redirect records
  => 412:         add_redirect_rrs(5).each{|info|
     413:            rr_ids <<  info["id"]
     414:         }
     415:         #2:delete one
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:338:in `test_get_redirect_rrs'
     335: =end
     336:         rr_ids = []
     337:         rr_infos = []
  => 338:         rr_infos = add_redirect_rrs(10)
     339:         #store all records id,after finish the test,we'll delete them.
     340:         rr_infos.each{|rr|
     341:             rr_ids << rr["id"]
===============================================================================
+++test invalid view name+++
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:159:in `redirect_rr_common_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:191:in `post_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:305:in `block in test_post_redirect_rrs'
     302: 
     303:         check_valid.each{|record|
     304:             puts "+++#{record[0].to_s}+++"
  => 305:             res = post_test(record[1], record[2], record[3])  
     306:             if record[0].to_s == "add new redirect record"
     307:                 new_rr_id << res["ret"]["id"]
     308:             end
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `each'
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `test_post_redirect_rrs'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:357:in `test_put_redirect_rrs'
     354:        rr_ids = []
     355:  
     356:        #modify the records we have added,these values is we want to update
  => 357:        add_redirect_rrs(5).each{|rr_msg|
     358:           rr_ids << rr_msg["id"]
     359:           rr_msg["ttl"] = 200
     360:           rr_msg["is_enable"] = "no"
===============================================================================


Finished in 144057.442732063 seconds.

420 tests, 470 assertions, 198 failures, 106 errors, 0 pendings, 0 omissions, 7 notifications
35% passed

0.00 tests/s, 0.00 assertions/s
ping: unknown host master
ping: unknown host slave
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
SimpleCov failed with exit 1Coverage report generated for Unit Tests to /root/coverage/sample/report. 16345 / 72012 LOC (22.7%) covered.
rake aborted!
Command failed with status (1): [ruby -I"lib:test:lib"  "/usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader.rb" "/root/coverage/sample/test/test_helper.rb" "/root/zddiv3/tests/unit/agent/agent.rb" "/root/zddiv3/tests/unit/am/gridstats_menu_test.rb" "/root/zddiv3/tests/unit/am/gridstats_pair_test.rb" "/root/zddiv3/tests/unit/am/gridstats_regular_test.rb" "/root/zddiv3/tests/unit/am/gridstats_report_test.rb" "/root/zddiv3/tests/unit/am/network_pool_test.rb" "/root/zddiv3/tests/unit/dns/query_source_checker_test.rb" "/root/zddiv3/tests/unit/dns/query_source_test.rb" "/root/zddiv3/tests/unit/dns/shared_rr_test.rb" "/root/zddiv3/tests/unit/dns/shared_zone_test.rb" "/root/zddiv3/tests/unit/dns/smart_view_manager_test.rb" "/root/zddiv3/tests/unit/grid/obj_comment_test.rb" "/root/zddiv3/tests/unit/grid/user.rb" "/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb" "/root/zddiv3/tests/unit/ipam/network_manager_test.rb" "/root/zddiv3/tests/unit/node/node_test.rb" "/root/zddiv3/tests/unit/system/ha_config.rb" "/root/zddiv3/tests/unit/system/nic_link_monitor_table_test.rb" "/root/zddiv3/tests/unit/system/power_status_table_test.rb" "/root/zddiv3/tests/unit/util/command_version_manager_test.rb" "/root/zddiv3/tests/unit/util/config_manager_test.rb" "/root/zddiv3/tests/unit/web/web.rb" "/root/zddiv3/tests/unit/zva/data_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/query_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/snmpd_test.rb" "/root/zddiv3/tests/dns/acl_lib_test.rb" "/root/zddiv3/tests/dns/acl_test.rb" "/root/zddiv3/tests/dns/auth_zone_tree_test.rb" "/root/zddiv3/tests/dns/dns_security_test.rb" "/root/zddiv3/tests/dns/forward_zone_test.rb" "/root/zddiv3/tests/dns/hint-zones_test.rb" "/root/zddiv3/tests/dns/hint_zone_record_test.rb" "/root/zddiv3/tests/dns/ip_rrl_test.rb" "/root/zddiv3/tests/dns/local-policiey_test.rb" "/root/zddiv3/tests/dns/name_rrl_test.rb" "/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb" "/root/zddiv3/tests/dns/redict_rr_test.rb" "/root/zddiv3/tests/dns/redirection_url_test.rb" "/root/zddiv3/tests/dns/stub_zone_test.rb" "/root/zddiv3/tests/dns/view_test.rb" "/root/zddiv3/tests/grid/grid_test.rb" "/root/zddiv3/tests/ipam/acls_test.rb" "/root/zddiv3/tests/ipam/audit_test.rb" "/root/zddiv3/tests/ipam/auth_users_test.rb" "/root/zddiv3/tests/ipam/authenticate_policy_test.rb" "/root/zddiv3/tests/ipam/dhcp_failovers_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb" "/root/zddiv3/tests/ipam/dhcp_resources_test.rb" "/root/zddiv3/tests/ipam/dhcp_templates_test.rb" "/root/zddiv3/tests/ipam/fingerprints_test.rb" "/root/zddiv3/tests/ipam/ipam_config_test.rb" "/root/zddiv3/tests/ipam/ipam_search_resources_test.rb" "/root/zddiv3/tests/ipam/macs_test.rb" "/root/zddiv3/tests/ipam/networks_test.rb" "/root/zddiv3/tests/ipam/query_tasks_test.rb" "/root/zddiv3/tests/ipam/roaming_host_test.rb" "/root/zddiv3/tests/ipam/scan_tasks_test.rb" "/root/zddiv3/tests/ipam/shared_networks_test.rb" "/root/zddiv3/tests/ipam/temp_authorities_test.rb" "/root/zddiv3/tests/ipam/user_defined_attrs_test.rb" "/root/zddiv3/tests/system_manager/alarm_test.rb" "/root/zddiv3/tests/system_manager/ha_test.rb" "/root/zddiv3/tests/system_manager/license_test.rb" "/root/zddiv3/tests/system_manager/sso_test.rb" "/root/zddiv3/tests/system_manager/system_loop_test.rb" "/root/zddiv3/tests/system_manager/system_test.rb" "/root/zddiv3/tests/system_manager/zva_test.rb" ]

Tasks: TOP => test
(See full trace by running task with --trace)
30 May 08:01:55 ntpdate[22078]: step time server 120.25.115.20 offset -143975.554537 sec
From git.zdns.cn:zdns/zddiv3
   824dad4..7ed0f79  task38871-dev-3.14 -> origin/task38871-dev-3.14
Already up-to-date.
Already on 'task38746-dev-3.14'
  a
  dev-3.14
  master
  task-jinyue
  task36923-master
  task36968-3.12.2.2
  task37042-master
  task37057-3.12.4.4
  task37538-3.12.4.6
  task37730-3.12.4.6
  task38090-3.11
  task38210-3.11.2.16
  task38223-3.11
  task38224-3.11
  task38396-3.11
  task38428-3.11
  task38436-3.11
* task38746-dev-3.14
  task38746-dev-3.14-add-test
  task38746-tcy-test
  zddi-3.11
  zddi-3.11.2.10
  zddi-3.11.2.16
  zddi-3.12.2.0-dongfangyouxian
  zddi-3.12.2.2
  zddi-3.12.4.4
  zddi-3.12.4.6
Already up-to-date.
fatal: Not a git repository (or any of the parent directories): .git
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/def.rb:12: warning: already initialized constant DDI::SYSTEM_PASTATE_FP
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:136: warning: previous definition of SYSTEM_PASTATE_FP was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:311: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/address_query.rb:338: warning: found = in conditional, should be ==
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:3: warning: already initialized constant DDI::PATCH_DATA_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:369: warning: previous definition of PATCH_DATA_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:4: warning: already initialized constant DDI::PATCH_BAK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:370: warning: previous definition of PATCH_BAK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:5: warning: already initialized constant DDI::PATCH_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:371: warning: previous definition of PATCH_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/upgrade/def.rb:6: warning: already initialized constant DDI::PATCH_M_WORK_DIR_PATH
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/def.rb:372: warning: previous definition of PATCH_M_WORK_DIR_PATH was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:11: warning: already initialized constant DDI::SystemInfo::POWER_AVAILABLE_FILE
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/system/system_info.rb:8: warning: previous definition of POWER_AVAILABLE_FILE was here
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:143: warning: duplicated key at line 145 ignored: :y_label_font_size
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/svg-graph-1.0.5/lib/SVG/Graph/Graph.rb:3: warning: class variable access from toplevel
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:15: warning: already initialized constant DDI::SQueryLog::DHCP_TABLE_ROW_NAME
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/zva/squery_log.rb:14: warning: previous definition of DHCP_TABLE_ROW_NAME was here
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:69: warning: duplicated key at line 69 ignored: "192.168.1.100"
/root/zddiv3/tests/unit/util/command_version_manager_test.rb:97: warning: duplicated key at line 97 ignored: "192.168.1.100"
Loaded suite /usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader
Started
................E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
: RuntimeError: 60002018010703
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/ipam/grid_dhcpfailover.rb:48:in `create_dhcpfailover'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:31:in `test_create_dhcpfailover'
     28: 
     29:     def test_create_dhcpfailover
     30:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
  => 31:         @failover_manager.create_dhcpfailover(DATA)
     32:         assert_equal(DATA['name'], @table.first[:name])
     33:     end
     34: 
===============================================================================
E
===============================================================================
Error: test_create_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:133:in `test_create_table'
     130:     end
     131: 
     132:     def test_create_table
  => 133:         @db.run('drop table ' + TABLE_NAME.to_s)
     134:         @failover_manager.send :_create_table
     135:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     136:     end
===============================================================================
E
===============================================================================
Error: test_create_table(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:36:in `test_del_dhcpfailover'
     33:     end
     34: 
     35:     def test_del_dhcpfailover
  => 36:         insert_failover_data
     37:         assert_equal(1, @table.count)
     38:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     39:         @failover_manager.del_dhcpfailover(DATA['name'])
===============================================================================
E
===============================================================================
Error: test_del_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:75:in `test_del_failover_by_ip'
     72:     end
     73: 
     74:     def test_del_failover_by_ip
  => 75:         insert_failover_data
     76:         assert_equal(1, @table.count)
     77:         @failover_manager.del_failover_by_ip(DATA['master_node'])
     78:         assert_equal(0, @table.count)
===============================================================================
E
===============================================================================
Error: test_del_failover_by_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:118:in `test_fetch_failover_states_thread'
     115:     end
     116: 
     117:     def test_fetch_failover_states_thread
  => 118:         insert_failover_data
     119:         assert_nothing_raised {@failover_manager.fetch_failover_states_thread}
     120:     end
     121: 
===============================================================================
E
===============================================================================
Error: test_fetch_failover_states_thread(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:21:in `test_get_configers'
     18:             "comment" => "is_a_comment"}
     19: 
     20:     def test_get_configers
  => 21:         insert_failover_data
     22:         assert_equal(DATA['name'], @failover_manager.configers[0].name)
     23:     end
     24: 
===============================================================================
E
===============================================================================
Error: test_get_configers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:108:in `test_get_dhcpfailover_master_ip'
     105:     end
     106: 
     107:     def test_get_dhcpfailover_master_ip
  => 108:         insert_failover_data
     109:         assert_equal(DATA['master_ip'], @failover_manager.get_dhcpfailover_master_ip(DATA['name']))
     110:     end
     111: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_master_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:103:in `test_get_dhcpfailover_nodes'
     100:     end
     101: 
     102:     def test_get_dhcpfailover_nodes
  => 103:         insert_failover_data
     104:         assert_equal([DATA['master_node'], DATA['slave_node']], @failover_manager.get_dhcpfailover_nodes(DATA['name']))
     105:     end
     106: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailover_nodes(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:113:in `test_get_dhcpfailovers'
     110:     end
     111: 
     112:     def test_get_dhcpfailovers
  => 113:         insert_failover_data
     114:         assert_equal(DATA['name'], @failover_manager.get_dhcpfailovers[0]['name'])
     115:     end
     116: 
===============================================================================
E
===============================================================================
Error: test_get_dhcpfailovers(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:63:in `test_is_using_group?'
     60:     end
     61: 
     62:     def test_is_using_group?
  => 63:         insert_failover_data
     64:         assert_equal('yes', @failover_manager.is_using_group?([DATA['master_node']]))
     65:         assert_equal('no', @failover_manager.is_using_group?(['3.3.3.3']))
     66:     end
===============================================================================
E
===============================================================================
Error: test_is_using_group?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:69:in `test_is_using_member_ip?'
     66:     end
     67: 
     68:     def test_is_using_member_ip?
  => 69:         insert_failover_data
     70:         assert_equal(true, @failover_manager.is_using_member_ip?(DATA['master_node']))
     71:         assert_equal(false, @failover_manager.is_using_member_ip?('3.3.3.3'))
     72:     end
===============================================================================
E
===============================================================================
Error: test_is_using_member_ip?(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:123:in `test_set_failover_state'
     120:     end
     121: 
     122:     def test_set_failover_state
  => 123:         insert_failover_data
     124:         assert_nothing_raised do
     125:             @failover_manager.stubs(:_host_accessible).returns(true)
     126:             @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
===============================================================================
E
===============================================================================
Error: test_set_failover_state(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:44:in `test_update_dhcpfailover'
     41:     end
     42: 
     43:     def test_update_dhcpfailover
  => 44:         insert_failover_data
     45:         @failover_manager.instance_variable_set(:@cloud_manager, _get_mock_grid_manager)
     46:         new_data = {'split' => '3/1', 'slave_ip' => '8.8.8.8'}
     47: 
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:57:in `test_update_dhcpfailover_comment'
     54:     end
     55: 
     56:     def test_update_dhcpfailover_comment
  => 57:         insert_failover_data
     58:         @failover_manager.update_dhcpfailover_comment(DATA['name'], 'set_new_comment')
     59:         assert_equal('set_new_comment', @table.first[:comment])
     60:     end
===============================================================================
E
===============================================================================
Error: test_update_dhcpfailover_comment(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:97:in `test_update_master_node_ip'
      94:     end
      95: 
      96:     def test_update_master_node_ip
  =>  97:         insert_failover_data
      98:         @failover_manager.update_master_node_ip(DATA['master_node'], '8.8.8.8')
      99:         assert_equal('8.8.8.8', @table.first[:master_node])
     100:     end
===============================================================================
E
===============================================================================
Error: test_update_master_node_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:141:in `insert_failover_data'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `block in test_update_member_ip'
     86:         ip_datas = [{'master_node' => '6.6.6.6', 'master_ip' => '13.13.13.13', 'slave_ip' => '14.14.14.14'},
     87:                     {'master_node' => 'master1', 'master_ip' => '6.6.6.6', 'slave_ip' => '67.67.67.67'},
     88:                     {'master_node' => 'master2', 'master_ip' => '7.7.7.7', 'slave_ip' => '6.6.6.6'}]
  => 89:         ip_datas.each {|data| insert_failover_data(DATA.merge(data))}
     90:         @failover_manager.update_member_ip('6.6.6.6', '8.9.9.9')
     91:         assert_equal('13.13.13.13', @table.where(master_node: '8.9.9.9').first[:master_ip])
     92:         assert_equal('67.67.67.67', @table.where(master_ip: '8.9.9.9').first[:slave_ip])
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `each'
/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb:89:in `test_update_member_ip'
===============================================================================
E
===============================================================================
Error: test_update_member_ip(GridDhcpFailoverTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"euxpukxn.trgyda.a", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:141:in `test_del'
     138:     def test_del
     139:         expect_success_res = {"result" => "succeed"}
     140:         hint_zone_id = add_hint_zone() 
  => 141:         ids = add_hint_rrs(10)
     142: 
     143:         del_params_info = [{"name" => "ids", "type" => "string_array",
     144:                             "max_len" => 10, "max_cnt" => nil},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"vkpt.icxgbwspvk.racwiejoml", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:222:in `test_get'
     219:         all_rrs = []
     220:         hint_zone_id = add_hint_zone() 
     221: 
  => 222:         ids = add_hint_rrs(10){|res|
     223:             all_rrs << res["ret"] 
     224:         }
     225: 
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"miiupyg.rtaild.thmfyuqh", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:124:in `block in test_post'
     121:         tester.test_valid_params(200, nil){|para, res|
     122:             # save the parameters,we'll add a duplicate record later.
     123:             paras = para
  => 124:             ids << res["ret"]["id"]
     125:         }
     126: 
     127:         # add an existing record
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:121:in `test_post'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"name"=>"axsagf.grsqkreqou.aopilo", "klass"=>"IN", "type"=>"A", "ttl"=>3600, "rdata"=>"1.1.1.1", "is_enable"=>"no", "comment"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesRecordTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint_zone_record_test.rb:47:in `block (2 levels) in add_hint_rrs'
/root/zddiv3/tests/dns/common_data_type.rb:261:in `test_valid_params'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:46:in `block in add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `times'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:45:in `add_hint_rrs'
/root/zddiv3/tests/dns/hint_zone_record_test.rb:168:in `test_put'
     165:     
     166:     def test_put
     167:         hint_zone_id = add_hint_zone() 
  => 168:         ids = add_hint_rrs(10)
     169: 
     170:         put_paras_info = [
     171:             {"name" => "ids", "type" => "string_array", "max_cnt" => 1, "assignation" => ids},
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:171:in `test_del'
     168:         ids = []
     169:         expect_success_res = {"result" => "succeed"}
     170: 
  => 171:         view_infos = add_views(10)
     172:         ids = add_rrs(view_infos)
     173: 
     174:         del_params_info = [{"name" => "ids", "type" => "string_array",
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:253:in `test_get'
     250:         all_rrs = []
     251:         view_infos = []
     252: 
  => 253:         view_infos = add_views(10)
     254:         ids = add_rrs(view_infos){|res|
     255:             all_rrs << res["ret"] 
     256:         }
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"view"=>"dwqkuc", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : owners
check type  : This is a rand string array
expect code : 421
expect res  : {"error"=>"10002018010736"}
parameters  : {"view"=>"default", "owners"=>["tajidjhv", "dggofjmwee", "awjfsioweq", "dqvogwpg", "xoqhrqe", "sfmqm", "ahbwa", "gpcpcjq"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"view"=>"default", "owners"=>["local.master"], "is_enable"=>"no", "comment"=>"", "zone_content"=>"", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
.exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(HintZonesTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/hint-zones_test.rb:50:in `block in add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `times'
/root/zddiv3/tests/dns/hint-zones_test.rb:35:in `add_views'
/root/zddiv3/tests/dns/hint-zones_test.rb:205:in `test_put'
     202:         ids = []
     203:         view_infos = []
     204: 
  => 205:         view_infos = add_views(10)
     206:         ids = add_rrs(view_infos)
     207: 
     208:         put_paras_info = [
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"158.153.46.121", "is_enable"=>"no", "name"=>"bylobmt.kgupwtjvk.kacq", "strategy"=>"", "ttl"=>1620788453, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"149.60.101.137", "is_enable"=>"yes", "name"=>"cccwy.tujvjydsie.fpqijg", "strategy"=>"", "ttl"=>1676859050, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"164.220.243.200", "is_enable"=>"no", "name"=>"vdiximeu.ofxr.igl", "strategy"=>"", "ttl"=>2129687503, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"25.3.230.98", "is_enable"=>"yes", "name"=>"kxy.fnnq.iigqcnekf", "strategy"=>"", "ttl"=>514509995, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"106.116.43.179", "is_enable"=>"no", "name"=>"yvssbotl.f.ndsgdjhio", "strategy"=>"", "ttl"=>569461547, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"197.171.24.171", "is_enable"=>"yes", "name"=>"ne.afyiksyh.tgclbq", "strategy"=>"", "ttl"=>1205150441, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"28.81.236.213", "is_enable"=>"yes", "name"=>"yphq.blfutbgbl.yhyca", "strategy"=>"", "ttl"=>2104652101, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"28.184.240.110", "is_enable"=>"no", "name"=>"qlbnoukr.vywa.fnpisnlywu", "strategy"=>"", "ttl"=>383187753, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"235.243.170.158", "is_enable"=>"no", "name"=>"ytpx.hsgjft.livrhtl", "strategy"=>"", "ttl"=>2080780618, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"200.45.47.135", "is_enable"=>"yes", "name"=>"n.cx.knxxver", "strategy"=>"", "ttl"=>834596318, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:99:in `block in test_del'
      96:         expect_success_res = {"result" => "succeed"}
      97: 
      98:         add_rrs().each{|res|
  =>  99:             ids << res["ret"]["id"]
     100:         }
     101:         del_params_info = [{"name" => "ids", "type" => "string_array",
     102:                             "max_len" => 10, "max_cnt" => nil},
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:98:in `test_del'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"136.178.155.40", "is_enable"=>"no", "name"=>"cbbobkjj.bp.sqwpevc", "strategy"=>"", "ttl"=>2013519843, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"210.83.185.184", "is_enable"=>"yes", "name"=>"ufueqqehs.jx.renlvxijob", "strategy"=>"", "ttl"=>1090134791, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"115.227.176.158", "is_enable"=>"yes", "name"=>"oivukjsfef.yphhnskjg.emowxh", "strategy"=>"", "ttl"=>1295223022, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"175.107.94.22", "is_enable"=>"no", "name"=>"lejjwkb.oxqstclut.y", "strategy"=>"", "ttl"=>1898357880, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"183.157.183.184", "is_enable"=>"yes", "name"=>"bgqkeslxh.xs.d", "strategy"=>"", "ttl"=>393525160, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"217.7.203.134", "is_enable"=>"yes", "name"=>"h.plitwu.kdvycn", "strategy"=>"", "ttl"=>591827740, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"193.45.92.3", "is_enable"=>"yes", "name"=>"hqdhkq.qgjbkdhng.hkevpji", "strategy"=>"", "ttl"=>1389400453, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"132.56.33.128", "is_enable"=>"yes", "name"=>"dfrjcviydo.aylpn.bnflep", "strategy"=>"", "ttl"=>691803593, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"132.181.101.52", "is_enable"=>"yes", "name"=>"hlkgrvscmr.ehhkjdo.xdwagpwbh", "strategy"=>"", "ttl"=>882654611, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"156.58.192.106", "is_enable"=>"no", "name"=>"dfhaten.kafyuko.gbgdddj", "strategy"=>"", "ttl"=>2005187503, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:175:in `block in test_get'
     172:         all_rrs = []
     173: 
     174:         add_rrs().each{|res|
  => 175:             all_rrs << res["ret"]
     176:             ids << res["ret"]["id"]
     177:         }
     178: 
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:174:in `test_get'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : type
check type  : The value is out of range
expect code : 421
expect res  : {"error"=>"10002018010742"}
parameters  : {"ip"=>"179.241.79.180", "is_enable"=>"no", "name"=>"nixaqtcg.eujxgl.enjfcyy", "strategy"=>"", "ttl"=>944578779, "type"=>"witxusmcakwft", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
para name   : view
check type  : This is a rand string
expect code : 421
expect res  : {"error"=>"10002018010716"}
parameters  : {"ip"=>"65.96.215.207", "is_enable"=>"no", "name"=>"iujmtpwjpe.hykkruaaao.tdrscvalr", "strategy"=>"", "ttl"=>1264002319, "type"=>"nxdomain", "view"=>"mvsoy", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"158.222.70.4", "is_enable"=>"yes", "name"=>"pxevldoa.tuakw.mtrynbb", "strategy"=>"", "ttl"=>1164406893, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:81:in `block in test_post'
     78:         tester.test_all_valid_params(200, nil){|params, res|
     79: 
     80:             #if added successfully,store the id,we'll delete it when finished the test.
  => 81:             ids << res["ret"]["id"] if 200 == res["code"]
     82:             choise_params_by_policy_type(params)
     83:             if !tester.compare_json_include(params, res["ret"])
     84:                 assert_equal(params, res["ret"])
/root/zddiv3/tests/dns/common_data_type.rb:281:in `block in test_all_valid_params'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `each'
/root/zddiv3/tests/dns/common_data_type.rb:274:in `test_all_valid_params'
/root/zddiv3/tests/dns/local-policiey_test.rb:78:in `test_post'
===============================================================================
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"114.152.249.54", "is_enable"=>"yes", "name"=>"ruwiug.x.xmj", "strategy"=>"", "ttl"=>368279060, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"92.25.22.193", "is_enable"=>"yes", "name"=>"usxgwdrn.cxidged.b", "strategy"=>"", "ttl"=>1523711537, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"131.99.118.124", "is_enable"=>"yes", "name"=>"f.gncpl.x", "strategy"=>"", "ttl"=>842202812, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"179.220.87.234", "is_enable"=>"no", "name"=>"faqw.mhx.qqyc", "strategy"=>"", "ttl"=>1686705197, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"168.35.140.134", "is_enable"=>"no", "name"=>"bmowv.v.smkbjunhvk", "strategy"=>"", "ttl"=>1623118910, "type"=>"passthru", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"42.124.121.46", "is_enable"=>"yes", "name"=>"wqbwnyphd.auh.gtrnjatt", "strategy"=>"", "ttl"=>2077668329, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"26.170.157.150", "is_enable"=>"no", "name"=>"q.bgvm.tmticxn", "strategy"=>"", "ttl"=>2093736799, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"69.23.133.20", "is_enable"=>"no", "name"=>"ukmfuhjaq.sh.itpv", "strategy"=>"", "ttl"=>1403910242, "type"=>"redirect", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"253.121.236.110", "is_enable"=>"yes", "name"=>"nmgx.fpinr.puebx", "strategy"=>"", "ttl"=>1926734249, "type"=>"nodata", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
expect code : 200
expect res  : 
parameters  : {"ip"=>"100.64.233.0", "is_enable"=>"no", "name"=>"ocotguc.xs.txkbgb", "strategy"=>"", "ttl"=>1867963517, "type"=>"nxdomain", "view"=>"default", "current_user"=>"admin"}
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put(LocalPolicieyTest)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/local-policiey_test.rb:129:in `block in test_put'
     126:     def test_put
     127:         ids = []
     128:         add_rrs().each{|res|
  => 129:             ids << res["ret"]["id"]
     130:         }
     131: 
     132:         put_paras_info = [{"name" => "ids", "type" => "string_array", "max_cnt" => 1},
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `each'
/root/zddiv3/tests/dns/local-policiey_test.rb:128:in `test_put'
===============================================================================
E
===============================================================================
Error: test_class_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:26:in `test_class_set_ipam_config'
     23:     end
     24: 
     25:     def test_class_set_ipam_config
  => 26:         insert_config_data
     27:         DDI::IPAM::NetworkConfigManager.set_ipam_config(IMAP_CONFIG)
     28:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     29:     end
===============================================================================
E
===============================================================================
Error: test_class_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:242:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:79:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:40:in `test_create_table'
     37:     end
     38: 
     39:     def test_create_table
  => 40:         @db.run('drop table ' + TABLE_NAME.to_s)
     41:         @config_manager.send :_create_table
     42:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     43:         assert_equal(1, @table.count)
===============================================================================
E
===============================================================================
Error: test_create_table(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:706:in `literal_string_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:88:in `literal_append'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:331:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/misc.rb:192:in `literal'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:392:in `primary_key'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1225:in `insert_pk'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1067:in `insert'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:58:in `insert_config_data'
/root/zddiv3/tests/unit/ipam/network_manager_test.rb:20:in `test_set_ipam_config'
     17:     end
     18: 
     19:     def test_set_ipam_config
  => 20:         insert_config_data
     21:         @config_manager.set_ipam_config(IMAP_CONFIG)
     22:         assert_equal(IMAP_CONFIG.inspect, @table.first[:ipam_config])
     23:     end
===============================================================================
E
===============================================================================
Error: test_set_ipam_config(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(NetworkConfigManagerTest)
:
  Sequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: Connection refused
  	Is the server running on host "127.0.0.1" and accepting
  	TCP/IP connections on port 5432?
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/postgres.rb:208:in `connect'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool.rb:94:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:164:in `make_new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:137:in `available'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:127:in `block in acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `block in sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:195:in `sync'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:126:in `acquire'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:94:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:450:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1317:in `server_version'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/postgres.rb:1196:in `delete_clause_methods'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:813:in `clause_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/sql.rb:15:in `delete_sql'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:131:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
.....E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:34:in `test_add_obj_comment'
     31: 
     32:     def test_add_obj_comment
     33:         @obj_comment_manager.add_obj_comment(*TEST_FIELDS.values)
  => 34:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     35:     end
     36: 
     37:     def test_del_obj_comment
===============================================================================
E
===============================================================================
Error: test_add_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:266:in `query'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:180:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:129:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:351:in `fetch_rows'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:546:in `single_record'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:209:in `first'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:17:in `test_create_obj_comment'
     14: 
     15:     def test_create_obj_comment
     16:         @obj_comment_manager.create_obj_comment(*TEST_FIELDS.values)
  => 17:         assert_equal(TEST_FIELDS[:r_type], @table.first[:r_type])
     18: 
     19:         replaced_feilds = TEST_FIELDS.merge(comment: "new_comment")
     20:         @obj_comment_manager.create_obj_comment(*replaced_feilds.values)
===============================================================================
E
===============================================================================
Error: test_create_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:91:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:72:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:144:in `block in execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:141:in `execute_ddl'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/query.rb:135:in `run'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:54:in `test_create_table'
     51:     end
     52: 
     53:     def test_create_table
  => 54:         @db.run('drop table objcomment')
     55:         @obj_comment_manager.send :_create_table
     56:         assert_equal(true, @db.table_exists?(TABLE_NAME))
     57:     end
===============================================================================
E
===============================================================================
Error: test_create_table(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:38:in `test_del_obj_comment'
     35:     end
     36: 
     37:     def test_del_obj_comment
  => 38:         insert_comment_data
     39:         @obj_comment_manager.del_obj_comment(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     40:         assert_equal(0, @table.count)
     41:     end
===============================================================================
E
===============================================================================
Error: test_del_obj_comment(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:44:in `test_get_comment_for_obj'
     41:     end
     42: 
     43:     def test_get_comment_for_obj
  => 44:         insert_comment_data
     45:         comment = @obj_comment_manager.get_comment_for_obj(TEST_FIELDS[:identity], TEST_FIELDS[:r_type])
     46:         assert_equal(TEST_FIELDS[:comment], comment)
     47:     end
===============================================================================
E
===============================================================================
Error: test_get_comment_for_obj(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:11:in `test_get_obj_comments'
      8:     TEST_FIELDS = {:identity => 'grid', :r_type => 'is_a_type', :comment => 'is_a_comment'}
      9: 
     10:     def test_get_obj_comments
  => 11:         insert_comment_data
     12:         assert_equal(TEST_FIELDS[:identity], @table.first[:identity])
     13:     end
     14: 
===============================================================================
E
===============================================================================
Error: test_get_obj_comments(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_single_instance(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:134:in `execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:182:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:150:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:794:in `execute_insert'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:320:in `insert'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:60:in `insert_comment_data'
/root/zddiv3/tests/unit/grid/obj_comment_test.rb:25:in `test_update_obj_identity'
     22:     end
     23: 
     24:     def test_update_obj_identity
  => 25:         insert_comment_data
     26:         replaced_feilds = TEST_FIELDS.merge(identity: "new_comment")
     27:         @obj_comment_manager.update_obj_identity(TEST_FIELDS[:identity], TEST_FIELDS[:type], "new_identity")
     28:         assert_equal("new_identity", @table.first[:identity])
===============================================================================
E
===============================================================================
Error: test_update_obj_identity(ObjCommentTest)
: Sequel::DatabaseError: SQLite3::SQLException: no such table: objcomment
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `initialize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `new'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:91:in `prepare'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sqlite3-1.3.11/lib/sqlite3/database.rb:223:in `execute_batch'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block (2 levels) in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/logging.rb:33:in `log_yield'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:185:in `block in _execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:173:in `_execute'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/sqlite.rb:134:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:789:in `execute_dui'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:135:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/sequel-3.42.0/lib/sequel/adapters/shared/sqlite.rb:525:in `delete'
/root/zddiv3/tests/helper.rb:72:in `teardown'
===============================================================================
............................................................N
===============================================================================
TestACL#test_create_acl was redefined [test_create_acl(TestACL)]
/root/zddiv3/tests/dns/acl_test.rb:4:in `<class:TestACL>'
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestACL)
/root/zddiv3/tests/dns/acl_test.rb:7:in `test_create_acl'
      4:     def test_create_acl
      5:         acl_data = {"ids" => ["aaa", "bbb", "ccc"]}
      6:         code, response = send_cmd("delete", "acls", acl_data)
  =>  7:         assert_equal(200, code)
      8: 
      9:         #acl_data = {"comment"=>"", "name"=>"acl1", "networks"=>["1.2.3.4", "2.2.2.0/24"], "current_user"=>"admin"}
     10:         #code, response = send_cmd("post", "acls", acl_data)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.Connection refused - connect(2) for "127.0.0.1" port 4571
F
===============================================================================
Failure:
test_get_alarm_thresholds(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:46:in `test_get_alarm_thresholds'
     43: 
     44:     def test_get_alarm_thresholds
     45:         code, response = send_cmd("get", "/alarm_thresholds", {}, ALARM_PORT)
  => 46:         assert_equal(200, code)
     47: 
     48:         db_path = DDI::ALARM_DB_FP
     49:         unless File.exist?(db_path)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_mail_alarm_config(TestAlarm)
/root/zddiv3/tests/system_manager/alarm_test.rb:29:in `test_mail_alarm_config'
     26:         } 
     27: 
     28:         code, response = send_cmd("put", "/config/email_alarm", conf_data)
  => 29:         assert_equal(421, code)
     30:         assert_equal(REQUIRE_PARAMS, response["error"])
     31: 
     32:         conf_data.merge!({"emerg_level_frequency":"6"})
<421> expected but was
<nil>

diff:
? 421
? nil
===============================================================================
[test_put_audit_networks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.6.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:18:in `test_put_audit_networks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_ips__timerange]
    PATH: /audit/ips/1622390400000-1622476800000
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_audit_ips__timerange(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:61:in `test_get_audit_ips__timerange'
     58:         puts req.to_s
     59:         code, response = send_cmd(req.method, req.path, req.params)
     60:         puts "RESPONSE: #{response}", "\n"
  => 61:         assert_equal(200, code)
     62:         assert_equal(response.class, Hash)
     63:         assert_include(response.keys, "resources")
     64:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_audit_networks]
    PATH: /audit/networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_audit_networks(TestAudit)
/root/zddiv3/tests/ipam/audit_test.rb:76:in `test_get_audit_networks'
     73:         puts req.to_s
     74:         code, response = send_cmd(req.method, req.path, req.params)
     75:         puts "RESPONSE: #{response}"
  => 76:         assert_equal(200, code)
     77:         assert_equal(response.class, Hash)
     78:         puts "--delete pool"
     79:         req.method = "delete"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authusers]
--create one
    PATH: /auth-users
  METHOD: post
  PARAMS: {"comment"=>"", "username"=>"test_user", "passwd"=>"Abc123", "rep_passwd"=>"Abc123", "name"=>"test", "mailbox"=>"x@125.com", "phone"=>"11111111111", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:18:in `test_post_authusers'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "id")
     21:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authusers]
    PATH: /auth-users
  METHOD: put
  PARAMS: {"name"=>"test222", "mailbox"=>"x@125.com", "phone"=>"11111111111", "ids"=>["test_user"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:49:in `test_put_authusers'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers]
    PATH: /auth-users
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:66:in `test_get_authusers'
     63:         puts req.to_s
     64:         code, response = send_cmd(req.method, req.path, req.params)
     65:         puts "RESPONSE: #{response}", "\n"
  => 66:         assert_equal(200, code)
     67:         assert_equal(response.class, Hash)
     68:         assert_include(response.keys, "resources")
     69:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authusers__auth_user]
    PATH: /auth-users/test_user
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authusers__auth_user(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:89:in `test_get_authusers__auth_user'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "id")
     92:         assert_equal(response["id"], "test_user")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authusers]
    PATH: /auth-users
  METHOD: delete
  PARAMS: {"ids"=>["test_user", "user1", "user2", "user3"], "link_mac"=>true, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authusers(TestAuthUsers)
/root/zddiv3/tests/ipam/auth_users_test.rb:105:in `test_delete_authusers'
     102:         puts req.to_s
     103:         code, response = send_cmd(req.method, req.path, req.params)
     104:         puts "RESPONSE: #{response}", "\n"
  => 105:         assert_equal(200, code)
     106:         assert_equal(response.class, Hash)
     107:         assert_include(response.keys, "result")
     108:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_auth_zone_tree_display(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:12:in `test_auth_zone_tree_display'
      9:         zone5 = {"zone_type"=>"auth", "name"=>"bb.slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10: 
     11:         code, response = send_cmd("post", "/views/default/zones", zone1);
  => 12:         assert_equal(code, 200)
     13:         code, response = send_cmd("post", "/views/default/zones", zone2);
     14:         assert_equal(code, 200)
     15:         code, response = send_cmd("post", "/views/default/zones", zone3);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

Test User Zone Display Style:
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_save_user_zone_display_style(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:87:in `test_save_user_zone_display_style'
     84:     def test_save_user_zone_display_style
     85:         print "\nTest User Zone Display Style:\n"
     86:         code, response = send_cmd("get", "/users/admin/zone_display_style", {"current_user" => "admin"})
  => 87:         assert_equal(code, 200)
     88:         print "\tGet zone_display_style:",response,"\n"
     89: 
     90:         code, response = send_cmd("put", "/users/admin/zone_display_style", {"zone_display_style" => "tree", "current_user" => "admin"})
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clean_resources(TestAuthZoneTreeDisplay)
/root/zddiv3/tests/dns/auth_zone_tree_test.rb:106:in `test_clean_resources'
     103:     def test_clean_resources
     104:         del_zones = {"ids"=>["@", "aa.slave", "bb.slave", "master", "slave"], "current_user"=>"admin"}
     105:         code, response = send_cmd("delete", "/views/default/zones", del_zones);
  => 106:         assert_equal(code, 200)
     107: 
     108:         del_user = {"ids"=>["grd"], "current_user"=>"admin"}
     109:         code, response = send_cmd("delete", "/users", del_user);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"s1", "type"=>"radius", "overtime"=>"5", "retry"=>"5", "style"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:17:in `test_post_authenticatepolicy'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: put
  PARAMS: {"overtime"=>"5", "retry"=>"10", "style"=>"1", "ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:33:in `test_put_authenticatepolicy'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:52:in `test_get_authenticatepolicy'
     49:         puts req.to_s
     50:         code, response = send_cmd(req.method, req.path, req.params)
     51:         puts "RESPONSE: #{response}", "\n"
  => 52:         assert_equal(200, code)
     53:         assert_equal(response.class, Hash)
     54:         assert_include(response.keys, "resources")
     55:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__id]
    PATH: /authenticate-policy/s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:74:in `test_get_authenticatepolicy__id'
     71:         puts req.to_s
     72:         code, response = send_cmd(req.method, req.path, req.params)
     73:         puts "RESPONSE: #{response}", "\n"
  => 74:         assert_equal(200, code)
     75:         assert_equal(response.class, Hash)
     76:         assert_include(response.keys, "id")
     77:         assert_equal(response["id"], "s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: post
  PARAMS: {"comment"=>"", "ip_addr"=>"1.1.1.1", "radius_port"=>"1812", "protocol"=>"PAP", "public_key"=>"1234567890", "public_key_2"=>"1234567890", "enable"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:91:in `test_post_authenticatepolicy__policyid_authenticates'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "id")
     94:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: put
  PARAMS: {"radius_port"=>"1812", "protocol"=>"CHAP", "public_key"=>"123456", "public_key_2"=>"123456", "enable"=>"no", "ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:108:in `test_put_authenticatepolicy__policyid_authenticates'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Array)
     110:         assert_equal(response.length, 1)
     111:         assert_include(response[0].keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates]
    PATH: /authenticate-policy/s1/authenticates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:127:in `test_get_authenticatepolicy__policyid_authenticates'
     124:         puts req.to_s
     125:         code, response = send_cmd(req.method, req.path, req.params)
     126:         puts "RESPONSE: #{response}", "\n"
  => 127:         assert_equal(200, code)
     128:         assert_equal(response.class, Hash)
     129:         assert_include(response.keys, "resources")
     130:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_authenticatepolicy__policyid_authenticates__id]
    PATH: /authenticate-policy/s1/authenticates/1.1.1.1$s1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_authenticatepolicy__policyid_authenticates__id(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:150:in `test_get_authenticatepolicy__policyid_authenticates__id'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}", "\n"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "id")
     153:         assert_equal(response["id"], "1.1.1.1$s1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy__policy_id_authenticates]
    PATH: /authenticate-policy/:policy_id/authenticates
  METHOD: delete
  PARAMS: {"ids"=>["1.1.1.1$s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy__policy_id_authenticates(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:168:in `test_delete_authenticatepolicy__policy_id_authenticates'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "result")
     171:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_authenticatepolicy]
    PATH: /authenticate-policy
  METHOD: delete
  PARAMS: {"ids"=>["s1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_authenticatepolicy(TestAuthenticatyPolicy)
/root/zddiv3/tests/ipam/authenticate_policy_test.rb:184:in `test_delete_authenticatepolicy'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "result")
     187:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_post_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"acl1", "exp"=>[{"name"=>"vendor-class-identifier;60;string", "match"=>"equals", "value"=>"opt60-test"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:17:in `test_post_dhcpoptionacls'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: put
  PARAMS: {"exp"=>[{"name"=>"dhcp-parameter-request-list;55;array of unsigned integer 8", "match"=>"exists"}], "ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:33:in `test_put_dhcpoptionacls'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:56:in `test_get_dhcpoptionacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}", "\n"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Hash)
     58:         assert_include(response.keys, "resources")
     59:         assert_equal(response["resources"].length, 1)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionacls__name]
    PATH: /dhcp-option-acls/acl1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionacls__name(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:75:in `test_get_dhcpoptionacls__name'
     72:         puts req.to_s
     73:         code, response = send_cmd(req.method, req.path, req.params)
     74:         puts "RESPONSE: #{response}", "\n"
  => 75:         assert_equal(200, code)
     76:         assert_equal(response.class, Hash)
     77:         assert_include(response.keys, "id")
     78:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionacls__name_comment]
    PATH: /dhcp-option-acls/acl1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionacls__name_comment(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:92:in `test_put_dhcpoptionacls__name_comment'
     89:         puts req.to_s
     90:         code, response = send_cmd(req.method, req.path, req.params)
     91:         puts "RESPONSE: #{response}", "\n"
  => 92:         assert_equal(200, code)
     93:         assert_equal(response.class, Hash)
     94:         assert_include(response.keys, "id")
     95:         assert_equal(response["id"], "acl1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionacls]
    PATH: /dhcp-option-acls
  METHOD: delete
  PARAMS: {"ids"=>["acl1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionacls(TestDhcpOptionAcls)
/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb:110:in `test_delete_dhcpoptionacls'
     107:         puts req.to_s
     108:         code, response = send_cmd(req.method, req.path, req.params)
     109:         puts "RESPONSE: #{response}", "\n"
  => 110:         assert_equal(200, code)
     111:         assert_equal(response.class, Hash)
     112:         assert_include(response.keys, "result")
     113:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"test", "protocol"=>"IPv4", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:17:in `test_post_dhcpoptionspaces'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], req.params["protocol"] + "$" + req.params["name"])
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:49:in `test_get_dhcpoptionspaces'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Hash)
     51:         assert_include(response.keys, "resources")
     52:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid]
    PATH: /dhcp-option-spaces/IPv4$test
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:70:in `test_get_dhcpoptionspaces__spaceid'
     67:         puts req.to_s
     68:         code, response = send_cmd(req.method, req.path, req.params)
     69:         puts "RESPONSE: #{response}", "\n"
  => 70:         assert_equal(200, code)
     71:         assert_equal(response.class, Hash)
     72:         assert_include(response.keys, "id")
     73:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_comment]
    PATH: /dhcp-option-spaces/IPv4$test/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_comment(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:87:in `test_put_dhcpoptionspaces__spaceid_comment'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "id")
     90:         assert_equal(response["id"], "IPv4$test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"o1", "code"=>"55", "type"=>"ip-address", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:106:in `test_post_dhcpoptionspaces__spaceid_options'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: put
  PARAMS: {"code"=>"100", "type"=>"string", "ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:123:in `test_put_dhcpoptionspaces__spaceid_options'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Array)
     125:         assert_equal(response.length, 1)
     126:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:143:in `test_get_dhcpoptionspaces__spaceid_options'
     140:         puts req.to_s
     141:         code, response = send_cmd(req.method, req.path, req.params)
     142:         puts "RESPONSE: #{response}", "\n"
  => 143:         assert_equal(200, code)
     144:         assert_equal(response.class, Hash)
     145:         assert_include(response.keys, "resources")
     146:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpoptionspaces__spaceid_options__optionid]
    PATH: /dhcp-option-spaces/IPv4$test/options/test$o1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpoptionspaces__spaceid_options__optionid(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:163:in `test_get_dhcpoptionspaces__spaceid_options__optionid'
     160:         puts req.to_s
     161:         code, response = send_cmd(req.method, req.path, req.params)
     162:         puts "RESPONSE: #{response}", "\n"
  => 163:         assert_equal(200, code)
     164:         assert_equal(response.class, Hash)
     165:         assert_include(response.keys, "id")
     166:         assert_equal(response["id"], "test$o1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces__spaceid_options]
    PATH: /dhcp-option-spaces/IPv4$test/options
  METHOD: delete
  PARAMS: {"ids"=>["test$o1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces__spaceid_options(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:180:in `test_delete_dhcpoptionspaces__spaceid_options'
     177:         puts req.to_s
     178:         code, response = send_cmd(req.method, req.path, req.params)
     179:         puts "RESPONSE: #{response}", "\n"
  => 180:         assert_equal(200, code)
     181:         assert_equal(response.class, Hash)
     182:         assert_include(response.keys, "result")
     183:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpoptionspaces]
    PATH: /dhcp-option-spaces
  METHOD: delete
  PARAMS: {"ids"=>["IPv4$test"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpoptionspaces(TestDhcpOptionSpaces)
/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb:196:in `test_delete_dhcpoptionspaces'
     193:         puts req.to_s
     194:         code, response = send_cmd(req.method, req.path, req.params)
     195:         puts "RESPONSE: #{response}", "\n"
  => 196:         assert_equal(200, code)
     197:         assert_equal(response.class, Hash)
     198:         assert_include(response.keys, "result")
     199:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_multidhcpresources]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.7.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_multidhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:22:in `test_post_multidhcpresources'
     19:         puts req.to_s
     20:         code, response = send_cmd(req.method, req.path, req.params)
     21:         puts "RESPONSE: #{response}"
  => 22:         assert_equal(200, code)
     23:         assert_equal(response.class, Hash)
     24:         puts "--create template"
     25:         req.method = "post"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_dhcpresources]
--create pool one
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: post
  PARAMS: {"comment"=>"", "type"=>"dynamic", "ip_start"=>"3.0.7.1", "ip_end"=>"3.0.7.2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:68:in `test_post_networks__network_dhcpresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: put
  PARAMS: {"default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"1000", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "type"=>"dynamic", "max_value"=>"86400", "min_value"=>"1000", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["3.0.7.1-3.0.7.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:99:in `test_put_networks__network_dhcpresources'
      96:         puts req.to_s
      97:         code, response = send_cmd(req.method, req.path, req.params)
      98:         puts "RESPONSE: #{response}", "\n"
  =>  99:         assert_equal(200, code)
     100:         assert_equal(response.class, Array)
     101:         assert_equal(response.length, 1)
     102:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:119:in `test_get_networks__network_dhcpresources__resourceid'
     116:         puts req.to_s
     117:         code, response = send_cmd(req.method, req.path, req.params)
     118:         puts "RESPONSE: #{response}", "\n"
  => 119:         assert_equal(200, code)
     120:         assert_equal(response.class, Hash)
     121:         assert_include(response.keys, "id")
     122:         assert_equal(response["id"], "3.0.7.1-3.0.7.2")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources]
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:135:in `test_get_networks__network_dhcpresources'
     132:         puts req.to_s
     133:         code, response = send_cmd(req.method, req.path, req.params)
     134:         puts "RESPONSE: #{response}", "\n"
  => 135:         assert_equal(200, code)
     136:         assert_equal(response.class, Hash)
     137:         assert_include(response.keys, "resources")
     138:         assert_equal(response["resources"].length, 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:157:in `test_put_networks__network_dhcpresources__resourceid_ddnsconfig'
     154:         puts req.to_s
     155:         code, response = send_cmd(req.method, req.path, req.params)
     156:         puts "RESPONSE: #{response}", "\n"
  => 157:         assert_equal(200, code)
     158:         assert_equal(response.class, Hash)
     159:         assert_include(response.keys, "ddns_domainname")
     160:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpresources__resourceid_ddnsconfig]
    PATH: /networks/3.0.7.0$28/dhcp-resources/3.0.7.1-3.0.7.2/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpresources__resourceid_ddnsconfig(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:173:in `test_get_networks__network_dhcpresources__resourceid_ddnsconfig'
     170:         puts req.to_s
     171:         code, response = send_cmd(req.method, req.path, req.params)
     172:         puts "RESPONSE: #{response}", "\n"
  => 173:         assert_equal(200, code)
     174:         assert_equal(response.class, Hash)
     175:         assert_include(response.keys, "ddns_domainname")
     176:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_dhcpresources]
--delete pool
    PATH: /networks/3.0.7.0$28/dhcp-resources
  METHOD: delete
  PARAMS: {"ids"=>["3.0.7.1-3.0.7.2", "3.0.7.11-3.0.7.12", "3.0.7.13-3.0.7.14", "3.0.7.3-3.0.7.4"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks__network_dhcpresources(TestDhcpResources)
/root/zddiv3/tests/ipam/dhcp_resources_test.rb:261:in `test_delete_networks__network_dhcpresources'
     258:         puts req.to_s
     259:         code, response = send_cmd(req.method, req.path, req.params)
     260:         puts "RESPONSE: #{response}"
  => 261:         assert_equal(200, code)
     262:         assert_equal(response.class, Hash)
     263:         assert_include(response.keys, "result")
     264:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"t", "type"=>"ipv4-dynamic", "offset"=>"1", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:17:in `test_post_dhcptemplates'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert_include(response.keys, "id")
     20:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: put
  PARAMS: {"offset"=>"3", "number"=>"2", "owner"=>"local.master", "default_lease_time"=>"43200", "max_lease_time"=>"86400", "min_lease_time"=>"300", "domain_name_servers"=>[], "routers"=>[], "domain_name"=>"", "acls"=>["any"], "auto_bind"=>"no", "bootp"=>"yes", "options"=>[], "max_value"=>"86400", "min_value"=>"300", "def_value"=>"43200", "max_unit"=>"1", "min_unit"=>"1", "def_unit"=>"1", "ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:33:in `test_put_dhcptemplates'
     30:         puts req.to_s
     31:         code, response = send_cmd(req.method, req.path, req.params)
     32:         puts "RESPONSE: #{response}", "\n"
  => 33:         assert_equal(200, code)
     34:         assert_equal(response.class, Array)
     35:         assert_equal(response.length, 1)
     36:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name]
    PATH: /dhcp-templates/t
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:53:in `test_get_dhcptemplates__name'
     50:         puts req.to_s
     51:         code, response = send_cmd(req.method, req.path, req.params)
     52:         puts "RESPONSE: #{response}", "\n"
  => 53:         assert_equal(200, code)
     54:         assert_equal(response.class, Hash)
     55:         assert_include(response.keys, "id")
     56:         assert_equal(response["id"], "t")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:68:in `test_get_dhcptemplates'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "resources")
     71:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:91:in `test_get_dhcptemplates__name_ddnsconfig'
     88:         puts req.to_s
     89:         code, response = send_cmd(req.method, req.path, req.params)
     90:         puts "RESPONSE: #{response}", "\n"
  => 91:         assert_equal(200, code)
     92:         assert_equal(response.class, Hash)
     93:         assert_include(response.keys, "enable_ddns")
     94:         assert_equal(response["enable_ddns"], "no")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_ddnsconfig]
    PATH: /dhcp-templates/t/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"xxx", "ddns_rev_domainname"=>"yyy", "primary_server"=>"10.10.10.10", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_ddnsconfig(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:108:in `test_put_dhcptemplates__name_ddnsconfig'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "ddns_domainname")
     111:         assert_equal(response["ddns_domainname"], "xxx")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcptemplates__name_comment]
    PATH: /dhcp-templates/t/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcptemplates__name_comment(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:125:in `test_put_dhcptemplates__name_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "comment")
     128:         assert_equal(response["comment"], "just for test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcptemplates]
    PATH: /dhcp-templates
  METHOD: delete
  PARAMS: {"ids"=>["t"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcptemplates(TestDhcpTemplates)
/root/zddiv3/tests/ipam/dhcp_templates_test.rb:141:in `test_delete_dhcptemplates'
     138:         puts req.to_s
     139:         code, response = send_cmd(req.method, req.path, req.params)
     140:         puts "RESPONSE: #{response}", "\n"
  => 141:         assert_equal(200, code)
     142:         assert_equal(response.class, Hash)
     143:         assert_include(response.keys, "result")
     144:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls]
--fingerprint acl
    PATH: /dhcp-acls
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fp_acl", "type"=>"fingerprint", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:18:in `test_post_dhcpacls'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_include(response["name"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls]
--modify
    PATH: /dhcp-acls
  METHOD: put
  PARAMS: {"comment"=>"", "ids"=>["option_acl", "fp_acl"], "type"=>"macs", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:56:in `test_put_dhcpacls'
     53:         puts req.to_s
     54:         code, response = send_cmd(req.method, req.path, req.params)
     55:         puts "RESPONSE: #{response}"
  => 56:         assert_equal(200, code)
     57:         assert_equal(response.class, Array)
     58:         assert_equal(response.length, 2)
     59:         response.each do |r| 
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls]
    PATH: /dhcp-acls
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:90:in `test_get_dhcpacls'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl]
    PATH: /dhcp-acls/fp_acl
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:108:in `test_get_dhcpacls__acl'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpacls__acl_comment]
    PATH: /dhcp-acls/fp_acl/comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpacls__acl_comment(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:125:in `test_put_dhcpacls__acl_comment'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}", "\n"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "id")
     128:         assert_equal(response["id"], "fp_acl")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: post
  PARAMS: {"macs_file"=>"", "resources"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:145:in `test_post_dhcpacls__acl_aclresources'
     142:         puts req.to_s
     143:         code, response = send_cmd(req.method, req.path, req.params)
     144:         puts "RESPONSE: #{response}"
  => 145:         assert_equal(200, code)
     146:         assert_equal(response.class, Array)
     147:         assert_equal(response.length, 2)
     148:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:206:in `test_get_dhcpacls__acl_aclresources'
     203:         puts req.to_s
     204:         code, response = send_cmd(req.method, req.path, req.params)
     205:         puts "RESPONSE: #{response}"
  => 206:         assert_equal(200, code)
     207:         assert_equal(response.class, Hash)
     208:         assert_include(response.keys, "resources")
     209:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpacls__acl_aclresources__resource]
    PATH: /dhcp-acls/mac_acl/acl-resources/00:22:22:22:22:22
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpacls__acl_aclresources__resource(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:256:in `test_get_dhcpacls__acl_aclresources__resource'
     253:         puts req.to_s
     254:         code, response = send_cmd(req.method, req.path, req.params)
     255:         puts "RESPONSE: #{response}", "\n"
  => 256:         assert_equal(200, code)
     257:         assert_equal(response.class, Array)
     258:         assert_equal(response.length, 1)
     259:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls__acl_aclresources]
--mac acl resource
    PATH: /dhcp-acls/mac_acl/acl-resources
  METHOD: delete
  PARAMS: {"ids"=>["00:22:22:22:22:22", "00:22:22:22:22:23"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_dhcpacls__acl_aclresources(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:276:in `test_delete_dhcpacls__acl_aclresources'
     273:         puts req.to_s
     274:         code, response = send_cmd(req.method, req.path, req.params)
     275:         puts "RESPONSE: #{response}"
  => 276:         assert_equal(200, code)
     277:         assert_equal(response.class, Hash)
     278:         assert_include(response.keys, "result")
     279:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpacls]
    PATH: /dhcp-acls
  METHOD: delete
  PARAMS: {"ids"=>["fp_acl", "mac_acl", "option_acl"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpacls(TestDhcpacls)
/root/zddiv3/tests/ipam/acls_test.rb:311:in `test_delete_dhcpacls'
     308:         puts req.to_s
     309:         code, response = send_cmd(req.method, req.path, req.params)
     310:         puts "RESPONSE: #{response}", "\n"
  => 311:         assert_equal(200, code)
     312:         assert_equal(response.class, Hash)
     313:         assert_include(response.keys, "result")
     314:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:8:in `_test_put_base_safe'
(eval):1:in `test_put_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_base_safe]
Connection refused - connect(2) for "127.0.0.1" port 20120
Base_Safes: 
F
===============================================================================
Failure:
test_get_nodes_base_safe(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:27:in `_test_get_nodes_base_safe'
(eval):1:in `test_get_nodes_base_safe'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_servfail]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_servfail(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:37:in `_test_put_servfail'
(eval):1:in `test_put_servfail'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_high_performance]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_high_performance(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:49:in `_test_put_high_performance'
(eval):1:in `test_put_high_performance'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_concurrent_recursion_count]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_concurrent_recursion_count(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:57:in `_test_put_concurrent_recursion_count'
(eval):1:in `test_put_concurrent_recursion_count'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_get_nodes_security]
Connection refused - connect(2) for "127.0.0.1" port 20120
Recurity servfail: 
F
===============================================================================
Failure:
test_get_nodes_security(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:74:in `block in _test_get_nodes_security'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `each'
/root/zddiv3/tests/dns/dns_security_test.rb:70:in `_test_get_nodes_security'
(eval):1:in `test_get_nodes_security'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_nodes_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_nodes_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:82:in `_test_nodes_cache_clean'
(eval):1:in `test_nodes_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_clean]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_clean(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:89:in `_test_node_cache_clean'
(eval):1:in `test_node_cache_clean'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_node_cache_search]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_node_cache_search(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:96:in `_test_node_cache_search'
(eval):1:in `test_node_cache_search'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_cache_config]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_cache_config(TestDnsSecurity)
/root/zddiv3/tests/dns/dns_security_test.rb:103:in `_test_put_cache_config'
(eval):1:in `test_put_cache_config'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"444444", "vendor_class_identifier"=>"555555", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:18:in `test_post_dhcpfingerprints'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "name")
     21:         assert_equal(response["name"], "fingerprint_test")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: put
  PARAMS: {"type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:36:in `test_put_dhcpfingerprints'
     33:         puts req.to_s
     34:         code, response = send_cmd(req.method, req.path, req.params)
     35:         puts "RESPONSE: #{response}", "\n"
  => 36:         assert_equal(200, code)
     37:         assert_equal(response.class, Array)
     38:         assert_equal(response.length, 1)
     39:         assert_include(response[0].keys, "name")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_dhcpfingerprints(TestFingerprints)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/ipam/fingerprints_test.rb:53:in `test_get_dhcpfingerprints'
     50:         req.params.merge!({"current_user"=>"admin"})
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
  => 53:         puts "RESPONSE: Response too large. Total number of fingerprints is #{response["resources"].length.to_s}", "\n"
     54:         assert_equal(200, code)
     55:         assert_equal(response.class, Hash)
     56:         assert_include(response.keys, "resources")
===============================================================================
[test_get_dhcpfingerprints__id]
    PATH: /dhcp-fingerprints/
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints__id(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:69:in `test_get_dhcpfingerprints__id'
     66:         puts req.to_s
     67:         code, response = send_cmd(req.method, req.path, req.params)
     68:         puts "RESPONSE: #{response}", "\n"
  => 69:         assert_equal(200, code)
     70:         assert_equal(response.class, Hash)
     71:         assert_include(response.keys, "id")
     72:         assert_equal(response["id"],  @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprinttype]
    PATH: /dhcp-fingerprint-type
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprinttype(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:84:in `test_get_dhcpfingerprinttype'
     81:         puts req.to_s
     82:         code, response = send_cmd(req.method, req.path, req.params)
     83:         puts "RESPONSE: #{response}", "\n"
  => 84:         assert_equal(200, code)
     85:         assert_equal(response.class, Array)
     86:         response.each do |r|
     87:             assert_include(["Others", "Switch", "Apple", "Router", "Printer", "Linux", "Android", "Windows", "AP"], r)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_dhcpfingerprints__id_comment]
    PATH: /dhcp-fingerprints//comment
  METHOD: put
  PARAMS: {"comment"=>"test add comment", "name"=>"fingerprint_test", "type"=>"Switch", "dhcp_parameter_request_list"=>"333333", "vendor_class_identifier"=>"555555", "id"=>nil, "write_access"=>1, "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_dhcpfingerprints__id_comment(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:102:in `test_put_dhcpfingerprints__id_comment'
      99:         puts req.to_s
     100:         code, response = send_cmd(req.method, req.path, req.params)
     101:         puts "RESPONSE: #{response}", "\n"
  => 102:         assert_equal(200, code)
     103:         assert_equal(response.class, Hash)
     104:         assert_include(response.keys, "id")
     105:         assert_equal(response["id"], @@ids.first)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_dhcpfingerprints_update]
    PATH: /dhcp-fingerprints/update
  METHOD: post
  PARAMS: {"file_content"=>"MjAxNi0wOS0yMixrbmV0LXpkbnMKQW5kcm9pZCxHYWxheHkgUzJYLCIxLDMz\nLDMsNiwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0zLjAuMTUt\nMTE0OTcyOTphcm12N2w6U01ESzQyMTAKQW5kcm9pZCxHYWxheHkgUzNZLCIx\nLDMzLDMsNiwxNSwyOCw1MSw1OCw1OSIsZGhjcGNkLTUuMi4xMDpMaW51eC0z\nLjAuOC0xMTMxNDgzOmFybXY3bDpTQU1TVU5HIE0yX1ZaVw==\n", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_dhcpfingerprints_update(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:122:in `test_post_dhcpfingerprints_update'
     119:         puts req.to_s
     120:         code, response = send_cmd(req.method, req.path, req.params)
     121:         puts "RESPONSE: #{response}", "\n"
  => 122:         assert_equal(200, code)
     123:         assert_equal(response.class, Hash)
     124:         assert_include(response.keys, "result")
     125:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_dhcpfingerprints_update_version]
    PATH: /dhcp-fingerprints/update/version
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_dhcpfingerprints_update_version(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:137:in `test_get_dhcpfingerprints_update_version'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "version")
     140:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_dhcpfingerprints]
    PATH: /dhcp-fingerprints
  METHOD: delete
  PARAMS: {"ids"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_dhcpfingerprints(TestFingerprints)
/root/zddiv3/tests/ipam/fingerprints_test.rb:152:in `test_delete_dhcpfingerprints'
     149:         puts req.to_s
     150:         code, response = send_cmd(req.method, req.path, req.params)
     151:         puts "RESPONSE: #{response}", "\n"
  => 152:         assert_equal(200, code)
     153:         assert_equal(response.class, Hash)
     154:         assert_include(response.keys, "result")
     155:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:8:in `_test_create_forward_zone'
(eval):1:in `test_create_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:24:in `_test_batch_add_forward_zone'
(eval):1:in `test_batch_add_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:39:in `_test_update_forward_zone'
(eval):1:in `test_update_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_forward_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_forward_zone_owners(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:47:in `_test_update_forward_zone_owners'
(eval):1:in `test_update_forward_zone_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_forward_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_forward_zone_comment(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:63:in `_test_put_forward_zone_comment'
(eval):1:in `test_put_forward_zone_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_forward_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_forward_zone(TestForwardZone)
/root/zddiv3/tests/dns/forward_zone_test.rb:71:in `_test_del_forward_zone'
(eval):1:in `test_del_forward_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_clear_offline_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:180:in `test_clear_offline_webcliuser'
     177: 
     178:     def test_clear_offline_webcliuser
     179:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => "127.0.0.1"})
  => 180:         assert_equal(200, code)
     181: 
     182:         code, response = send_cmd("delete", "/webcli/del-webcliuser", {"host" => ""})
     183:         assert_equal(422, code)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_creat_webcliuser(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:195:in `block in test_creat_webcliuser'
     192:     def test_creat_webcliuser
     193:         (1..6).each do
     194:             code, response = send_cmd("post", "/webcli/open-webcli", {"host" => "127.0.0.1"})
  => 195:             assert_equal(200, code)
     196:             assert_equal(true, !response["username"].empty?)
     197:         end
     198: 
/root/zddiv3/tests/grid/grid_test.rb:193:in `each'
/root/zddiv3/tests/grid/grid_test.rb:193:in `test_creat_webcliuser'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.....sh: useradd: command not found
passwd: Unknown user name '_webclim9PLo2'.
sh: useradd: command not found
passwd: Unknown user name '_webclikT5iC4'.
sh: useradd: command not found
passwd: Unknown user name '_webcli3Zf8Gg'.
F
===============================================================================
Failure:
test_create_username3(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:244:in `rescue in test_create_username3'
/root/zddiv3/tests/grid/grid_test.rb:242:in `test_create_username3'
     239:     end
     240: 
     241:     def test_create_username3
  => 242:         create_webcli_user
     243:     rescue Exception => e
     244:         assert_equal("create user success", "CREATE_WEBCLI_CONNECT_ERR")
     245:     end
<"create user success"> expected but was
<"CREATE_WEBCLI_CONNECT_ERR">

diff:
? create user success      
? CREATE_WEBCLI_CONNECT_ERR
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_is_incluster(TestGrid)
/root/zddiv3/tests/grid/grid_test.rb:220:in `test_is_incluster'
     217:         else
     218:             # attention for single node, node name:local.master
     219:             code, response = send_cmd("get", "/groups/local/members/master", {"current_user"=>"admin"})
  => 220:             assert_equal(200, code)
     221:             assert_equal("yes", response["is_in_cluster"])
     222:         end
     223:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_login(TestGrid)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/grid/grid_test.rb:22:in `test_login'
     19:     def test_login
     20:         # admin login
     21:         code, response = _login("admin", DDI::Crypt.rsa_encrypt("admin"))
  => 22:         assert_equal(2, response["fcm_cloud"])
     23:         assert_equal(2, response["cloud_core_toolbar"])
     24: 
     25:         # crate test, with fcm_cloud = 0 cloud_core_toolbar = 1
===============================================================================
mv: cannot stat `/etc/issue_tmp': No such file or directory
E
===============================================================================
Error: test_system_loop(TestGrid)
: Errno::ENOENT: No such file or directory - ntpdate
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in ``'
/root/zddiv3/tests/system_manager/system_loop_test.rb:22:in `test_system_loop'
     19:     rescue Exception => e
     20:         puts "#{e},\n#{$@[0..20]}"
     21:     ensure
  => 22:         `ntpdate ntp1.aliyun.com`
     23:     end
     24: end
===============================================================================
..........
[_test_add_ip_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_ip_rrl(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:8:in `_test_add_ip_rrl'
(eval):1:in `test_add_ip_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:21:in `_test_update_ip_rrls'
(eval):1:in `test_update_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_ip_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_ip_rrls_owners(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:38:in `_test_update_ip_rrls_owners'
(eval):1:in `test_update_ip_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_ip_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_ip_rrl_comment(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:55:in `_test_set_ip_rrl_comment'
(eval):1:in `test_set_ip_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
IP-rrls: 
F
===============================================================================
Failure:
test_get_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:48:in `_test_get_ip_rrls'
(eval):1:in `test_get_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_ip_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_ip_rrls(TestIPRRL)
/root/zddiv3/tests/dns/ip_rrl_test.rb:64:in `_test_del_ip_rrls'
(eval):1:in `test_del_ip_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_put_ipamconfig]
    PATH: /ipam-config
  METHOD: put
  PARAMS: {"comment"=>"", "zombie_time"=>"110", "enable_port_alarm"=>"yes", "enable_conflict_check"=>"yes", "enable_unmanaged_check"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:17:in `test_put_ipamconfig'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Hash)
     19:         assert(response.has_key?("zombie_time") && response["zombie_time"].eql?("110"))
     20:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamconfig]
    PATH: /ipam-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_ipamconfig(TestIpamConfig)
/root/zddiv3/tests/ipam/ipam_config_test.rb:31:in `test_get_ipamconfig'
     28:         puts req.to_s
     29:         code, response = send_cmd(req.method, req.path, req.params)
     30:         puts "RESPONSE: #{response}", "\n"
  => 31:         assert_equal(200, code)
     32:         assert_equal(response.class, Hash)
     33:         assert response.keys.length.eql?(4)
     34:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_ipamsearchresources]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr1", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_get_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:19:in `test_get_ipamsearchresources'
     16:         puts req.to_s
     17:         code, response = send_cmd(req.method, req.path, req.params)
     18:         puts "RESPONSE: #{response}"
  => 19:         assert_equal(200, code)
     20:         assert_equal(response.class, Array)
     21:         assert_equal(response.length, 1)
     22:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_ipamsearchresources]
    PATH: /ipam-search-resources
  METHOD: put
  PARAMS: {""=>"101", "_in"=>"no", "ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:68:in `test_put_ipamsearchresources'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Array)
     70:         assert_equal(response.length, 1)
     71:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_ipamsearchresources]
--delete search
    PATH: /ipam-search-resources
  METHOD: delete
  PARAMS: {"ids"=>["networks#2.2.2.0$24#2.2.2.0$24"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_ipamsearchresources(TestIpamSearch)
/root/zddiv3/tests/ipam/ipam_search_resources_test.rb:87:in `test_delete_ipamsearchresources'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         puts "--delete user defined attribute"
     90:         req.method = "put"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
200
{"result"=>"service already inited"}
200
{"cpu_usage"=>"0.06", "memory_usage"=>"0.28", "disk_usage"=>"0.85", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-06-02 00:00:01", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.[test_post_macinformations]
    PATH: /mac-informations
  METHOD: post
  PARAMS: {"comment"=>"", "MAC"=>"00:01:01:01:01:01", "nic_port"=>["eth1", "eth2", "eth3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:18:in `test_post_macinformations'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}", "\n"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         assert_include(response.keys, "MAC")
     21:         assert_include(response["MAC"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_macinformations]
    PATH: /mac-informations
  METHOD: put
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "nic_port"=>["eth1", "eth0"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:34:in `test_put_macinformations'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert_equal(response.length, 1)
     37:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations]
    PATH: /mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:51:in `test_get_macinformations'
     48:         puts req.to_s
     49:         code, response = send_cmd(req.method, req.path, req.params)
     50:         puts "RESPONSE: #{response}", "\n"
  => 51:         assert_equal(200, code)
     52:         assert_equal(response.class, Hash)
     53:         assert_include(response.keys, "resources")
     54:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_macinformations__mac]
    PATH: /mac-informations/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_macinformations__mac(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:71:in `test_get_macinformations__mac'
     68:         puts req.to_s
     69:         code, response = send_cmd(req.method, req.path, req.params)
     70:         puts "RESPONSE: #{response}", "\n"
  => 71:         assert_equal(200, code)
     72:         assert_equal(response.class, Hash)
     73:         assert_include(response.keys, "id")
     74:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_macinformations]
    PATH: /mac-informations
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_macinformations(TestMacinformation)
/root/zddiv3/tests/ipam/macs_test.rb:87:in `test_delete_macinformations'
     84:         puts req.to_s
     85:         code, response = send_cmd(req.method, req.path, req.params)
     86:         puts "RESPONSE: #{response}", "\n"
  => 87:         assert_equal(200, code)
     88:         assert_equal(response.class, Hash)
     89:         assert_include(response.keys, "result")
     90:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
E
===============================================================================
Error: test_all_customer_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:112:in `test_all_customer_menus'
     109:     end
     110: 
     111:     def test_all_customer_menus
  => 112:         m = _menu_manager.all_customer_menus
     113:         check_result("all_customer_menus", m){|m| !m.nil?}
     114:     end
     115: 
===============================================================================
E
===============================================================================
Error: test_all_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:107:in `test_all_menus'
     104:     end
     105: 
     106:     def test_all_menus
  => 107:         m = _menu_manager.all_menus
     108:         check_result("all_menus", m){|m| !m.nil?}
     109:     end
     110: 
===============================================================================
E
===============================================================================
Error: test_all_system_menus(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:117:in `test_all_system_menus'
     114:     end
     115: 
     116:     def test_all_system_menus
  => 117:         m = _menu_manager.all_system_menus
     118:         check_result("all_system_menus", m){|m| !m.nil?}
     119:     end
     120: end
===============================================================================
Test analyse_items                            --> Success
.E
===============================================================================
Error: test_calc_start_end_time(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cf0920>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:182:in `test_calc_start_end_time'
     179:     end
     180: 
     181:     def test_calc_start_end_time
  => 182:         result _report_task.calc_start_end_time(Time.now.to_i, Time.now.to_i)
     183:         check_result("calc_start_end_time", result){|result| !result.nil?}
     184:     end
     185: 
===============================================================================
E
===============================================================================
Error: test_calc_start_end_time2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cf0858>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:233:in `test_calc_start_end_time2'
     230:     end
     231: 
     232:     def test_calc_start_end_time2
  => 233:         result = _task_schedul.calc_start_end_time(nil, nil)
     234:         check_result("calc_start_end_time", result){|result| !result.nil?}
     235:     end
     236: 
===============================================================================
E
===============================================================================
Error: test_delete_by_ids(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:102:in `test_delete_by_ids'
      99:     end
     100: 
     101:     def test_delete_by_ids
  => 102:         _item_manager.delete_by_ids(["1"])
     103:     end
     104: 
     105:     def test_delete_overtime_report
===============================================================================
.N
===============================================================================
TestMenu#test_delete_generate was redefined [test_delete_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:153:in `<class:TestMenu>'
===============================================================================
Test delete_generate                          --> Success
.E
===============================================================================
Error: test_delete_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:84:in `test_delete_menu'
     81: 
     82:     def test_delete_menu
     83:         params = {"lang" => "en", "ids" => [9]}
  => 84:         menus = _menu_manager.delete_menu(params)
     85:         check_result("delete_menu", menus){|menus| !menus.nil?}
     86:     end
     87: 
===============================================================================
Test delete_network_pool                      --> Success
..E
===============================================================================
Error: test_delete_report_list(TestMenu)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:533:in `block in delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:531:in `delete_by_ids'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_generate.rb:776:in `delete_report_list'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:81:in `test_delete_report_list'
     78:     end
     79: 
     80:     def test_delete_report_list
  => 81:         result = _report_manager.delete_report_list(["1"])
     82:         check_result("delete_report_list", result){|result| !result.nil?}
     83:     end
     84: 
===============================================================================
Test deploy                                   --> Success
.Test fetch_conf-topn                          --> Success
Test fetch_conf-lease                         --> Success
.N
===============================================================================
TestMenu#test_fetch_generate was redefined [test_fetch_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:116:in `<class:TestMenu>'
===============================================================================
Test fetch_generate                           --> Success
.Test fetch_mail_config                        --> Success
.E
===============================================================================
Error: test_fetch_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:66:in `test_fetch_menu'
     63: 
     64:     def test_fetch_menu
     65:         params = {"lang" => "en"}
  => 66:         menus = _menu_manager.fetch_menu(params)
     67:         check_result("fetch_menu", menus){|menus| !menus.nil?}
     68:     end
     69: 
===============================================================================
Test update_network_pool                      --> Success
.Test fetch_report_list                        --> Success
.N
===============================================================================
TestMenu#test_generate_report_manual was redefined [test_generate_report_manual(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:158:in `<class:TestMenu>'
===============================================================================
Test generate_report_manual                   --> Success
.Test has_mail_config                          --> Success
.E
===============================================================================
Error: test_lookup_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:102:in `test_lookup_menu'
      99:     def test_lookup_menu
     100:         menu   = DDI::STATS::GridStatsMenu.new("cpu_like", "cpu_like", DDI::STATS::MENU_TYPE_SYSTEM)
     101: 
  => 102:         m = _menu_manager.lookup_menu(menu)
     103:         check_result("menu_deploy", m){|m| !m.nil?}
     104:     end
     105: 
===============================================================================
E
===============================================================================
Error: test_menu_deploy(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:95:in `test_menu_deploy'
     92:             {"id"=>"slave24", "ip"=>"10.1.108.24", "type"=>"ZDNS", "state"=>"warning", "is_master"=>false, "is_backup"=>false, "is_am"=>false }
     93:         ]}]
     94: 
  => 95:         deploy = _menu_manager.menu_deploy(menu, groups)
     96:         check_result("menu_deploy", deploy){|deploy| !deploy.nil?}
     97:     end
     98: 
===============================================================================
N
===============================================================================
TestMenu#test_modify_generate was redefined [test_modify_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:137:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_modify_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cefed0>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:149:in `test_modify_generate'
     146:         available = "yes"
     147:         max_report = 5
     148: 
  => 149:         result = _scheduler_manager.modify_generate(["1"], name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     150:         check_result("modify_generate", result){|result| !result.nil?}
     151:     end
     152: 
===============================================================================
Test modify_mail_config                       --> Success
.Test name                                     --> Success
.Test name_equal                               --> Success
.N
===============================================================================
TestMenu#test_new_generate was redefined [test_new_generate(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:121:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_new_generate(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cefbd8>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:133:in `test_new_generate'
     130:         available = "yes"
     131:         max_report = 5
     132:         
  => 133:         result = _scheduler_manager.new_generate(name, template, start_time, end_time, schedule_time, mail_auto, mail_sender, mail_receiver, available, max_report)
     134:         check_result("new_generate", result){|result| !result.nil?}
     135:     end
     136: 
===============================================================================
E
===============================================================================
Error: test_new_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:72:in `test_new_menu'
     69: 
     70:     def test_new_menu
     71:         params = {"lang" => "en", "name" => "TMENU"}
  => 72:         menus = _menu_manager.new_menu(params)
     73:         check_result("new_menu", menus){|menus| !menus.nil?}
     74:     end
     75: 
===============================================================================
Test report_send_mail                         --> Success
.Test report_send_mail                         --> Success
.E
===============================================================================
Error: test_run1(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cef930>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:190:in `test_run1'
     187:         is_schedule = true
     188:         start_time = Time.now.to_i - 3600
     189:         end_time  = Time.now.to_i 
  => 190:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     191:     end
     192:     def test_run2
     193:         is_schedule = false
===============================================================================
E
===============================================================================
Error: test_run2(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cef890>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:196:in `test_run2'
     193:         is_schedule = false
     194:         start_time = Time.now.to_i - 3600
     195:         end_time  = Time.now.to_i 
  => 196:         _report_task.run(_scheduler_manager, is_schedule, start_time, end_time)
     197:     end
     198: 
     199:     def test_should_run?
===============================================================================
E
===============================================================================
Error: test_should_run2?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cef7c8>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:221:in `_task_schedul'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:228:in `test_should_run2?'
     225:     end
     226: 
     227:     def test_should_run2?
  => 228:         result = _task_schedul.should_run?
     229:         check_result("should_run?", result){|result| !result.nil?}
     230:     end
     231: 
===============================================================================
E
===============================================================================
Error: test_should_run?(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cef728>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:200:in `test_should_run?'
     197:     end
     198: 
     199:     def test_should_run?
  => 200:         result = _report_task.should_run?
     201:         check_result("should_run?", result){|result| !result.nil?}
     202:     end
     203: 
===============================================================================
E
===============================================================================
Error: test_test_mail_config(TestMenu)
: RuntimeError: 20002018010710
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:101:in `rescue in test_mail_config'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/report_mail.rb:96:in `test_mail_config'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:284:in `test_test_mail_config'
     281:         enable_verify = "yes"
     282:         from_address = "zhangxiao@zdns"
     283:         passwd = "123456"
  => 284:         result = _mail_manager.test_mail_config(server, port, account, enable_verify, from_address, passwd)
     285:         check_result("test_mail_config", result){|result| !result.nil?}
     286:     end
     287: 
===============================================================================
N
===============================================================================
TestMenu#test_to_hash was redefined [test_to_hash(TestMenu)]
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:204:in `<class:TestMenu>'
===============================================================================
E
===============================================================================
Error: test_to_hash(TestMenu)
: NameError: undefined local variable or method `template' for #<TestMenu:0x00000007cef598>
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:176:in `_report_task'
/root/zddiv3/tests/unit/am/gridstats_report_test.rb:205:in `test_to_hash'
     202:     end
     203: 
     204:     def test_to_hash
  => 205:         result = _report_task.to_hash
     206:         check_result("to_hash", result){|result| !result.nil?}
     207:     end
     208: 
===============================================================================
E
===============================================================================
Error: test_update_conf(TestMenu)
: NoMethodError: undefined method `update_conf' for #<DDI::STATS::WasuUsageSetting:0x000000018e3400>
/root/zddiv3/tests/unit/am/network_pool_test.rb:82:in `test_update_conf'
     79:     end
     80: 
     81:     def test_update_conf
  => 82:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_USAGE_TOPN, [], 0)
     83:         check_result("update_conf-topn", result){|result| !result.nil?}
     84: 
     85:         result = _wasu_setting.update_conf(DDI::STATS::STATIC_TASK_LEASES_USAGE, [], 30)
===============================================================================
E
===============================================================================
Error: test_update_menu(TestMenu)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_menu.rb:270:in `initialize'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `new'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:58:in `_menu_manager'
/root/zddiv3/tests/unit/am/gridstats_menu_test.rb:78:in `test_update_menu'
     75: 
     76:     def test_update_menu
     77:         params = {"lang" => "en", "ids" => [8], "priority" => 2}
  => 78:         menus = _menu_manager.update_menu(params)
     79:         check_result("update_menu", menus){|menus| !menus.nil?}
     80:     end
     81: 
===============================================================================
Test update_network_pool                      --> Success
.
[_test_add_name_rrl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_add_name_rrl(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:8:in `_test_add_name_rrl'
(eval):1:in `test_add_name_rrl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:21:in `_test_update_name_rrls'
(eval):1:in `test_update_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_name_rrls_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_name_rrls_owners(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:38:in `_test_update_name_rrls_owners'
(eval):1:in `test_update_name_rrls_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_set_name_rrl_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_set_name_rrl_comment(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:55:in `_test_set_name_rrl_comment'
(eval):1:in `test_set_name_rrl_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_get_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
Name-rrls: 
F
===============================================================================
Failure:
test_get_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:48:in `_test_get_name_rrls'
(eval):1:in `test_get_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_name_rrls]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_name_rrls(TestNameRRL)
/root/zddiv3/tests/dns/name_rrl_test.rb:64:in `_test_del_name_rrls'
(eval):1:in `test_del_name_rrls'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
[test_post_multinetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.1.0/28", "3.0.2.0/28", "3.0.3.0/28"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response valid resource.
F
===============================================================================
Failure:
test_post_multinetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:19:in `test_post_multinetworks'
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
     18:         puts "[warn] This interface does not response valid resource.\n"
  => 19:         assert_equal(200, code)
     20:     end
     21: 
     22:     def test_post_importnetworks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_importnetworks]
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"resource_content"=>[{"network"=>"1.0.0.0/24", "owners"=>["local.master"]}, {"network"=>"2.0.0.0/24", "owners"=>["local.master"]}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_post_importnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:33:in `test_post_importnetworks'
     30:         code, response = send_cmd(req.method, req.path, req.params)
     31:         puts "RESPONSE: #{response}"
     32:         puts "[warn] This interface does not response a valid resouce.\n"
  => 33:         assert_equal(200, code)
     34:     end
     35: 
     36:     def test_post_networks
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks]
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.0.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:47:in `test_post_networks'
     44:         puts req.to_s
     45:         code, response = send_cmd(req.method, req.path, req.params)
     46:         puts "RESPONSE: #{response}", "\n"
  => 47:         assert_equal(200, code)
     48:         assert_equal(response.class, Hash)
     49:         assert_include(response.keys, "id")
     50:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks]
--create user defined attribute
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"attr", "type"=>"text", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:64:in `test_put_networks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Array)
     66:         assert_equal(response.length, 1)
     67:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks]
    PATH: /networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:118:in `test_get_networks'
     115:         puts req.to_s
     116:         code, response = send_cmd(req.method, req.path, req.params)
     117:         puts "RESPONSE: #{response}", "\n"
  => 118:         assert_equal(200, code)
     119:         assert_equal(response.class, Hash)
     120:         assert_include(response.keys, "resources")
     121:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_leafnetworks]
    PATH: /leaf-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_leafnetworks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:134:in `test_get_leafnetworks'
     131:         puts req.to_s
     132:         code, response = send_cmd(req.method, req.path, req.params)
     133:         puts "RESPONSE: #{response}", "\n"
  => 134:         assert_equal(200, code)
     135:         assert_equal(response.class, Hash)
     136:         assert_include(response.keys, "resources")
     137:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network]
    PATH: /networks/3.0.0.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:151:in `test_get_networks__network'
     148:         puts req.to_s
     149:         code, response = send_cmd(req.method, req.path, req.params)
     150:         puts "RESPONSE: #{response}", "\n"
  => 151:         assert_equal(200, code)
     152:         assert_equal(response.class, Hash)
     153:         assert_include(response.keys, "id")
     154:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "domain_name"=>"", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"43200", "def_value"=>"43200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"9000", "max_value"=>"86400", "max_unit"=>"1", "min_lease_time"=>"800", "min_value"=>"800", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:168:in `test_put_networks__network_dhcpconfig'
     165:         puts req.to_s
     166:         code, response = send_cmd(req.method, req.path, req.params)
     167:         puts "RESPONSE: #{response}", "\n"
  => 168:         assert_equal(200, code)
     169:         assert_equal(response.class, Hash)
     170:         assert_include(response.keys, "max_lease_time")
     171:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_dhcpconfig]
    PATH: /networks/3.0.0.0$28/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_dhcpconfig(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:184:in `test_get_networks__network_dhcpconfig'
     181:         puts req.to_s
     182:         code, response = send_cmd(req.method, req.path, req.params)
     183:         puts "RESPONSE: #{response}", "\n"
  => 184:         assert_equal(200, code)
     185:         assert_equal(response.class, Hash)
     186:         assert_include(response.keys, "max_lease_time")
     187:         assert_equal(response["max_lease_time"], "9000")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: put
  PARAMS: {"hardware_ethernet"=>"00:11:12:12:12:31", "type"=>"manual", "nic_port"=>[""], "ids"=>["3.0.0.2"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:201:in `test_put_networks__network_addressinfos'
     198:         puts req.to_s
     199:         code, response = send_cmd(req.method, req.path, req.params)
     200:         puts "RESPONSE: #{response}", "\n"
  => 201:         assert_equal(200, code)
     202:         assert_equal(response.class, Array)
     203:         assert_equal(response.length, 1)
     204:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:221:in `test_get_networks__network_addressinfos'
     218:         puts req.to_s
     219:         code, response = send_cmd(req.method, req.path, req.params)
     220:         puts "RESPONSE: #{response}", "\n"
  => 221:         assert_equal(200, code)
     222:         assert_equal(response.class, Hash)
     223:         assert_include(response.keys, "total_size")
     224:         assert_equal(response["total_size"], 16)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks__network_addressinfos]
    PATH: /networks/3.0.0.0$28/addressinfos
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.3"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
[warn] This interface does not response a valid resouce.
F
===============================================================================
Failure:
test_delete_networks__network_addressinfos(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:240:in `test_delete_networks__network_addressinfos'
     237:         code, response = send_cmd(req.method, req.path, req.params)
     238:         puts "RESPONSE: #{response}"
     239:         puts "[warn] This interface does not response a valid resouce.\n"
  => 240:         assert_equal(200, code)
     241:     end
     242: 
     243:     def test_post_networks__network_addressinfos_importmanualaddresses
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_addressinfos_importmanualaddresses]
    PATH: /networks/3.0.0.0$28/addressinfos/import-manual-addresses
  METHOD: post
  PARAMS: {"resource_content"=>[{"ip_addr"=>"3.0.0.3", "hardware_ethernet"=>"00:11:22:33:44:01", "nic_port"=>"eth2"}, {"ip_addr"=>"3.0.0.4", "hardware_ethernet"=>"00:11:22:33:44:02", "nic_port"=>"eth3"}, {"ip_addr"=>"3.0.0.5", "hardware_ethernet"=>"00:11:22:33:44:03", "nic_port"=>"eth4"}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_addressinfos_importmanualaddresses(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:254:in `test_post_networks__network_addressinfos_importmanualaddresses'
     251:         puts req.to_s
     252:         code, response = send_cmd(req.method, req.path, req.params)
     253:         puts "RESPONSE: #{response}", "\n"
  => 254:         assert_equal(200, code)
     255:         assert_equal(response.class, Array)
     256:         assert_equal(response.length, 3)
     257:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_resize]
--expand network
    PATH: /networks/3.0.0.0$28/resize
  METHOD: post
  PARAMS: {"netmask"=>"25", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_networks__network_resize(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:274:in `test_post_networks__network_resize'
     271:         puts req.to_s
     272:         code, response = send_cmd(req.method, req.path, req.params)
     273:         puts "RESPONSE: #{response}"
  => 274:         assert_equal(200, code)
     275:         assert_equal(response.class, Hash)
     276:         assert_include(response.keys, "id")
     277:         assert_equal(response["id"], "3.0.0.0$25")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_split]
    PATH: /networks/3.0.0.0$28/split
  METHOD: post
  PARAMS: {"netmask"=>"30", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_split(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:307:in `test_post_networks__network_split'
     304:         puts req.to_s
     305:         code, response = send_cmd(req.method, req.path, req.params)
     306:         puts "RESPONSE: #{response}", "\n"
  => 307:         assert_equal(200, code)
     308:         assert_equal(response.class, Hash)
     309:         assert_include(response.keys, "children_count")
     310:         assert_equal(response["children_count"], 4)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_children]
    PATH: /networks/3.0.0.0$28/children
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_children(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:323:in `test_get_networks__network_children'
     320:         puts req.to_s
     321:         code, response = send_cmd(req.method, req.path, req.params)
     322:         puts "RESPONSE: #{response}", "\n"
  => 323:         assert_equal(200, code)
     324:         assert_equal(response.class, Hash)
     325:         assert_include(response.keys, "resources")
     326:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_networks__network_parentattrs]
    PATH: /networks/3.0.1.0$30/parent-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_networks__network_parentattrs(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:341:in `test_get_networks__network_parentattrs'
     338:         puts req.to_s
     339:         code, response = send_cmd(req.method, req.path, req.params)
     340:         puts "RESPONSE: #{response}", "\n"
  => 341:         assert_equal(200, code)
     342: =begin 
     343:         assert_equal(response.class, Hash)
     344:         assert_include(response.keys, "id")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_networks__network_join]
    PATH: /networks/3.0.0.0$30/join
  METHOD: post
  PARAMS: {"netmask"=>"28", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_networks__network_join(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:399:in `test_post_networks__network_join'
     396:         puts req.to_s
     397:         code, response = send_cmd(req.method, req.path, req.params)
     398:         puts "RESPONSE: #{response}", "\n"
  => 399:         assert_equal(200, code)
     400:         assert_equal(response.class, Hash)
     401:         assert_include(response.keys, "id")
     402:         assert_equal(response["id"], "3.0.0.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_networks]
--normal delete
    PATH: /networks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.0.0/28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_networks(TestNetworks)
/root/zddiv3/tests/ipam/networks_test.rb:418:in `test_delete_networks'
     415:         puts req.to_s
     416:         code, response = send_cmd(req.method, req.path, req.params)
     417:         puts "RESPONSE: #{response}"
  => 418:         assert_equal(200, code)
     419:         assert_equal(response.class, Hash)
     420:         assert_include(response.keys, "result")
     421:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.......usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
...ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_del_pair(TestPair)
: ArgumentError: wrong number of arguments (1 for 4)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:25:in `new_pair'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:43:in `test_del_pair'
     40:     end
     41: 
     42:     def test_del_pair
  => 43:         _pair_manager.new_pair("1")
     44:     end
     45: 
     46:     def test_fetch_pair
===============================================================================
ping: unknown host master
ping: unknown host slave
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
E
===============================================================================
Error: test_fetch_pair(TestPair)
: NoMethodError: undefined method `delete' for #<DDI::STATS::GridStatsPair:0x00000007d9f4e8>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `block in fetch_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:43:in `fetch_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:47:in `test_fetch_pair'
     44:     end
     45: 
     46:     def test_fetch_pair
  => 47:         pairs = _pair_manager.fetch_pairs
     48:         check_result("fetch_pairs", pairs){|pairs| !pairs.nil?}
     49:     end
     50: 
===============================================================================
.ping: unknown host master
ping: unknown host slave
Test pair_info                                --> Success
.Test test_request_route1                      --> Failed
E
===============================================================================
Error: test_request_route1(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:63:in `test_request_route1'
     60:     def test_request_route1
     61:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     62:         result = _pair_manager.request_route("get", "1", "/views/*/stats/9", body)
  => 63:         check_result("test_request_route1", result){|result| !result.nil?}
     64:     end
     65: 
     66:     def test_request_route2
===============================================================================
ping: unknown host master
ping: unknown host slave
Test test_request_route2                      --> Failed
E
===============================================================================
Error: test_request_route2(TestPair)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:24:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:69:in `test_request_route2'
     66:     def test_request_route2
     67:         body = {"menu"=>"9", "group"=>"local", "member"=> "master", "view"=>"*", "current_authority_name"=>"admin", "slave"=>1}.to_json
     68:         result = _pair_manager.request_route("get", "0", "/views/*/stats/9", body)
  => 69:         check_result("test_request_route2", result){|result| !result.nil?}
     70:     end
     71: 
     72:     #######################GridStatsPair############################
===============================================================================
.ping: unknown host master
ping: unknown host slave
Test pair_info                                --> Success
.ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_update_member(TestPair)
: NoMethodError: undefined method `ip=' for #<String:0x00000004379f20>
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `block in update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:293:in `update_cmd_ip'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:50:in `update_member'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:52:in `test_update_member'
     49:     end
     50: 
     51:     def test_update_member
  => 52:         _pair_manager.update_member("1", "127.0.0.1")
     53:     end
     54: 
     55:     def test_update_pairs
===============================================================================
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
ping: unknown host master
ping: unknown host slave
E
===============================================================================
Error: test_update_pairs(TestPair)
: ArgumentError: wrong number of arguments (1 for 2)
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/db_resource_manager.rb:254:in `replace_resource'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:58:in `block in update_pairs'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `each'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_pair.rb:57:in `update_pairs'
/root/zddiv3/tests/unit/am/gridstats_pair_test.rb:56:in `test_update_pairs'
     53:     end
     54: 
     55:     def test_update_pairs
  => 56:         result = _pair_manager.update_pairs(["1"], "1", "127.0.0.1")
     57:         check_result("update_pairs", result){|result| !result.nil?}
     58:     end
     59: 
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zones(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:7:in `test_view_zones'
      4:     def test_view_zones()
      5:         view1 = {"comment"=>"", "name"=>"grd", "owners"=>["local.master"], "acls"=>[], "black_acls"=>[], "filter_aaaa"=>"no", "filter_aaaa_ips"=>["any"], "recursion_enable"=>"yes", "non_recursive_acls"=>[], "bind_ips"=>["0.0.0.0"], "fail_forwarder"=>"", "dns64s"=>[], "need_tsig_key"=>"no", "tsig_host"=>[], "current_user"=>"admin"}
      6:         code, response = send_cmd("post", "/views", view1);
  =>  7:         assert_equal(code, 200)
      8: 
      9:         zone1 = {"zone_type"=>"auth", "name"=>"master", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
     10:         zone2 = {"zone_type"=>"auth", "name"=>"slave", "owners"=>["local.master"], "server_type"=>"master", "default_ttl"=>"3600", "slaves"=>[], "ad_controller"=>[], "renewal"=>"no", "dsprimary"=>"no", "current_user"=>"admin"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_view_zone_rrs(TestParseAuthViewZoneRR)
/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb:32:in `test_view_zone_rrs'
     29:         rr2 = {"comment"=>"", "name"=>"22", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     30:         rr3 = {"comment"=>"", "name"=>"33", "type"=>"A", "ttl"=>"3600", "rdata"=>"1.2.3.69", "is_enable"=>"yes", "klass"=>"IN", "current_user"=>"admin"}
     31:         code, response = send_cmd("post", "/views/default/zones/master/rrs", rr1);
  => 32:         assert_equal(code, 200)
     33:         code, response = send_cmd("post", "/views/default/zones/slave/rrs", rr1);
     34:         assert_equal(code, 200)
     35:         code, response = send_cmd("post", "/views/grd/zones/master/rrs", rr1);
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
Connection refused - connect(2) for "127.0.0.1" port 20120
.[test_post_querytasks]
    PATH: /query-tasks
  METHOD: post
  PARAMS: {"depth"=>"3", "netdisco"=>"yes", "comment"=>"", "node"=>"local.master", "snmp_ver"=>"v1", "snmp_port"=>"161", "snmp_group"=>"public", "snmp_hosts"=>["10.1.101.1"], "enable_auto"=>"yes", "reccurence"=>"daily", "networks"=>[], "cron"=>"00 2 * * *", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_querytasks(TestQueryTasks)
/root/zddiv3/tests/ipam/query_tasks_test.rb:17:in `test_post_querytasks'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert_equal(response.length, 2)
     20:         response.each do |r|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_Redirection]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:8:in `_test_create_redirections'
(eval):1:in `test_create_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_batch_add_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_batch_add_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:26:in `_test_batch_add_redirections'
(eval):1:in `test_batch_add_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:41:in `_test_update_redirections'
(eval):1:in `test_update_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_redirections_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_redirections_owners(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:49:in `_test_update_redirections_owners'
(eval):1:in `test_update_redirections_owners'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_put_redirection_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_redirection_comment(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:65:in `_test_put_redirection_comment'
(eval):1:in `test_put_redirection_comment'
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_del_redirections]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_redirections(TestRedirection)
/root/zddiv3/tests/dns/redirection_url_test.rb:73:in `_test_del_redirections'
(eval):1:in `test_del_redirections'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Test fetch_regular_config                     --> Failed
E
===============================================================================
Error: test_fetch_regular_config(TestRegular)
: RuntimeError: 
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:23:in `check_result'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:36:in `test_fetch_regular_config'
     33: 
     34:     def test_fetch_regular_config
     35:         result = _config.fetch_regular_config
  => 36:         check_result("fetch_regular_config", result){|result| !result.nil?}
     37:     end
     38: 
     39:     def test_modify_regular_confg
===============================================================================
E
===============================================================================
Error: test_modify_regular_confg(TestRegular)
: NoMethodError: undefined method `[]' for nil:NilClass
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:35:in `notify_redis_attime'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/stats/grid_stats_regular.rb:30:in `modify_regular_confg'
/root/zddiv3/tests/unit/am/gridstats_regular_test.rb:40:in `test_modify_regular_confg'
     37:     end
     38: 
     39:     def test_modify_regular_confg
  => 40:         result = _config.modify_regular_confg("yes", "yes", "yes", "yes", "yes", ["www.sohu.com"])
     41:         check_result("modify_regular_config", result){|result| !result.nil?}
     42:     end
     43: 
===============================================================================
.Test read_zones_from_file                     --> Success
.[test_post_roaminghosts]
--create one
    PATH: /roaming-hosts
  METHOD: post
  PARAMS: {"comment"=>"", "mac"=>"00:01:01:01:01:01", "name"=>"hostname1", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:18:in `test_post_roaminghosts'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create two"
     21:         req.path = "/roaming-hosts"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts]
    PATH: /roaming-hosts
  METHOD: put
  PARAMS: {"name"=>"hostname111", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:49:in `test_put_roaminghosts'
     46:         puts req.to_s
     47:         code, response = send_cmd(req.method, req.path, req.params)
     48:         puts "RESPONSE: #{response}", "\n"
  => 49:         assert_equal(200, code)
     50:         assert_equal(response.class, Array)
     51:         assert_equal(response.length, 1)
     52:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_roaminghosts__host_comment]
    PATH: /roaming-hosts/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "name"=>"hostname111", "id"=>"00:01:01:01:01:01", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_roaminghosts__host_comment(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:68:in `test_put_roaminghosts__host_comment'
     65:         puts req.to_s
     66:         code, response = send_cmd(req.method, req.path, req.params)
     67:         puts "RESPONSE: #{response}", "\n"
  => 68:         assert_equal(200, code)
     69:         assert_equal(response.class, Hash)
     70:         assert_include(response.keys, "id")
     71:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts]
    PATH: /roaming-hosts
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:85:in `test_get_roaminghosts'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "resources")
     88:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_roaminghosts__host]
    PATH: /roaming-hosts/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_roaminghosts__host(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:107:in `test_get_roaminghosts__host'
     104:         puts req.to_s
     105:         code, response = send_cmd(req.method, req.path, req.params)
     106:         puts "RESPONSE: #{response}", "\n"
  => 107:         assert_equal(200, code)
     108:         assert_equal(response.class, Hash)
     109:         assert_include(response.keys, "id")
     110:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_roaminghosts]
    PATH: /roaming-hosts
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01", "00:01:01:01:01:02", "00:01:01:01:01:03"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_delete_roaminghosts(TestRoamingHosts)
/root/zddiv3/tests/ipam/roaming_host_test.rb:123:in `test_delete_roaminghosts'
     120:         puts req.to_s
     121:         code, response = send_cmd(req.method, req.path, req.params)
     122:         puts "RESPONSE: #{response}", "\n"
  => 123:         assert_equal(200, code)
     124:         assert_equal(response.class, Hash)
     125:         assert_include(response.keys, "result")
     126:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_config(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:10:in `test_get_sso_config'
      7:     def test_get_sso_config
      8:         # first create sso config table
      9:         code, response = send_cmd("get", "/sso/config", {})
  => 10:         assert_equal(code, 200)
     11: 
     12:         # 1. check init sso config
     13:         db_config = `sqlite3 /usr/local/zddi/grid.db "select config from sso_config"`
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:94:in `test_get_sso_user_permission_1'
     91:         tmp_params["protocol"] = "p2"
     92:         tmp_params["enable"] = "yes"
     93:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 94:         assert_equal(code, 200)
     95: 
     96:         tmp_params = {"user_name" => "test_sso"}
     97:         code, response = send_cmd("get", "/sso/user/permission", tmp_params.dup)
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_get_sso_user_permission_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:105:in `test_get_sso_user_permission_2'
     102:         tmp_params = {}
     103:         tmp_params["enable"] = "no"
     104:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 105:         assert_equal(code, 200)
     106: 
     107:         # test no user
     108:         tmp_params = {"user_name" => "test_sso_2"}
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_1(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:42:in `test_put_sso_config_1'
     39:         tmp_params["protocol"] = "p2"
     40:         tmp_params["enable"] = "yes"
     41:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 42:         assert_equal(code, 200)
     43:         config = response
     44: 
     45:         # 1. check api result
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_sso_config_2(TestSSOConfig)
/root/zddiv3/tests/system_manager/sso_test.rb:82:in `test_put_sso_config_2'
     79:         tmp_params["protocol"] = "p2"
     80:         tmp_params["enable"] = "yes"
     81:         code, response = send_cmd("put", "/sso/config", tmp_params.dup)
  => 82:         assert_equal(code, 422)
     83:     end
     84: 
     85:     def test_get_sso_user_permission_1
<nil> expected but was
<422>

diff:
? nil
? 422
===============================================================================
[test_post_scantasks]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.5.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:18:in `test_post_scantasks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create scan task"
     21:         req.path = "/scan-tasks"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_scantasks]
    PATH: /scan-tasks
  METHOD: put
  PARAMS: {"node"=>"local.master", "scan_type"=>["ICMP", "NETBIOS", "ARP"], "enable_auto"=>"yes", "reccurence"=>"weekly", "cron"=>"00 2 * * 3", "ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:45:in `test_put_scantasks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks]
    PATH: /scan-tasks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:64:in `test_get_scantasks'
     61:         puts req.to_s
     62:         code, response = send_cmd(req.method, req.path, req.params)
     63:         puts "RESPONSE: #{response}", "\n"
  => 64:         assert_equal(200, code)
     65:         assert_equal(response.class, Hash)
     66:         assert_include(response.keys, "resources")
     67:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_scantasks__task]
    PATH: /scan-tasks/3.0.5.0$28
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_scantasks__task(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:85:in `test_get_scantasks__task'
     82:         puts req.to_s
     83:         code, response = send_cmd(req.method, req.path, req.params)
     84:         puts "RESPONSE: #{response}", "\n"
  => 85:         assert_equal(200, code)
     86:         assert_equal(response.class, Hash)
     87:         assert_include(response.keys, "id")
     88:         assert_equal(response["id"], "3.0.5.0$28")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_start]
    PATH: /scan-tasks/3.0.5.0$28/start
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_start(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:101:in `test_post_scantasks__task_start'
      98:         puts req.to_s
      99:         code, response = send_cmd(req.method, req.path, req.params)
     100:         puts "RESPONSE: #{response}", "\n"
  => 101:         assert_equal(200, code)
     102:         assert_equal(response.class, Hash)
     103:         assert_include(response.keys, "result")
     104:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_stop]
    PATH: /scan-tasks/3.0.5.0$28/stop
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_stop(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:117:in `test_post_scantasks__task_stop'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "result")
     120:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_scantasks__task_pause]
    PATH: /scan-tasks/3.0.5.0$28/pause
  METHOD: post
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_post_scantasks__task_pause(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:133:in `test_post_scantasks__task_pause'
     130:         puts req.to_s
     131:         code, response = send_cmd(req.method, req.path, req.params)
     132:         puts "RESPONSE: #{response}", "\n"
  => 133:         assert_equal(200, code)
     134:         assert_equal(response.class, Hash)
     135:         assert_include(response.keys, "result")
     136:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_scantasks]
--delete scan task
    PATH: /scan-tasks
  METHOD: delete
  PARAMS: {"ids"=>["3.0.5.0$28"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_scantasks(TestScanTasks)
/root/zddiv3/tests/ipam/scan_tasks_test.rb:150:in `test_delete_scantasks'
     147:         puts req.to_s
     148:         code, response = send_cmd(req.method, req.path, req.params)
     149:         puts "RESPONSE: #{response}"
  => 150:         assert_equal(200, code)
     151:         assert_equal(response.class, Hash)
     152:         assert_include(response.keys, "result")
     153:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_post_sharednetworks]
--create 2 network 3.0.0.0/24 and 3.0.1.0/24
    PATH: /multi-networks
  METHOD: post
  PARAMS: {"comment"=>"", "networks"=>["3.0.0.0/24", "3.0.1.0/24"], "owners"=>["local.master"], "templates"=>"0", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:18:in `test_post_sharednetworks'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         puts "--create shared-network 3.0.0.0/24"
     20:         req.path = "/shared-networks"
     21:         req.params = {"comment"=>"","name"=>"shared-network1","type"=>"IPv4","networks"=>["3.0.0.0/24"]}
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks]
    PATH: /shared-networks
  METHOD: put
  PARAMS: {"networks"=>["3.0.0.0/24", "3.0.1.0/24"], "ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:45:in `test_put_sharednetworks'
     42:         puts req.to_s
     43:         code, response = send_cmd(req.method, req.path, req.params)
     44:         puts "RESPONSE: #{response}", "\n"
  => 45:         assert_equal(200, code)
     46:         assert_equal(response.class, Array)
     47:         assert_equal(response.length, 1)
     48:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks]
    PATH: /shared-networks
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:62:in `test_get_sharednetworks'
     59:         puts req.to_s
     60:         code, response = send_cmd(req.method, req.path, req.params)
     61:         puts "RESPONSE: #{response}", "\n"
  => 62:         assert_equal(200, code)
     63:         assert_equal(response.class, Hash)
     64:         assert_include(response.keys, "resources")
     65:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name]
    PATH: /shared-networks/shared-network1
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:82:in `test_get_sharednetworks__name'
     79:         puts req.to_s
     80:         code, response = send_cmd(req.method, req.path, req.params)
     81:         puts "RESPONSE: #{response}", "\n"
  => 82:         assert_equal(200, code)
     83:         assert_equal(response.class, Hash)
     84:         assert_include(response.keys, "id")
     85:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_comment]
    PATH: /shared-networks/shared-network1/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_comment(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:98:in `test_put_sharednetworks__name_comment'
      95:         puts req.to_s
      96:         code, response = send_cmd(req.method, req.path, req.params)
      97:         puts "RESPONSE: #{response}", "\n"
  =>  98:         assert_equal(200, code)
      99:         assert_equal(response.class, Hash)
     100:         assert_include(response.keys, "id")
     101:         assert_equal(response["id"], "shared-network1")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: put
  PARAMS: {"comment"=>"", "shared_network_used"=>"no", "enable_ddns"=>"yes", "ddns_domainname"=>"aaaa", "ddns_rev_domainname"=>"bbbb", "primary_server"=>"55.55.55.55", "enable_security"=>"no", "key_name"=>"", "key_secret"=>"", "inherit"=>"no", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:117:in `test_put_sharednetworks__name_ddns_config'
     114:         puts req.to_s
     115:         code, response = send_cmd(req.method, req.path, req.params)
     116:         puts "RESPONSE: #{response}", "\n"
  => 117:         assert_equal(200, code)
     118:         assert_equal(response.class, Hash)
     119:         assert_include(response.keys, "ddns_domainname")
     120:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_ddns_config]
    PATH: /shared-networks/shared-network1/ddns_config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_ddns_config(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:137:in `test_get_sharednetworks__name_ddns_config'
     134:         puts req.to_s
     135:         code, response = send_cmd(req.method, req.path, req.params)
     136:         puts "RESPONSE: #{response}", "\n"
  => 137:         assert_equal(200, code)
     138:         assert_equal(response.class, Hash)
     139:         assert_include(response.keys, "ddns_domainname")
     140:         assert_equal(response["ddns_domainname"], "aaaa")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: put
  PARAMS: {"comment"=>"", "isIPv4"=>true, "domain_name"=>"XXX", "domain_name_servers"=>[], "routers"=>[], "acls"=>[], "acls_access"=>"allow", "default_lease_time"=>"3200", "def_value"=>"3200", "def_unit"=>"1", "hardware_ethernet"=>"", "failover_name"=>"", "max_lease_time"=>"6400", "max_value"=>"6400", "max_unit"=>"1", "min_lease_time"=>"300", "min_value"=>"300", "min_unit"=>"1", "inherit"=>"no", "auto_bind"=>"no", "bootp"=>"yes", "prefix6_start"=>"", "prefix6_end"=>"", "prefix6_bits"=>"", "range6_type"=>"", "options"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:158:in `test_put_sharednetworks__name_dhcpconfig'
     155:         puts req.to_s
     156:         code, response = send_cmd(req.method, req.path, req.params)
     157:         puts "RESPONSE: #{response}", "\n"
  => 158:         assert_equal(200, code)
     159:         assert_equal(response.class, Hash)
     160:         assert_include(response.keys, "domain_name")
     161:         assert_equal(response["domain_name"], "XXX")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_sharednetworks__name_dhcpconfig]
    PATH: /shared-networks/shared-network1/dhcp-config
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_sharednetworks__name_dhcpconfig(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:174:in `test_get_sharednetworks__name_dhcpconfig'
     171:         puts req.to_s
     172:         code, response = send_cmd(req.method, req.path, req.params)
     173:         puts "RESPONSE: #{response}", "\n"
  => 174:         assert_equal(200, code)
     175:         assert_include(response.keys, "domain_name")
     176:         assert_equal(response["domain_name"], "XXX")
     177:     end
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_sharednetworks]
--delete shared network
    PATH: /shared-networks
  METHOD: delete
  PARAMS: {"ids"=>["shared-network1"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_sharednetworks(TestSharedNetworks)
/root/zddiv3/tests/ipam/shared_networks_test.rb:190:in `test_delete_sharednetworks'
     187:         puts req.to_s
     188:         code, response = send_cmd(req.method, req.path, req.params)
     189:         puts "RESPONSE: #{response}"
  => 190:         assert_equal(200, code)
     191:         assert_equal(response.class, Hash)
     192:         assert_include(response.keys, "result")
     193:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
F
===============================================================================
Failure:
test_update_config(TestSnmpdAgentMgr)
/root/zddiv3/tests/unit/zva/snmpd_test.rb:22:in `test_update_config'
     19: 
     20:         assert_equal 1, @table.count
     21:         assert_equal "private", snmp_agent_mgr.read_community
  => 22:         assert_equal 3000, snmp_agent_mgr.port
     23:         assert_equal "yes", snmp_agent_mgr.switch
     24:     end
     25: 
<3000> expected but was
<"3000">

diff:
? "3000"
===============================================================================

[_test_create_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:8:in `_test_create_stub_zone'
(eval):1:in `test_create_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:31:in `_test_update_stub_zone'
(eval):1:in `test_update_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_stub_zone_owners]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_stub_zone_owners(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:39:in `_test_update_stub_zone_owners'
(eval):1:in `test_update_stub_zone_owners'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_put_stub_zone_comment]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_put_stub_zone_comment(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:47:in `_test_put_stub_zone_comment'
(eval):1:in `test_put_stub_zone_comment'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_del_stub_zone]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_del_stub_zone(TestStubZone)
/root/zddiv3/tests/dns/stub_zone_test.rb:55:in `_test_del_stub_zone'
(eval):1:in `test_del_stub_zone'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================
.{"cpu_usage"=>"0.54", "memory_usage"=>"0.32", "disk_usage"=>"0.85", "cpu_temp"=>0, "nic_status"=>{}, "power_status"=>{"power_available_disk"=>"no", "power_available_curr"=>"no", "PSU1"=>"normal", "PSU2"=>"normal", "power_available_change"=>"no", "PSU1_status_change"=>"no", "PSU2_status_change"=>"no"}, "log_bak_nfs_status"=>true, "zombie_progress_num"=>0, "core_file_num"=>0, "time"=>"2021-06-02 00:01:22", "ha_status"=>{}, "ha_pair_status"=>{"status"=>"yes", "warn_msg_code"=>"", "params_list"=>[]}, "ha_type"=>"standalone", "ha_sync_success_time"=>nil, "bond_status"=>[], "manual_stop_ospf"=>"true", "manual_stop_ospf6"=>"true", "license_is_valid"=>true, "license_days"=>-1, "license_remain_days"=>0, "license_file_status"=>{"result"=>""}, "license_info"=>{"valid-days"=>"for-ever", "authorization-method"=>"local", "DNS"=>"started", "QPS"=>"52134", "DHCP"=>"started", "LPS"=>"26167", "ADD"=>"advance", "background-protection"=>"stoped", "effect-time"=>"", "expire-time"=>"", "auth-type"=>"duly", "is_expired"=>false, "machine"=>"d0019b80af02dbaa1e2c094f27f2a6f8sHRiLCUXMowHe2tgr+Lm+KxwA+O/yhMgArn8C1kDWbkjdCHdMOPLuPX41Y52rG0WoCTkffjM6WRPn475PfcdMQ==", "authori_code"=>"e8287affbaf070129d3a9df2d871696801fcVFIAAAAAAAAAAGVwdppYUmtwbHqhXVlvc3SnZFNpZ2dqbFlscW1zdVJUWwAAAAAAAAB+6yaC+QAc23huFbrTAvxKronFhmTK/tNW0KuCif0ne/bcmPD24l7bnH+FuZ1WflFniOIyooo3OHNYVIoE2NsM1Z6cXK0dTFdKpz/aSIkoGdYkjbAnVMFJFZBHkzNlnqCyg+lXAfl+BOu3KgsS5er0NtF+GfZ1PiAblvAR2/BFqFJbVgAAAAAAAACEjoyJk5qGkY1kTmZdXol7iGN/joNnaGuThpNsbW5yi4yPkHiee3d4laOYfIi6uLO2wMa5tMnLucvOutDGy8SahJyVlJeXlJidl5ukjZ+gqqKqrampsePh3N/p7+Ld9eHt6+fj6ecA+8Otxbm+yfv59PcBB/r1Cf0GCQ8B/P8UFAkBCRAGDeHL49rmHhwdIw8UGhQiHBsWKBotLjMsMCMfJy4kK//pAfgELjBCNjE0L0VLQzkP+REI2drb3N3e3+Dh014ckccFivKpvoNCQAt72Wjd/lyleTmnsMlrM4N5GUCiT5QMx18+cVFhEOkTbIZNw/RBdidKEQcJj2mMp16HSGzTP22+iNqDgt7o+i20UHWprMnPH30lVxs4cghH8w997tqvDTF25Y4o1/N+Dngv0SYHAmI3OFh2kWJ72uhlJrOQrSpU/QgOq8wweeL/YFxSEZIsJp6WibJSvCXZj5BCnStFVASdSLjezAYxYJBV3dC1USYwKO58aE/XuLuigrzsPi6HgQuUzrD6auyLmWKajIoltyd9i6U5cq5q/5d/Di6LJuXyYh32HrqFDBxLauh5IaUBaDhzypkH1xU="}, "node_version"=>"3.10.0.8b3", "ha_switch_info"=>{}, "disk_raid_status"=>{"result"=>"succeed", "msg"=>"skip raid check, not exist raid"}, "upgrade_status"=>0, "ha_info"=>{"vips"=>[], "master_ip"=>"", "backup_ip"=>""}}
.E
===============================================================================
Error: test_get_license_info(TestSystem)
: RuntimeError: no auth info, please set it
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:27:in `auth_flag'
/usr/local/appsys/package/lib/ruby/gems/2.2.0/gems/zcoreddi-0.0.1/server/lib/zcoreddi/util/license.rb:152:in `get_license_auth'
/root/zddiv3/tests/system_manager/system_test.rb:13:in `test_get_license_info'
     10:         assert_equal(200, code)
     11: 
     12:         api_license = response
  => 13:         local_api = DDI.get_license_flag.merge(DDI.get_license_auth)
     14:         api_license.each do |k,v|
     15:             if v != local_api[k]
     16:                 puts "license: key:#{k}'s values is not equal"
===============================================================================
..[test_post_tempauthorities]
--create network
    PATH: /networks
  METHOD: post
  PARAMS: {"comment"=>"", "name"=>"3.0.4.0/28", "owners"=>["local.master"], "templates"=>"0", "dhcp_templates"=>[], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_post_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:18:in `test_post_tempauthorities'
     15:         puts req.to_s
     16:         code, response = send_cmd(req.method, req.path, req.params)
     17:         puts "RESPONSE: #{response}"
  => 18:         assert_equal(200, code)
     19:         assert_equal(response.class, Hash)
     20:         puts "--create pool"
     21:         req.path = "/networks/:network/dhcp-resources"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities]
    PATH: /temp-authorities
  METHOD: put
  PARAMS: {"start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:54:in `test_put_tempauthorities'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}", "\n"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 1)
     57:         assert_equal(response[0].class, Hash)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_tempauthorities__authority_comment]
    PATH: /temp-authorities/00:01:01:01:01:01/comment
  METHOD: put
  PARAMS: {"comment"=>"just for test", "mac"=>"00:01:01:01:01:01", "start_time"=>"1474941050000", "end_time"=>"1475200250000", "network"=>"3.0.4.0/28", "resource"=>"3.0.4.1-3.0.4.10", "id"=>"00:01:01:01:01:01", "in_use"=>"yes", "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_tempauthorities__authority_comment(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:73:in `test_put_tempauthorities__authority_comment'
     70:         puts req.to_s
     71:         code, response = send_cmd(req.method, req.path, req.params)
     72:         puts "RESPONSE: #{response}", "\n"
  => 73:         assert_equal(200, code)
     74:         assert_equal(response.class, Hash)
     75:         assert_include(response.keys, "id")
     76:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities]
    PATH: /temp-authorities
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:90:in `test_get_tempauthorities'
     87:         puts req.to_s
     88:         code, response = send_cmd(req.method, req.path, req.params)
     89:         puts "RESPONSE: #{response}", "\n"
  => 90:         assert_equal(200, code)
     91:         assert_equal(response.class, Hash)
     92:         assert_include(response.keys, "resources")
     93:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_tempauthorities__authority]
    PATH: /temp-authorities/00:01:01:01:01:01
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_tempauthorities__authority(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:108:in `test_get_tempauthorities__authority'
     105:         puts req.to_s
     106:         code, response = send_cmd(req.method, req.path, req.params)
     107:         puts "RESPONSE: #{response}", "\n"
  => 108:         assert_equal(200, code)
     109:         assert_equal(response.class, Hash)
     110:         assert_include(response.keys, "id")
     111:         assert_equal(response["id"], "00:01:01:01:01:01")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_delete_tempauthorities]
--delete temp authority
    PATH: /temp-authorities
  METHOD: delete
  PARAMS: {"ids"=>["00:01:01:01:01:01"], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_delete_tempauthorities(TestTempAuthorities)
/root/zddiv3/tests/ipam/temp_authorities_test.rb:125:in `test_delete_tempauthorities'
     122:         puts req.to_s
     123:         code, response = send_cmd(req.method, req.path, req.params)
     124:         puts "RESPONSE: #{response}"
  => 125:         assert_equal(200, code)
     126:         assert_equal(response.class, Hash)
     127:         assert_include(response.keys, "result")
     128:         assert_equal(response["result"], "succeed")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
.[test_put_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: put
  PARAMS: {"attrs"=>[{"display_name"=>"name1", "type"=>"phone", "id"=>""}, {"display_name"=>"name2", "type"=>"number", "id"=>""}], "current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_put_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:17:in `test_put_userdefinedattrs'
     14:         puts req.to_s
     15:         code, response = send_cmd(req.method, req.path, req.params)
     16:         puts "RESPONSE: #{response}", "\n"
  => 17:         assert_equal(200, code)
     18:         assert_equal(response.class, Array)
     19:         assert response.length.eql?(2)
     20:         response.each do |v|
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_userdefinedattrs]
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_userdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:34:in `test_get_userdefinedattrs'
     31:         puts req.to_s
     32:         code, response = send_cmd(req.method, req.path, req.params)
     33:         puts "RESPONSE: #{response}", "\n"
  => 34:         assert_equal(200, code)
     35:         assert_equal(response.class, Array)
     36:         assert response.length.eql?(2)
     37:         assert do
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_put_res_private_user_defined_attrs]
--get attrs
    PATH: /user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 
F
===============================================================================
Failure:
test_put_res_private_user_defined_attrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:54:in `test_put_res_private_user_defined_attrs'
     51:         puts req.to_s
     52:         code, response = send_cmd(req.method, req.path, req.params)
     53:         puts "RESPONSE: #{response}"
  => 54:         assert_equal(200, code)
     55:         assert_equal(response.class, Array)
     56:         assert_equal(response.length, 2)
     57:         puts "--put attrs"
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs]
    PATH: /res-private-user-defined-attrs
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:89:in `test_get_resprivateuserdefinedattrs'
     86:         puts req.to_s
     87:         code, response = send_cmd(req.method, req.path, req.params)
     88:         puts "RESPONSE: #{response}", "\n"
  => 89:         assert_equal(200, code)
     90:         assert_equal(response.class, Hash)
     91:         assert_include(response.keys, "resources")
     92:         assert_equal(response["resources"].class, Array)
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
[test_get_resprivateuserdefinedattrs__restype]
    PATH: /res-private-user-defined-attrs/mac-informations
  METHOD: get
  PARAMS: {"current_user"=>"admin"}
Connection refused - connect(2) for "127.0.0.1" port 20120
RESPONSE: 

F
===============================================================================
Failure:
test_get_resprivateuserdefinedattrs__restype(TestUserDefinedAttrs)
/root/zddiv3/tests/ipam/user_defined_attrs_test.rb:106:in `test_get_resprivateuserdefinedattrs__restype'
     103:         puts req.to_s
     104:         code, response = send_cmd(req.method, req.path, req.params)
     105:         puts "RESPONSE: #{response}", "\n"
  => 106:         assert_equal(200, code)
     107:         assert_equal(response.class, Hash)
     108:         assert_include(response.keys, "id")
     109:         assert_equal(response["id"], "mac-informations")
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================

[_test_create_acl]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_acl(TestView)
/root/zddiv3/tests/dns/view_test.rb:8:in `_test_create_acl'
(eval):1:in `test_create_acl'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:22:in `_test_create_view'
(eval):1:in `test_create_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:39:in `_test_update_view'
(eval):1:in `test_update_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_create_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_create_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:50:in `_test_create_view_sortlist'
(eval):1:in `test_create_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_update_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_update_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:63:in `_test_update_view_sortlist'
(eval):1:in `test_update_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view_sortlist]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view_sortlist(TestView)
/root/zddiv3/tests/dns/view_test.rb:70:in `_test_delete_view_sortlist'
(eval):1:in `test_delete_view_sortlist'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_view]
Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_delete_view(TestView)
/root/zddiv3/tests/dns/view_test.rb:77:in `_test_delete_view'
(eval):1:in `test_delete_view'
<nil> expected but was
<200>

diff:
? nil
? 200
===============================================================================

[_test_delete_acl]
.Connection refused - connect(2) for "127.0.0.1" port 20120
F
===============================================================================
Failure:
test_snmp_ha_status(TestZVA)
/root/zddiv3/tests/system_manager/zva_test.rb:17:in `_test_start_snmp'
/root/zddiv3/tests/system_manager/zva_test.rb:34:in `test_snmp_ha_status'
     31:         type = response["type"]
     32: 
     33:         # start snmp
  => 34:         _test_start_snmp
     35: 
     36:         # get ha status
     37:         res = `snmpget -v2c -c #{SNMP_READ_COMMUNITY} localhost 1.3.6.1.4.1.39810.100.1.19.0`
<200> expected but was
<nil>

diff:
? 200
? nil
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_del_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:412:in `test_del_redirect_rrs'
     409:         rr_ids = Array.new
     410: 
     411:         #1:create new redirect records
  => 412:         add_redirect_rrs(5).each{|info|
     413:            rr_ids <<  info["id"]
     414:         }
     415:         #2:delete one
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_get_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:338:in `test_get_redirect_rrs'
     335: =end
     336:         rr_ids = []
     337:         rr_infos = []
  => 338:         rr_infos = add_redirect_rrs(10)
     339:         #store all records id,after finish the test,we'll delete them.
     340:         rr_infos.each{|rr|
     341:             rr_ids << rr["id"]
===============================================================================
+++test invalid view name+++
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_post_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:159:in `redirect_rr_common_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:191:in `post_test'
/root/zddiv3/tests/dns/redict_rr_test.rb:305:in `block in test_post_redirect_rrs'
     302: 
     303:         check_valid.each{|record|
     304:             puts "+++#{record[0].to_s}+++"
  => 305:             res = post_test(record[1], record[2], record[3])  
     306:             if record[0].to_s == "add new redirect record"
     307:                 new_rr_id << res["ret"]["id"]
     308:             end
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `each'
/root/zddiv3/tests/dns/redict_rr_test.rb:303:in `test_post_redirect_rrs'
===============================================================================
exception informations:Connection refused - connect(2) for "127.0.0.1" port 20120
E
===============================================================================
Error: test_put_redirect_rrs(Test_redirect_rrs)
: NoMethodError: undefined method `[]' for nil:NilClass
/root/zddiv3/tests/dns/redict_rr_test.rb:126:in `block in add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `times'
/root/zddiv3/tests/dns/redict_rr_test.rb:119:in `add_redirect_rrs'
/root/zddiv3/tests/dns/redict_rr_test.rb:357:in `test_put_redirect_rrs'
     354:        rr_ids = []
     355:  
     356:        #modify the records we have added,these values is we want to update
  => 357:        add_redirect_rrs(5).each{|rr_msg|
     358:           rr_ids << rr_msg["id"]
     359:           rr_msg["ttl"] = 200
     360:           rr_msg["is_enable"] = "no"
===============================================================================


Finished in 144066.907664346 seconds.

420 tests, 470 assertions, 198 failures, 106 errors, 0 pendings, 0 omissions, 7 notifications
35% passed

0.00 tests/s, 0.00 assertions/s
ping: unknown host master
ping: unknown host slave
ping: unknown host master
ping: unknown host slave
SimpleCov failed with exit 1Coverage report generated for Unit Tests to /root/coverage/sample/report. 16370 / 72012 LOC (22.73%) covered.
rake aborted!
Command failed with status (1): [ruby -I"lib:test:lib"  "/usr/local/appsys/package/lib/ruby/2.2.0/rake/rake_test_loader.rb" "/root/coverage/sample/test/test_helper.rb" "/root/zddiv3/tests/unit/agent/agent.rb" "/root/zddiv3/tests/unit/am/gridstats_menu_test.rb" "/root/zddiv3/tests/unit/am/gridstats_pair_test.rb" "/root/zddiv3/tests/unit/am/gridstats_regular_test.rb" "/root/zddiv3/tests/unit/am/gridstats_report_test.rb" "/root/zddiv3/tests/unit/am/network_pool_test.rb" "/root/zddiv3/tests/unit/dns/query_source_checker_test.rb" "/root/zddiv3/tests/unit/dns/query_source_test.rb" "/root/zddiv3/tests/unit/dns/shared_rr_test.rb" "/root/zddiv3/tests/unit/dns/shared_zone_test.rb" "/root/zddiv3/tests/unit/dns/smart_view_manager_test.rb" "/root/zddiv3/tests/unit/grid/obj_comment_test.rb" "/root/zddiv3/tests/unit/grid/user.rb" "/root/zddiv3/tests/unit/ipam/grid_dhcpfailover_test.rb" "/root/zddiv3/tests/unit/ipam/network_manager_test.rb" "/root/zddiv3/tests/unit/node/node_test.rb" "/root/zddiv3/tests/unit/system/ha_config.rb" "/root/zddiv3/tests/unit/system/nic_link_monitor_table_test.rb" "/root/zddiv3/tests/unit/system/power_status_table_test.rb" "/root/zddiv3/tests/unit/util/command_version_manager_test.rb" "/root/zddiv3/tests/unit/util/config_manager_test.rb" "/root/zddiv3/tests/unit/web/web.rb" "/root/zddiv3/tests/unit/zva/data_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/query_backup_log_test.rb" "/root/zddiv3/tests/unit/zva/snmpd_test.rb" "/root/zddiv3/tests/dns/acl_lib_test.rb" "/root/zddiv3/tests/dns/acl_test.rb" "/root/zddiv3/tests/dns/auth_zone_tree_test.rb" "/root/zddiv3/tests/dns/dns_security_test.rb" "/root/zddiv3/tests/dns/forward_zone_test.rb" "/root/zddiv3/tests/dns/hint-zones_test.rb" "/root/zddiv3/tests/dns/hint_zone_record_test.rb" "/root/zddiv3/tests/dns/ip_rrl_test.rb" "/root/zddiv3/tests/dns/local-policiey_test.rb" "/root/zddiv3/tests/dns/name_rrl_test.rb" "/root/zddiv3/tests/dns/parse_auth_view_zone_rr_test.rb" "/root/zddiv3/tests/dns/redict_rr_test.rb" "/root/zddiv3/tests/dns/redirection_url_test.rb" "/root/zddiv3/tests/dns/stub_zone_test.rb" "/root/zddiv3/tests/dns/view_test.rb" "/root/zddiv3/tests/grid/grid_test.rb" "/root/zddiv3/tests/ipam/acls_test.rb" "/root/zddiv3/tests/ipam/audit_test.rb" "/root/zddiv3/tests/ipam/auth_users_test.rb" "/root/zddiv3/tests/ipam/authenticate_policy_test.rb" "/root/zddiv3/tests/ipam/dhcp_failovers_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_acls_test.rb" "/root/zddiv3/tests/ipam/dhcp_option_spaces_test.rb" "/root/zddiv3/tests/ipam/dhcp_resources_test.rb" "/root/zddiv3/tests/ipam/dhcp_templates_test.rb" "/root/zddiv3/tests/ipam/fingerprints_test.rb" "/root/zddiv3/tests/ipam/ipam_config_test.rb" "/root/zddiv3/tests/ipam/ipam_search_resources_test.rb" "/root/zddiv3/tests/ipam/macs_test.rb" "/root/zddiv3/tests/ipam/networks_test.rb" "/root/zddiv3/tests/ipam/query_tasks_test.rb" "/root/zddiv3/tests/ipam/roaming_host_test.rb" "/root/zddiv3/tests/ipam/scan_tasks_test.rb" "/root/zddiv3/tests/ipam/shared_networks_test.rb" "/root/zddiv3/tests/ipam/temp_authorities_test.rb" "/root/zddiv3/tests/ipam/user_defined_attrs_test.rb" "/root/zddiv3/tests/system_manager/alarm_test.rb" "/root/zddiv3/tests/system_manager/ha_test.rb" "/root/zddiv3/tests/system_manager/license_test.rb" "/root/zddiv3/tests/system_manager/sso_test.rb" "/root/zddiv3/tests/system_manager/system_loop_test.rb" "/root/zddiv3/tests/system_manager/system_test.rb" "/root/zddiv3/tests/system_manager/zva_test.rb" ]

Tasks: TOP => test
(See full trace by running task with --trace)
31 May 08:02:19 ntpdate[18469]: step time server 120.25.115.20 offset -143971.338198 sec
